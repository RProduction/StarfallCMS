{"version":3,"sources":["components/DocumentJSONEditor.js","components/DocumentEdit.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_1__","react_ace__WEBPACK_IMPORTED_MODULE_2__","react_ace__WEBPACK_IMPORTED_MODULE_2___default","DocumentJSONEditor","props","data","onChange","onValidation","a","createElement","item","container","xs","placeholder","mode","theme","name","onValidate","width","minLines","maxLines","Infinity","fontSize","showPrintMargin","showGutter","highlightActiveLine","value","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","editorProps","$blockScrolling","useStyle","makeStyles","root","& > *","marginTop","spacing","marginBottom","DocumentEdit","style","dispatch","useDispatch","document","match","params","_document","useSelector","state","selectDocument","_useState","useState","_useState2","Object","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setData","_useState3","_useState4","valid","setValid","useEffect","newdata","JSON","stringify","console","log","react__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_4__","className","direction","_DocumentJSONEditor__WEBPACK_IMPORTED_MODULE_11__","annotations","length","component","Button","color","variant","disabled","onClick","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","Axios","post","concat","parse","ShowNotificationDialog","t0","stop"],"mappings":"2FAAA,IAAAA,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAAAI,EAAAH,EAAA,KAAAI,EAAAJ,EAAA,KAAAK,EAAAL,EAAAE,EAAAE,GAAAJ,EAAA,KAAAA,EAAA,KAAAA,EAAA,KAwCeM,IA/Bf,SAA4BC,GAAM,IACvBC,EAAgCD,EAAhCC,KAAMC,EAA0BF,EAA1BE,SAAUC,EAAgBH,EAAhBG,aAEvB,OACIT,EAAAU,EAAAC,cAACT,EAAA,EAAD,CAAMU,MAAI,EAACC,WAAS,EAACC,GAAI,IACrBd,EAAAU,EAAAC,cAACP,EAAAM,EAAD,CACIK,YAAY,GACZC,KAAK,OACLC,MAAM,SACNC,KAAK,cACLV,SAAUA,EACVW,WAAYV,EACZW,MAAM,OACNC,SAAU,GACVC,SAAUC,IACVC,SAAU,GACVC,iBAAiB,EACjBC,YAAY,EACZC,qBAAqB,EACrBC,MAAOrB,EACPsB,2BAA2B,EAC3BC,0BAA0B,EAC1BC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAS,EACTC,YAAa,CAACC,gBAAiBZ,qLCpBzCa,EAAWC,IAAW,SAAApB,GAAK,MAAK,CACrCqB,KAAK,CACJC,QAAQ,CACPC,UAAWvB,EAAMwB,QAAQ,IAChBC,aAAczB,EAAMwB,QAAQ,SAwDzBE,UAnDf,SAAsBrC,GAClB,IAAMsC,EAAQR,IACRS,EAAWC,cACVC,EAAYzC,EAAM0C,MAAMC,OAAxBF,SAEDG,EAAYC,YAAY,SAAAC,GAAK,OAAIC,YAAeD,EAAOL,KALrCO,EAOAC,mBAAS,MAPTC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAOjB/C,EAPiBiD,EAAA,GAOXG,EAPWH,EAAA,GAAAI,EAQEL,oBAAS,GARXM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAQjBE,EARiBD,EAAA,GAQVE,EARUF,EAAA,GAkBxB,OARAG,oBAAU,WACN,GAAGd,EAAU,CACT,IAAMe,EAAUC,KAAKC,UAAUjB,EAAU3C,KAAM,KAAM,GACrDoD,EAAQM,GACRG,QAAQC,IAAIJ,KAEjB,CAACf,IAGAoB,EAAA5D,EAAAC,cAAC4D,EAAA,EAAD,CAAM1D,WAAS,EAAC2D,UAAW5B,EAAMN,KAAMmC,UAAU,UAC7CH,EAAA5D,EAAAC,cAAC+D,EAAA,EAAD,CACInE,KAAMA,EACNC,SAAU,SAACoB,GAAD,OAAW+B,EAAQ/B,IAC7BnB,aAAc,SAACkE,GAAD,OAAiBZ,EAAgC,IAAvBY,EAAYC,WAExDN,EAAA5D,EAAAC,cAAC4D,EAAA,EAAD,CAAM3D,MAAI,EAACiE,UAAWC,IAAQhE,GAAI,GAC9BiE,MAAM,YAAYC,QAAQ,YAAYC,UAAWnB,EACjDoB,QAAOzB,OAAA0B,EAAA,EAAA1B,CAAA2B,EAAA1E,EAAA2E,KAAE,SAAAC,IAAA,OAAAF,EAAA1E,EAAA6E,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEKC,IAAMC,KAAN,YAAAC,OAAuB9C,EAAvB,WAA0C,CAC5CxC,KAAM2D,KAAK4B,MAAMvF,KAHpB,OAMDsC,EAASkD,YACL,gBACA,6BARHP,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,SAWD3C,EAASkD,YACL,gBAD2B,4BAAAF,OAAAL,EAAAQ,MAX9B,wBAAAR,EAAAS,SAAAX,EAAA,kBAFb","file":"static/js/18.a34a1f92.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport AceEditor from \"react-ace\";\r\nimport 'brace/ext/language_tools';\r\nimport 'brace/mode/json';\r\nimport 'brace/theme/github';\r\n\r\nfunction DocumentJSONEditor(props){\r\n    const {data, onChange, onValidation} = props;\r\n\r\n    return(\r\n        <Grid item container xs={12}>\r\n            <AceEditor\r\n                placeholder=\"\" \r\n                mode=\"json\" \r\n                theme=\"github\"\r\n                name=\"json-editor\"\r\n                onChange={onChange}\r\n                onValidate={onValidation}\r\n                width=\"100%\"\r\n                minLines={20}\r\n                maxLines={Infinity}\r\n                fontSize={22}\r\n                showPrintMargin={true}\r\n                showGutter={true}\r\n                highlightActiveLine={true}\r\n                value={data}\r\n                enableBasicAutocompletion={true}\r\n                enableLiveAutocompletion={true}\r\n                enableSnippets={false}\r\n                showLineNumbers={true}\r\n                tabSize={4}\r\n                editorProps={{$blockScrolling: Infinity}}\r\n            />\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentJSONEditor;","import React, {useState, useEffect} from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport Axios from '../Axios';\r\n\r\nimport {ShowNotificationDialog} from '../redux/actions/globalActions';\r\nimport {selectDocument} from '../redux/selectors/documentSelectors';\r\nimport DocumentJSONEditor from './DocumentJSONEditor';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n\troot:{\r\n\t\t'& > *':{\r\n\t\t\tmarginTop: theme.spacing(0.5),\r\n            marginBottom: theme.spacing(0.5)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nfunction DocumentEdit(props){\r\n    const style = useStyle()\r\n    const dispatch = useDispatch();\r\n    const {document} = props.match.params;\r\n\r\n    const _document = useSelector(state => selectDocument(state, document));\r\n\r\n    const [data, setData] = useState('{}');\r\n    const [valid, setValid] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        if(_document){\r\n            const newdata = JSON.stringify(_document.data, null, 4);\r\n            setData(newdata);\r\n            console.log(newdata);\r\n        }\r\n    }, [_document]);\r\n    \r\n    return(\r\n        <Grid container className={style.root} direction=\"column\">\r\n            <DocumentJSONEditor \r\n                data={data} \r\n                onChange={(value) => setData(value)}\r\n                onValidation={(annotations) => setValid(annotations.length === 0)}\r\n            />\r\n            <Grid item component={Button} xs={12} \r\n                color=\"secondary\" variant=\"contained\" disabled={!valid}\r\n                onClick={async() => {\r\n                    try{\r\n                        await Axios.post(`document/${document}/modify`, {\r\n                            data: JSON.parse(data)\r\n                        });\r\n\r\n                        dispatch(ShowNotificationDialog(\r\n                            'Edit Document', \r\n                            'Succeed editing document'\r\n                        ));\r\n                    }catch(err){\r\n                        dispatch(ShowNotificationDialog(\r\n                            'Edit Document', \r\n                            `Failed editing document, ${err}`\r\n                        ));\r\n                    }\r\n                }}\r\n            >\r\n                Modify\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentEdit;"],"sourceRoot":""}