{"version":3,"sources":["redux/selectors/entitySelectors.js","redux/actions/storageActions.js","components/ContentContainer.js","redux/selectors/projectSelectors.js","redux/actions/projectActions.js","redux/actions/documentActions.js","redux/selectors/documentSelectors.js","redux/actions/entityActions.js","redux/schemas/database.js","components/HeaderLink.js","components/Header.js","components/Footer.js","components/SideBarEntity.js","components/SideBarProject.js","components/SideBarContent.js","components/SideBar.js","WebsocketClient.js","Admin.js"],"names":["__webpack_require__","d","__webpack_exports__","selectEntitiesInProject","selectEntitiesInProjectByName","selectEntityInProjectByName","reselect__WEBPACK_IMPORTED_MODULE_0__","_projectSelectors__WEBPACK_IMPORTED_MODULE_1__","_selectEntities","state","entities","selectAllEntities","Object","values","createSelector","_","id","filter","value","projectId","name","selectProjectByName","select","project","__","find","UploadStorage","files","type","RenameStorage","updated","PublicStorage","isPublic","DeleteStorage","ids","FetchStorage","_ref","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","res","wrap","_context","prev","next","Axios","get","concat","sent","data","t0","console","log","stop","_x","apply","this","arguments","PushFileUpload","file","InitFileUpload","cancel","SetFileUpload","progress","FinishFileUpload","PopFileUpload","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Container__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_2__","ContentContainer","props","createElement","assign","minHeight","component","Container","maxWidth","children","selectAllProjects","_selectProjects","projects","SetProjectPopover","anchor","AddProjects","DeleteProject","getState","DeleteEntities","map","_x2","RenameProject","publicKey","ImgProject","img","InitDatabase","_ref2","_callee2","_projects","normalized","_context2","normalizeProjects","result","forEach","push","img_url","created","created_at","updated_at","public_key","project_id","AddEntities","FetchDocuments","_x3","AddDocuments","documents","DeleteDocuments","ModifyDocument","entityId","normalizeDocuments","entity_id","selectDocument","selectDocumentsInEntity","selectDocumentsInEntityByName","_entitySelectors__WEBPACK_IMPORTED_MODULE_1__","_selectDocuments","selectAllDocuments","entity","RenameEntity","normalizr__WEBPACK_IMPORTED_MODULE_0__","document","schema","Entity","idAttribute","documentList","Array","entityList","projectList","input","normalize","HeaderLink","location","_useState","useState","_useState2","slicedToArray","params","setParams","useEffect","count","pathname","match","length","matchPath","path","exact","react_default","Fragment","react_router_dom","to","useStyle","makeStyles","theme","root","objectSpread","backgroundColor","palette","primary","light","responsive","link","& a","color","paddingLeft","spacing","paddingRight","fontSize","whiteSpace","overflow","textOverflow","hide","Header","history","style","useDispatch","sidebar","useSelector","_status","authStatus","AppBar","position","className","Toolbar","Hidden","mdUp","IconButton","aria-label","onClick","SwitchSideBar","edge","clsx","Menu_default","Box","display","flexGrow","container","Typography","variant","align","components_HeaderLink","CREATOR","aria-haspopup","e","Settings_default","AuthSignOut","ExitToApp_default","text","textAlign","lineHeight","Footer","SideBarEntity","projectName","ListItem","divider","ButtonBase","Link","ListItemText","btn","SideBarProject","useMemo","open","setOpen","_useState3","_useState4","openEntities","setOpenEntities","button","ExpandLess_default","ExpandMore_default","Collapse","in","timeout","unmountOnExit","List","disablePadding","components_SideBarEntity","key","SideBarContent","components_SideBarProject","paper","main","sidebarPaper","direction","alignItems","padding","mixins","toolbar","justifyContent","SideBar","Drawer","classes","ModalProps","keepMounted","ChevronLeft_default","ChevronRight_default","Divider","components_SideBarContent","smDown","WebsocketClient","ws","Ws","on","subscribe","storage","msg","err","connect","close","Overview","lazy","Promise","all","then","bind","Project","Document","Storage","UserList","marginTop","paddingTop","paddingBottom","background","Admin","FIRST_BOOT","react_router","NOT_AUTHORIZED","components_Header","components_SideBar","src_WebsocketClient","react","fallback","LoadingIndicator","components_Footer"],"mappings":"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","file":"static/js/9.2c1ab19e.chunk.js","sourcesContent":["import {createSelector} from 'reselect';\r\nimport {selectProjectByName} from './projectSelectors';\r\n\r\n// entity selectors\r\nconst _selectEntities = state => state.entities;\r\nexport const selectEntityIds = state => Object.keys(_selectEntities(state));\r\nexport const selectEntity = (state, id) => _selectEntities(state)[id];\r\nexport const selectAllEntities = state => Object.values(_selectEntities(state));\r\nexport const selectEntitiesInProject = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (_, id) => id,\r\n        (entities, id)=>{\r\n            return entities.filter(value => value.projectId === id);\r\n        }\r\n    );\r\n};\r\nexport const selectEntitiesInProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (state, name) => {\r\n            const select = selectProjectByName();\r\n            return select(state, name);\r\n        },\r\n        (entities, project)=>{\r\n            return project ? {\r\n                project: project,\r\n                entities: entities.filter(value => value.projectId === project.id)\r\n            } : null;\r\n        }\r\n    );\r\n};\r\nexport const selectEntityInProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (state, project, _) => {\r\n            const select = selectProjectByName();\r\n            return select(state, project);\r\n        },\r\n        (_, __, name) => name,\r\n        (entities, project, name)=>{\r\n            return project ? entities.find(\r\n                value => value.name === name && value.projectId === project.id\r\n            ) : null;\r\n        }\r\n    );\r\n};","import Axios from '../../Axios';\r\n\r\n// actions for storage\r\n\r\n// receive files\r\nexport const UploadStorage = (files) => {\r\n    return {\r\n        type: \"UPLOAD_STORAGE\", \r\n        files: files\r\n    };\r\n}\r\n\r\nexport const RenameStorage = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_STORAGE\", \r\n        id: id,\r\n        name: name,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const PublicStorage = (id, isPublic, updated) => {\r\n    return {\r\n        type: \"PUBLIC_STORAGE\", \r\n        id: id,\r\n        isPublic: isPublic,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const DeleteStorage = (ids) => {\r\n    return {\r\n        type: \"DELETE_STORAGE\", \r\n        ids: ids\r\n    };\r\n}\r\n\r\n// get data from server containing storage list per project id\r\nexport const FetchStorage = (projectId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`storage/${projectId}`);\r\n        dispatch(UploadStorage(res.data));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n\r\n// upload progress\r\nexport function PushFileUpload(project, name, file) {\r\n    return {\r\n        type: \"PUSH_FILE_UPLOAD\",\r\n        name: name,\r\n        file: file,\r\n        project: project\r\n    };\r\n}\r\n\r\nexport function InitFileUpload(project, name, cancel) {\r\n    return {\r\n        type: \"INIT_FILE_UPLOAD\", \r\n        name: name,\r\n        project: project\r\n    };\r\n}\r\n\r\nexport function SetFileUpload(project, name, progress) {\r\n    return {\r\n        type: \"SET_FILE_UPLOAD\", \r\n        name: name, \r\n        progress: progress,\r\n        project: project\r\n    };\r\n}\r\n\r\nexport function FinishFileUpload(project, name) {\r\n    return {\r\n        type: \"FINISH_FILE_UPLOAD\", \r\n        name: name, \r\n        project: project\r\n    };\r\n}\r\n\r\nexport function PopFileUpload(project, name) {\r\n    return {\r\n        type: \"POP_FILE_UPLOAD\",\r\n        name: name,\r\n        project: project\r\n    };\r\n}","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction ContentContainer(props){\r\n    return(\r\n        <Box minHeight='100vh' component={Container} maxWidth=\"xl\" {...props}>\r\n            {\r\n                props.children\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ContentContainer;","import {createSelector} from 'reselect';\r\n\r\n// project selectors\r\nconst _selectProjects = state => state.projects;\r\nexport const selectProjectIds = state => Object.keys(_selectProjects(state));\r\nexport const selectProject = (state, id) => _selectProjects(state)[id];\r\nexport const selectAllProjects = state => Object.values(_selectProjects(state));\r\nexport const selectProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllProjects,\r\n        (_, name) => name,\r\n        (projects, name)=>{\r\n            return projects.find(value => value.name === name);\r\n        }\r\n    );\r\n};","import {DeleteEntities, AddEntities} from './entityActions';\r\nimport {FetchDocuments} from './documentActions';\r\nimport {FetchStorage} from './storageActions';\r\nimport {selectEntitiesInProject} from '../selectors/entitySelectors';\r\nimport Axios from '../../Axios';\r\nimport {normalizeProjects} from '../schemas/database';\r\n\r\n// UI Overview PopoverMenu\r\nexport function SetProjectPopover(anchor){\r\n    return {type: \"SET_PROJECT_POPOVER\", anchor: anchor};\r\n}\r\n\r\n// receive array of id, name, updated, created, publicKey\r\nexport const AddProjects = projects => {\r\n    return {\r\n        type: \"ADD_PROJECTS\", \r\n        projects: projects\r\n    };\r\n}\r\n\r\nexport const DeleteProject = id => async (dispatch, getState) => {\r\n    // must delete entities first before deleting project\r\n    // entities will search project indexes\r\n    // then project can delete it's indexes\r\n    const select = selectEntitiesInProject();\r\n    const entities = select(getState(), id);\r\n    dispatch(DeleteEntities(entities.map(value => value.id)));\r\n    \r\n    // delete project\r\n    dispatch({type: \"DELETE_PROJECT\", id: id});\r\n}\r\n\r\nexport const RenameProject = (id, name, updated, publicKey) => {\r\n    return {\r\n        type: \"RENAME_PROJECT\", \r\n        id: id, \r\n        name: name,\r\n        updated: updated,\r\n        publicKey: publicKey\r\n    };\r\n}\r\n\r\nexport const ImgProject = (id, img, updated) => {\r\n    return {\r\n        type: \"IMG_PROJECT\", \r\n        id: id, \r\n        img: img,\r\n        updated: updated\r\n    };\r\n}\r\n\r\n// get data from server containing project with related entity\r\n// and dispatch multiple action from this function\r\nexport const InitDatabase = () => async dispatch => {\r\n    // normalized containing\\\r\n    /*\r\n        entities:\r\n            entities: object\r\n            projects: object\r\n        result: Array()\r\n            0: _id\r\n    */\r\n    try{\r\n        const _projects = await Axios.get('project');\r\n        const normalized = normalizeProjects(_projects.data);\r\n        let projects = [];\r\n        let entities = [];\r\n        normalized.result.forEach(value =>{\r\n            projects.push({\r\n                id: normalized.entities.projects[value].id,\r\n                name: normalized.entities.projects[value].name,\r\n                img: normalized.entities.projects[value].img_url,\r\n                created: normalized.entities.projects[value].created_at,\r\n                updated: normalized.entities.projects[value].updated_at,\r\n                publicKey: normalized.entities.projects[value].public_key\r\n            });\r\n            dispatch(AddProjects(projects));\r\n\r\n            normalized.entities.projects[value].entities.forEach(value =>{\r\n                entities.push({\r\n                    id: normalized.entities.entities[value].id,\r\n                    projectId: normalized.entities.entities[value].project_id,\r\n                    name: normalized.entities.entities[value].name,\r\n                    created: normalized.entities.entities[value].created_at,\r\n                    updated: normalized.entities.entities[value].updated_at\r\n                });\r\n            });\r\n        });\r\n        dispatch(AddEntities(entities));\r\n\r\n        entities.forEach(value => dispatch(FetchDocuments(value.id)));\r\n        projects.forEach(value => dispatch(FetchStorage(value.id)));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import {normalizeDocuments} from '../schemas/database';\r\nimport Axios from '../../Axios';\r\n\r\n// receive array of id, entityId, updated, created, data\r\nexport const AddDocuments = documents => {\r\n    return {\r\n        type: \"ADD_DOCUMENTS\", \r\n        documents: documents\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteDocuments = ids => {\r\n    return {type: \"DELETE_DOCUMENTS\", documents: ids};\r\n}\r\n\r\n// receive object id, updated, data\r\nexport const ModifyDocument = (id, updated, data) => {\r\n    return {type: \"MODIFY_DOCUMENT\", id: id, updated: updated, data: data};\r\n}\r\n\r\nexport const FetchDocuments = (entityId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`document/${entityId}`);\r\n        const normalized = normalizeDocuments(res.data);\r\n        let documents = [];\r\n        normalized.result.forEach(value =>{\r\n            documents.push({\r\n                id: normalized.entities.documents[value].id,\r\n                entityId: normalized.entities.documents[value].entity_id,\r\n                created: normalized.entities.documents[value].created_at,\r\n                updated: normalized.entities.documents[value].updated_at,\r\n                data: normalized.entities.documents[value].data\r\n            });\r\n        });\r\n        \r\n        dispatch({type: 'SET_DOCUMENT_INIT', entityId: entityId});\r\n        dispatch(AddDocuments(documents));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import {createSelector} from 'reselect';\r\nimport {selectEntityInProjectByName} from './entitySelectors';\r\n\r\nconst _selectDocuments = state => state.documents;\r\nexport const selectDocumentIds = state => Object.keys(_selectDocuments(state));\r\nexport const selectDocument = (state, id) => _selectDocuments(state)[id];\r\nexport const selectAllDocuments = state => Object.values(_selectDocuments(state));\r\nexport const selectDocumentsInEntity = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (_, id) => id,\r\n        (documents, id)=>{\r\n            return documents.filter(value => value.entityId === id);\r\n        }\r\n    );\r\n};\r\n\r\n// if empty then return entity\r\nexport const selectDocumentsInEntityByName = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (state, project, name)=>{\r\n            const select = selectEntityInProjectByName();\r\n            return select(state, project, name);\r\n        },\r\n        (documents, entity)=>{\r\n            return entity ? {\r\n                entity: entity,\r\n                documents: documents.filter(value => value.entityId === entity.id)\r\n            } : null;\r\n        }\r\n    );\r\n};","import {DeleteDocuments} from './documentActions';\r\nimport {selectDocumentsInEntity} from '../selectors/documentSelectors';\r\n\r\n// receive array of id, projectId, name, updated, created\r\nexport const AddEntities = entities => {\r\n    return {\r\n        type: \"ADD_ENTITIES\", \r\n        entities: entities\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteEntities = ids => async (dispatch, getState) => {\r\n    // delete documents first then can safely delete entities\r\n    const select = selectDocumentsInEntity();\r\n    let documents = [];\r\n    ids.forEach(value => {\r\n        const temp = select(getState(), value);\r\n        temp.forEach(value => documents.push(value.id));\r\n    });\r\n\r\n    dispatch(DeleteDocuments(documents));\r\n    dispatch({type: \"DELETE_ENTITIES\", entities: ids});\r\n}\r\n\r\nexport const RenameEntity = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_ENTITY\", \r\n        id: id,\r\n        name: name,\r\n        updated: updated\r\n    };\r\n}","import {schema, normalize} from 'normalizr';\r\n\r\nconst document = new schema.Entity('documents', {}, {idAttribute: 'id'});\r\nconst documentList = new schema.Array(document);\r\n\r\nconst entity = new schema.Entity('entities', {\r\n    documents: documentList\r\n}, {idAttribute: 'id'});\r\nconst entityList = new schema.Array(entity);\r\n\r\nconst project = new schema.Entity('projects', {\r\n    entities: entityList\r\n}, {idAttribute: 'id'});\r\nconst projectList = new schema.Array(project);\r\n\r\nexport function normalizeProjects(input){\r\n    return normalize(input, projectList);\r\n}\r\n\r\nexport function normalizeEntities(input){\r\n    return normalize(input, entityList);\r\n}\r\n\r\nexport function normalizeDocuments(input){\r\n    return normalize(input, documentList);\r\n}","import React, {useEffect, useState} from 'react';\r\n\r\nimport {Link, matchPath} from 'react-router-dom';\r\n\r\nfunction HeaderLink(props){\r\n    const {location} = props;\r\n    const [params, setParams] = useState({});\r\n    \r\n    useEffect(()=>{\r\n        // calculate how many strip in pathname\r\n        // then apply matchPath function conditionally\r\n        const count = (location.pathname.match(/\\/./g)||[]).length;\r\n        if(count === 0){\r\n            setParams({});\r\n        }else if(count === 1){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project\", exact: true\r\n            }).params);\r\n        }else if(count === 2){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity\", exact: true\r\n            }).params);\r\n        }else if(count === 3){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity/:document\", exact: true\r\n            }).params);\r\n        }\r\n    }, [location.pathname]);\r\n\r\n    const {project, entity, document} = params;\r\n    // from root => project => entity\r\n    return(\r\n        <React.Fragment>\r\n            <Link to='/'> StarfallCMS </Link>\r\n            {project ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}`}> {project} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {entity ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}`}> {entity} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {document ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}/${document}`}> {document} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default HeaderLink;","import React from 'react';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Box from '@material-ui/core/Box';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport ExitToApp from '@material-ui/icons/ExitToApp';\r\nimport Settings from '@material-ui/icons/Settings';\r\nimport Menu from '@material-ui/icons/Menu';\r\n\r\nimport clsx from 'clsx';\r\n\r\nimport {useSelector, useDispatch} from 'react-redux';\r\n\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport {AuthSignOut} from '../redux/actions/authorizationActions';\r\nimport HeaderLink from './HeaderLink';\r\nimport {CREATOR} from '../redux/actions/authorizationActions';\r\n\r\nconst useStyle = makeStyles(theme=>({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.light,\r\n        ...theme.responsive\r\n    },\r\n    link: {\r\n        '& a': {\r\n            color: 'black',\r\n            paddingLeft: theme.spacing(0.35),\r\n            paddingRight: theme.spacing(0.35),\r\n            fontSize: '115%'\r\n        },\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    hide: theme.hide\r\n}));\r\n\r\nfunction Header(props){\r\n    const {history} = props;\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n    const _status = useSelector(state => state.authStatus);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <AppBar position=\"fixed\" className={style.root}>\r\n                <Toolbar>\r\n                    <Hidden mdUp>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label=\"Open drawer\"\r\n                            onClick={() => dispatch(SwitchSideBar(!sidebar))}\r\n                            edge=\"start\"\r\n                            className={clsx(sidebar && style.hide)}\r\n                        >\r\n                            <Menu />\r\n                        </IconButton>\r\n                    </Hidden>\r\n                    <Box display=\"flex\" flexGrow={1}\r\n                        container={Typography} variant=\"h6\" align=\"center\"\r\n                        className={style.link}\r\n                    >\r\n                        <HeaderLink {...props}/>\r\n                    </Box>\r\n                    {_status === CREATOR ?\r\n                        <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"Account of current user\"\r\n                            aria-haspopup=\"true\"\r\n                            color=\"inherit\"\r\n                            onClick={e => history.push('/userlist')}\r\n                        >\r\n                            <Settings />\r\n                        </IconButton> : null\r\n                    }\r\n                    <IconButton\r\n                        edge=\"end\"\r\n                        aria-label=\"Log Off\"\r\n                        aria-haspopup=\"true\"\r\n                        color=\"inherit\"\r\n                        onClick={e => dispatch(AuthSignOut())}\r\n                    >\r\n                        <ExitToApp />\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        backgroundColor: '#292D2E',\r\n        ...theme.responsive\r\n    },\r\n    text: {\r\n        color: 'white',\r\n        fontSize: '125%',\r\n        textAlign: 'center',\r\n        lineHeight: '50px'\r\n    }\r\n}));\r\n\r\nfunction Footer(){\r\n    const style = useStyle();\r\n    return(\r\n        <footer className={style.root}>\r\n            <Typography variant=\"h3\" className={style.text}>\r\n                Copyright Starfall Production\r\n            </Typography>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nconst useStyle = makeStyles({\r\n    root: {\r\n        flexGrow: 1\r\n    }\r\n});\r\n\r\nfunction SideBarEntity(props){\r\n    const style = useStyle();\r\n    const {name, projectName} = props;\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem divider>\r\n                <ButtonBase component={Link} \r\n                    to={`/${projectName}/${name}`}\r\n                    className={style.root}\r\n                >\r\n                    <ListItemText primary={name}/>\r\n                </ButtonBase>\r\n            </ListItem>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarEntity;","import React, {useState, useMemo} from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\n\r\nimport clsx from 'clsx';\r\n\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport SideBarEntity from './SideBarEntity';\r\nimport {selectEntitiesInProject} from '../redux/selectors/entitySelectors';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(1)\r\n    },\r\n    hide: {\r\n        display: 'none'\r\n    },\r\n    btn: {\r\n        flexGrow: 1\r\n    }\r\n}));\r\n\r\nfunction SideBarProject(props){\r\n    const style = useStyle();\r\n    const {id, name} = props;\r\n    const select = useMemo(selectEntitiesInProject,[]);\r\n    const entities = useSelector(state => select(state, id));\r\n    const [open, setOpen] = useState(false);\r\n    const [openEntities, setOpenEntities] = useState(false);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem button divider onClick={() => setOpen(!open)}>\r\n                <ListItemText primary={name}/>\r\n                {open ? <ExpandLess /> : <ExpandMore />}\r\n            </ListItem>\r\n            <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n                <List className={style.root} disablePadding>\r\n                    <ListItem button component={Link} to={`/${name}/storage`} divider>\r\n                        <ListItemText primary=\"Storage\" />\r\n                    </ListItem>\r\n                    <ListItem divider>\r\n                        <ButtonBase component={Link} \r\n                            to={`/${name}`}\r\n                            className={style.btn}\r\n                        >\r\n                            <ListItemText primary=\"Entities\"/>\r\n                        </ButtonBase>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label={`Expand ${name} entities`}\r\n                            onClick={() => setOpenEntities(!openEntities)}\r\n                            edge=\"end\"\r\n                            className={clsx(entities.length === 0 && style.hide)}\r\n                        >\r\n                            {openEntities ? <ExpandLess /> : <ExpandMore />}\r\n                        </IconButton>\r\n                    </ListItem>\r\n                    {\r\n                        entities.length > 0 ? \r\n                            <Collapse in={openEntities} timeout=\"auto\" unmountOnExit>\r\n                                <List className={style.root} disablePadding>\r\n                                    {\r\n                                        entities.map((value) => {\r\n                                            return <SideBarEntity\r\n                                                key={value.id}\r\n                                                name={value.name}\r\n                                                projectName={name}\r\n                                            />\r\n                                        })\r\n                                    }\r\n                                </List>\r\n                            </Collapse> : null\r\n                    }\r\n                </List>\r\n            </Collapse>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarProject;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport SideBarProject from './SideBarProject';\r\nimport {selectAllProjects} from '../redux/selectors/projectSelectors';\r\n\r\nfunction SideBarContent(props){\r\n    const projects = useSelector(selectAllProjects);\r\n\r\n    return(\r\n        <List>\r\n            <ListItem button component={Link} to=\"/\" divider>\r\n                <ListItemText primary=\"Overview\" />\r\n            </ListItem>\r\n            {\r\n                projects.map((value)=>{\r\n                    return(\r\n                        <SideBarProject id={value.id} name={value.name} key={value.id}/>\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\nexport default SideBarContent;","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport SideBarContent from './SideBarContent';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: theme.sidebar,\r\n    paper: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        ...theme.sidebarPaper\r\n    },\r\n    direction: theme.direction,\r\n    btn: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: '0 8px',\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end'\r\n    }\r\n}));\r\n\r\nfunction SideBar(props){\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <Hidden mdUp>\r\n                <Drawer\r\n                    className={style.root}\r\n                    variant=\"temporary\"\r\n                    anchor={style.direction === 'rtl' ? 'right' : 'left'}\r\n                    open={sidebar}\r\n                    classes={{paper: style.paper}}\r\n                    ModalProps={{keepMounted: true}}\r\n                >\r\n                    <div className={style.btn}>\r\n                        <IconButton onClick={() => dispatch(SwitchSideBar(!sidebar))}>\r\n                            {style.direction === 'ltr' ? <ChevronLeft /> : <ChevronRight />}\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden smDown>\r\n                <Drawer\r\n                    className={style.root}\r\n                    classes={{paper: style.paper}}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBar;","import {useEffect} from 'react';\r\n\r\nimport Ws from '@adonisjs/websocket-client';\r\n\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {AddProjects, DeleteProject, RenameProject, ImgProject} from './redux/actions/projectActions';\r\nimport {AddEntities, DeleteEntities, RenameEntity} from './redux/actions/entityActions';\r\nimport {AddDocuments, ModifyDocument, DeleteDocuments} from './redux/actions/documentActions';\r\nimport {UploadStorage, RenameStorage, DeleteStorage, PublicStorage} from './redux/actions/storageActions';\r\n\r\nfunction WebsocketClient(props) {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        const ws = process.env.NODE_ENV === 'development' \r\n            ? Ws('ws://localhost:3333/', {path: 'starfall-cms-ws'}) \r\n            : Ws(null, {path: 'starfall-cms-ws'});\r\n        \r\n        ws.on(\"open\", ()=>{\r\n            const project = ws.subscribe('project');\r\n            const entity = ws.subscribe('entity');\r\n            const document = ws.subscribe('document');\r\n            const storage = ws.subscribe('storage');\r\n            \r\n            // project socket listener\r\n            project.on('add', (msg)=>{\r\n                console.log(\"add project\");\r\n                console.log(msg);\r\n                dispatch(AddProjects([{\r\n                    id: msg.id,\r\n                    name: msg.name,\r\n                    img: msg.img_url,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    publicKey: msg.public_key\r\n                }]));\r\n            });\r\n            project.on('delete', (msg)=>{\r\n                console.log(\"delete project\");\r\n                console.log(msg);\r\n                dispatch(DeleteProject(msg.id));\r\n            });\r\n            project.on('rename', (msg)=>{\r\n                console.log(\"rename project\");\r\n                console.log(msg);\r\n                dispatch(RenameProject(\r\n                    msg.id, \r\n                    msg.name, \r\n                    msg.updated_at,\r\n                    msg.public_key\r\n                ));\r\n            });\r\n            project.on('img', (msg)=>{\r\n                console.log(\"change image of project\");\r\n                console.log(msg);\r\n                dispatch(ImgProject(\r\n                    msg.id, \r\n                    msg.img_url, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            project.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // entity socket listener\r\n            entity.on('add', (msg)=>{\r\n                console.log(\"add entity\");\r\n                console.log(msg);\r\n                dispatch(AddEntities([{\r\n                    id: msg.id,\r\n                    projectId:msg.project_id,\r\n                    name: msg.name,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at\r\n                }]));\r\n            });\r\n            entity.on('delete', (msg)=>{\r\n                console.log(\"delete entity\");\r\n                console.log(msg);\r\n                dispatch(DeleteEntities([msg.id]));\r\n            });\r\n            entity.on('rename', (msg)=>{\r\n                console.log(\"rename entity\");\r\n                console.log(msg);\r\n                dispatch(RenameEntity(\r\n                    msg.id,\r\n                    msg.name, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            entity.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // document socket listener\r\n            document.on('add', (msg)=>{\r\n                console.log(\"add document\");\r\n                console.log(msg);\r\n                dispatch(AddDocuments([{\r\n                    id: msg.id,\r\n                    entityId: msg.entity_id,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    data: msg.data\r\n                }]));\r\n            });\r\n            document.on('modify', (msg)=>{\r\n                console.log(\"modify document\");\r\n                console.log(msg);\r\n                dispatch(ModifyDocument(\r\n                    msg.id,\r\n                    msg.updated_at,\r\n                    msg.data\r\n                ));\r\n            });\r\n            document.on('delete', (msg)=>{\r\n                console.log(\"delete documents\");\r\n                console.log(msg);\r\n                dispatch(DeleteDocuments(msg.ids));\r\n            });\r\n\r\n            // storage socket listener\r\n            storage.on('upload', (msg)=>{\r\n                console.log(\"upload into storage\");\r\n                console.log(msg);\r\n                dispatch(UploadStorage(msg));\r\n            });\r\n            storage.on('rename', (msg)=>{\r\n                console.log(\"rename storage\");\r\n                console.log(msg);\r\n                dispatch(RenameStorage(msg.id, msg.name, msg.updated_at));\r\n            });\r\n            storage.on('public', (msg)=>{\r\n                console.log(\"toggle isPublic storage\");\r\n                console.log(msg);\r\n                dispatch(PublicStorage(msg.id, msg.isPublic, msg.updated_at));\r\n            });\r\n            storage.on('delete', (msg)=>{\r\n                console.log(\"delete storage\");\r\n                console.log(msg);\r\n                dispatch(DeleteStorage(msg.ids));\r\n            });\r\n        });\r\n\r\n        ws.on(\"close\", ()=>{\r\n                \r\n        });\r\n\r\n        ws.on(\"error\", (err)=>{\r\n            console.log(err);\r\n        });\r\n\r\n        ws.connect();\r\n\r\n        return ()=>{\r\n            ws.close();\r\n        }\r\n    }, []);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default WebsocketClient;","import React, {useEffect, lazy, Suspense} from 'react';\r\n\r\nimport {Route, Switch, Redirect} from 'react-router-dom';\r\n\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport SideBar from './components/SideBar';\r\nimport LoadingIndicator from './components/LoadingIndicator';\r\nimport {InitDatabase} from './redux/actions/projectActions';\r\nimport ContentContainer from './components/ContentContainer';\r\nimport WebsocketClient from './WebsocketClient';\r\nimport {NOT_AUTHORIZED, FIRST_BOOT, CREATOR} from './redux/actions/authorizationActions';\r\n\r\nconst Overview = lazy(()=>import('./components/Overview'));\r\nconst Project = lazy(()=>import('./components/Project'));\r\nconst Entity = lazy(()=>import('./components/Entity'));\r\nconst Document = lazy(()=>import('./components/Document'));\r\nconst Storage = lazy(()=>import('./components/Storage'));\r\nconst UserList = lazy(()=>import('./components/UserList'));\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n\t\tmarginTop: 65,\r\n\t\tpaddingTop: 15,\r\n\t\tpaddingBottom: 15,\r\n\t\tbackgroundColor: theme.palette.background.light.light,\r\n\t\toverflow: 'auto',\r\n\t\t...theme.responsive\r\n\t}\r\n}));\r\n\r\nfunction Admin(props) {\r\n\tconst style = useStyle();\r\n\tconst dispatch = useDispatch();\r\n\tconst _status = useSelector(state => state.authStatus);\r\n\r\n\tuseEffect(()=>{\r\n\t\tdispatch(InitDatabase());\r\n\t}, []);\r\n\r\n\tif(_status === FIRST_BOOT)\r\n\t\treturn <Redirect to='/signup'/>;\r\n\telse if(_status === NOT_AUTHORIZED)\r\n\t\treturn <Redirect to='/signin'/>;\r\n\telse return (\r\n\t\t<React.Fragment>\r\n\t\t\t<Header {...props}/>\r\n\t\t\t<SideBar/>\r\n\t\t\t\r\n\t\t\t<WebsocketClient/>\r\n\t\t\t<ContentContainer className={style.root}>\r\n\t\t\t\t<Suspense fallback={<LoadingIndicator/>}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t{_status === CREATOR ? <Route path='/userlist' component={UserList}/> : null}\r\n\t\t\t\t\t\t<Route path='/:project/:entity/:document' component={Document}/>\r\n\t\t\t\t\t\t<Route path='/:project/storage' component={Storage}/>\r\n\t\t\t\t\t\t<Route path='/:project/:entity' component={Entity}/>\r\n\t\t\t\t\t\t<Route path='/:project' component={Project}/>\r\n\t\t\t\t\t\t<Route path='/' component={Overview}/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Suspense>\r\n\t\t\t</ContentContainer>\r\n\t\r\n\t\t\t<Footer/>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nexport default Admin;"],"sourceRoot":""}