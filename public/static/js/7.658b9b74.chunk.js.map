{"version":3,"sources":["redux/actions/documentActions.js","redux/selectors/documentSelectors.js","redux/selectors/entitySelectors.js","redux/actions/storageActions.js","components/ContentContainer.js","redux/selectors/projectSelectors.js","redux/actions/projectActions.js","components/PopoverMenu.js","redux/actions/entityActions.js","redux/schemas/database.js","components/HeaderUserMenu.js","components/HeaderLink.js","components/Header.js","components/Footer.js","components/SideBarEntity.js","components/SideBarProject.js","components/SideBarContent.js","components/SideBar.js","WebsocketClient.js","Admin.js"],"names":["AddField","keys","fieldType","type","SetField","value","DeleteField","GenerateField","schema","data","arguments","length","undefined","AddDocuments","documents","DeleteDocuments","ids","ModifyDocument","id","updated","FetchDocuments","entityId","_ref","Object","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","res","normalized","wrap","_context","prev","next","Axios","get","concat","sent","normalizeDocuments","result","forEach","push","entities","_id","entity_id","created","created_at","updated_at","t0","console","log","stop","_x","apply","this","__webpack_require__","d","__webpack_exports__","selectDocument","selectDocumentsInEntity","selectDocumentsInEntityByName","selectCurrentDocumentType","selectCurrentDocumentData","selectCurrentDocumentKeys","selectCurrentDocumentValue","reselect__WEBPACK_IMPORTED_MODULE_0__","_entitySelectors__WEBPACK_IMPORTED_MODULE_1__","_selectDocuments","state","selectAllDocuments","values","createSelector","_","filter","name","selectEntityByName","select","entity","_selectCurrentDocument","currentDocument","current","constructor","Array","entries","map","key","selectEntitiesInProject","selectEntitiesInProjectByName","_projectSelectors__WEBPACK_IMPORTED_MODULE_1__","_selectEntities","selectAllEntities","projectId","selectProjectByName","project","find","FetchStorage","UploadStorage","path","files","FolderStorage","MoveStorage","targets","RenameStorage","new_name","DeleteStorage","paths","InitStoragePath","ForwardStoragePath","BackwardStoragePath","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core__WEBPACK_IMPORTED_MODULE_2__","ContentContainer","props","createElement","assign","minHeight","component","Container","maxWidth","children","selectAllProjects","_selectProjects","projects","SetProjectPopover","anchor","AddProjects","DeleteProject","getState","DeleteEntities","_x2","RenameProject","ImgProject","img","InitDatabase","_ref2","_callee2","_projects","_context2","normalizeProjects","img_url","publicKey","public_key","project_id","AddEntities","_x3","_material_ui_core__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core__WEBPACK_IMPORTED_MODULE_4__","Icon","IconComponent","PopoverMenu","menus","index","title","onClick","icon","RenameEntity","SetEntitySchema","normalizr__WEBPACK_IMPORTED_MODULE_0__","document","Entity","idAttribute","documentList","entityList","projectList","input","normalize","HeaderUserMenu","close","useDispatch","react_default","open","onClose","anchorEl","Settings","ExitToApp","AuthSignOut","HeaderLink","location","_useState","useState","_useState2","slicedToArray","params","setParams","useEffect","count","pathname","match","matchPath","exact","Fragment","react_router_dom","to","useStyle","makeStyles","theme","root","objectSpread","backgroundColor","palette","primary","light","responsive","link","& a","color","paddingLeft","spacing","paddingRight","fontSize","whiteSpace","overflow","textOverflow","hide","Header","style","sidebar","useSelector","setAnchor","AppBar","position","className","Toolbar","Hidden","mdUp","IconButton","aria-label","SwitchSideBar","edge","clsx","Menu","Box","display","flexGrow","container","Typography","variant","align","components_HeaderLink","aria-haspopup","e","currentTarget","AccountCircle","components_HeaderUserMenu","text","textAlign","lineHeight","Footer","SideBarEntity","projectName","ListItem","divider","ButtonBase","Link","ListItemText","btn","SideBarProject","useMemo","setOpen","_useState3","_useState4","openEntities","setOpenEntities","button","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","List","disablePadding","components_SideBarEntity","SideBarContent","components_SideBarProject","paper","main","sidebarPaper","direction","alignItems","padding","mixins","toolbar","justifyContent","SideBar","Drawer","classes","ModalProps","keepMounted","ChevronLeft","ChevronRight","Divider","components_SideBarContent","smDown","WebsocketClient","ws","Ws","on","subscribe","storage","msg","err","connect","Overview","lazy","then","bind","Project","Promise","all","Document","Storage","marginTop","paddingTop","paddingBottom","background","Admin","_status","authStatus","FIRST_BOOT","react_router","NOT_AUTHORIZED","components_Header","components_SideBar","src_WebsocketClient","react","fallback","components_Footer"],"mappings":"wYAGO,SAASA,EAASC,EAAMC,GAC3B,MAAO,CAACC,KAAM,YAAaF,KAAMA,EAAMC,UAAWA,GAG/C,SAASE,EAASH,EAAMI,GAC3B,MAAO,CAACF,KAAM,YAAaF,KAAMA,EAAMI,MAAOA,GAG3C,SAASC,EAAYL,GACxB,MAAO,CAACE,KAAM,eAAgBF,KAAMA,GAGjC,SAASM,EAAcC,GAC1B,MAAO,CAACL,KAAM,iBAAkBD,UAAWM,EAAQC,KADHC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,IAK1C,IAAMG,EAAe,SAAAC,GACxB,MAAO,CACHX,KAAM,gBACNW,UAAWA,IAKNC,EAAkB,SAAAC,GAC3B,MAAO,CAACb,KAAM,mBAAoBW,UAAWE,IAIpCC,EAAiB,SAACC,EAAIC,EAASV,GACxC,MAAO,CAACN,KAAM,kBAAmBe,GAAIA,EAAIC,QAASA,EAASV,KAAMA,IAGxDW,EAAiB,SAACC,GAAD,sBAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAc,SAAAC,EAAMC,GAAN,IAAAC,EAAAC,EAAAjB,EAAA,OAAAW,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAElBC,IAAMC,IAAN,YAAAC,OAAsBjB,IAFJ,OAE9BS,EAF8BG,EAAAM,KAG9BR,EAAaS,YAAmBV,EAAIrB,MACtCK,EAAY,GAChBiB,EAAWU,OAAOC,QAAQ,SAAArC,GACtBS,EAAU6B,KAAK,CACXzB,GAAIa,EAAWa,SAAS9B,UAAUT,GAAOwC,IACzCxB,SAAUU,EAAWa,SAAS9B,UAAUT,GAAOyC,UAC/CC,QAAShB,EAAWa,SAAS9B,UAAUT,GAAO2C,WAC9C7B,QAASY,EAAWa,SAAS9B,UAAUT,GAAO4C,WAC9CxC,KAAMsB,EAAWa,SAAS9B,UAAUT,GAAOI,SAInDoB,EAAS,CAAC1B,KAAM,oBAAqBkB,SAAUA,IAC/CQ,EAAShB,EAAaC,IAhBcmB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAiB,GAAAjB,EAAA,SAkBpCkB,QAAQC,IAARnB,EAAAiB,IAlBoC,yBAAAjB,EAAAoB,SAAAzB,EAAA,kBAAd,gBAAA0B,GAAA,OAAAhC,EAAAiC,MAAAC,KAAA9C,YAAA,sCCrC9B+C,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAAP,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAO,IAAA,IAAAC,EAAAV,EAAA,KAAAW,EAAAX,EAAA,KAGMY,EAAmB,SAAAC,GAAK,OAAIA,EAAMxD,WAE3B8C,EAAiB,SAACU,EAAOpD,GAAR,OAAemD,EAAiBC,GAAOpD,IACxDqD,EAAqB,SAAAD,GAAK,OAAI/C,OAAOiD,OAAOH,EAAiBC,KAC7DT,EAA0B,WACnC,OAAOY,YACHF,EACA,SAACG,EAAGxD,GAAJ,OAAWA,GACX,SAACJ,EAAWI,GACR,OAAOJ,EAAU6D,OAAO,SAAAtE,GAAK,OAAIA,EAAMgB,WAAaH,OAMnD4C,EAAgC,WACzC,OAAOW,YACHF,EACA,SAACD,EAAOM,GAEJ,OADeC,aACRC,CAAOR,EAAOM,IAEzB,SAAC9D,EAAWiE,GACR,MAAO,CACHA,OAAQA,EACRjE,UAAWA,EAAU6D,OAAO,SAAAtE,GAAK,OAAIA,EAAMgB,WAAa0D,EAAO7D,SAMzE8D,EAAyB,SAAAV,GAAK,OAAIA,EAAMW,iBACjClB,EAA4B,SAAAO,GAAK,OAAIU,EAAuBV,GAAOnE,MACnE6D,EAA4B,SAAAM,GAAK,OAAIU,EAAuBV,GAAO7D,MAEnEwD,EAA4B,WACrC,OAAOQ,YACHV,EACA,SAACW,GAAD,OAAAhE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAW,IACX,SAACwE,EAASjF,GAUN,OATAA,EAAKyC,QAAQ,SAACrC,GACP6E,EAAQC,cAAgB5D,OACvB2D,EAAUA,EAAQ7E,GACd6E,EAAQC,cAAgBC,QAC5BF,EAAUA,EAAQ,MAKvBA,EAAQC,cAAgB5D,OAChBA,OAAO8D,QAAQH,GAASI,IAAI,SAAAjF,GAAK,MAAI,CACxCkF,IAAKlF,EAAM,GACXF,KAAME,EAAM,GAAG8E,cAAgB5D,OACzB,SAAWlB,EAAM,GAAG8E,cAAgBC,MACpC,QAAS/E,EAAM,MAEpB6E,EAAQC,cAAgBC,MACtB,CACHG,IAAK,EACLpF,KAAM+E,EAAQ,GAAGC,cAAgB5D,OAC3B,SAAW2D,EAAQ,GAAGC,cAAgBC,MACtC,QAASF,EAAQ,SALzB,KAWLhB,EAA6B,WACtC,OAAOO,YACHT,EACA,SAACU,GAAD,OAAAhE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAW,IACX,SAACwE,EAASjF,GAKN,OAJAA,EAAKyC,QAAQ,SAACrC,GACP6E,EAAQ7E,KACP6E,EAAUA,EAAQ7E,MAEnB6E,uCC/EnBzB,EAAAC,EAAAC,EAAA,sBAAA6B,IAAA/B,EAAAC,EAAAC,EAAA,sBAAA8B,IAAAhC,EAAAC,EAAAC,EAAA,sBAAAkB,IAAA,IAAAV,EAAAV,EAAA,KAAAiC,EAAAjC,EAAA,KAIMkC,EAAkB,SAAArB,GAAK,OAAIA,EAAM1B,UAG1BgD,EAAoB,SAAAtB,GAAK,OAAI/C,OAAOiD,OAAOmB,EAAgBrB,KAC3DkB,EAA0B,WACnC,OAAOf,YACHmB,EACA,SAAClB,EAAGxD,GAAJ,OAAWA,GACX,SAAC0B,EAAU1B,GACP,OAAO0B,EAAS+B,OAAO,SAAAtE,GAAK,OAAIA,EAAMwF,YAAc3E,OAInDuE,EAAgC,WACzC,OAAOhB,YACHmB,EACA,SAACtB,EAAOM,GAEJ,OADekB,aACRhB,CAAOR,EAAOM,IAEzB,SAAChC,EAAUmD,GACP,MAAO,CACHA,QAASA,EACTnD,SAAUA,EAAS+B,OAAO,SAAAtE,GAAK,OAAIA,EAAMwF,YAAcE,EAAQ7E,SAKlE2D,EAAqB,WAC9B,OAAOJ,YACHmB,EACA,SAAClB,EAAGE,GAAJ,OAAaA,GACb,SAAChC,EAAUgC,GACP,OAAOhC,EAASoD,KAAK,SAAA3F,GAAK,OAAIA,EAAMuE,OAASA,8WChC5CqB,EAAe,SAACJ,GAAD,sBAAAvE,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAe,SAAAC,EAAMC,GAAN,IAAAC,EAAA,OAAAL,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEjBC,IAAMC,IAAN,WAAAC,OAAqBuD,IAFJ,OAE7B/D,EAF6BG,EAAAM,KAGnCV,EAAS,CAAC1B,KAAM,eAAgBe,GAAI2E,EAAWpF,KAAMqB,EAAIrB,OAHtBwB,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAiB,GAAAjB,EAAA,SAKnCkB,QAAQC,IAARnB,EAAAiB,IALmC,yBAAAjB,EAAAoB,SAAAzB,EAAA,iBAAf,gBAAA0B,GAAA,OAAAhC,EAAAiC,MAAAC,KAAA9C,YAAA,IAUfwF,EAAgB,SAAChF,EAAIiF,EAAMC,GACpC,MAAO,CACHjG,KAAM,iBACNe,GAAIA,EACJiF,KAAMA,EACNC,MAAOA,IAIFC,EAAgB,SAACnF,EAAIiF,GAC9B,MAAO,CACHhG,KAAM,iBACNe,GAAIA,EACJiF,KAAMA,IAIDG,EAAc,SAACpF,EAAIiF,EAAMI,GAClC,MAAO,CACHpG,KAAM,eACNe,GAAIA,EACJiF,KAAMA,EACNI,QAASA,IAIJC,EAAgB,SAACtF,EAAIiF,EAAMvB,EAAM6B,GAC1C,MAAO,CACHtG,KAAM,iBACNe,GAAIA,EACJiF,KAAMA,EACNvB,KAAMA,EACN6B,SAAUA,IAILC,EAAgB,SAACxF,EAAIyF,GAC9B,MAAO,CACHxG,KAAM,iBACNe,GAAIA,EACJyF,MAAOA,IAMR,SAASC,EAAgB1F,GAC5B,MAAO,CAACf,KAAM,oBAAqBe,GAAIA,GAGpC,SAAS2F,EAAmB1E,GAC/B,MAAO,CAAChC,KAAM,uBAAwBgC,KAAMA,GAGzC,SAAS2E,IACZ,MAAO,CAAC3G,KAAM,4DCtElB,IAAA4G,EAAAtD,EAAA,GAAAuD,EAAAvD,EAAAwD,EAAAF,GAAAG,EAAAzD,EAAA,KAAA0D,EAAA1D,EAAA,KAae2D,IAVf,SAA0BC,GACtB,OACIL,EAAAtF,EAAA4F,cAACJ,EAAA,EAAD3F,OAAAgG,OAAA,CAAKC,UAAU,QAAQC,UAAWC,IAAWC,SAAS,MAASN,GAEvDA,EAAMO,6CCPtBnE,EAAAC,EAAAC,EAAA,sBAAAkE,IAAApE,EAAAC,EAAAC,EAAA,sBAAAmC,IAAA,IAAA3B,EAAAV,EAAA,KAGMqE,EAAkB,SAAAxD,GAAK,OAAIA,EAAMyD,UAG1BF,EAAoB,SAAAvD,GAAK,OAAI/C,OAAOiD,OAAOsD,EAAgBxD,KAC3DwB,EAAsB,WAC/B,OAAOrB,YACHoD,EACA,SAACnD,EAAGE,GAAJ,OAAaA,GACb,SAACmD,EAAUnD,GACP,OAAOmD,EAAS/B,KAAK,SAAA3F,GAAK,OAAIA,EAAMuE,OAASA,2TCJlD,SAASoD,EAAkBC,GAC9B,MAAO,CAAC9H,KAAM,sBAAuB8H,OAAQA,GAI1C,IAAMC,EAAc,SAAAH,GACvB,MAAO,CACH5H,KAAM,eACN4H,SAAUA,IAILI,EAAgB,SAAAjH,GAAE,sBAAAI,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAI,SAAAC,EAAOC,EAAUuG,GAAjB,IAAAtD,EAAAlC,EAAA,OAAAnB,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIzB2C,EAASU,cACT5C,EAAWkC,EAAOsD,IAAYlH,GACpCW,EAASwG,YAAezF,EAAS0C,IAAI,SAAAjF,GAAK,OAAIA,EAAMa,OAGpDW,EAAS,CAAC1B,KAAM,iBAAkBe,GAAIA,IATP,wBAAAe,EAAAoB,SAAAzB,MAAJ,gBAAA0B,EAAAgF,GAAA,OAAAhH,EAAAiC,MAAAC,KAAA9C,YAAA,IAYlB6H,EAAgB,SAACrH,EAAI0D,EAAMzD,GACpC,MAAO,CACHhB,KAAM,iBACNe,GAAIA,EACJ0D,KAAMA,EACNzD,QAASA,IAIJqH,EAAa,SAACtH,EAAIuH,EAAKtH,GAChC,MAAO,CACHhB,KAAM,cACNe,GAAIA,EACJuH,IAAKA,EACLtH,QAASA,IAMJuH,EAAe,iCAAAC,EAAApH,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAM,SAAAiH,EAAM/G,GAAN,IAAAgH,EAAA9G,EAAAgG,EAAAnF,EAAA,OAAAnB,EAAAC,EAAAM,KAAA,SAAA8G,GAAA,cAAAA,EAAA5G,KAAA4G,EAAA3G,MAAA,cAAA2G,EAAA5G,KAAA,EAAA4G,EAAA3G,KAAA,EAUFC,IAAMC,IAAI,WAVR,OAUpBwG,EAVoBC,EAAAvG,KAWpBR,EAAagH,YAAkBF,EAAUpI,MAC3CsH,EAAW,GACXnF,EAAW,GACfb,EAAWU,OAAOC,QAAQ,SAAArC,GACtB0H,EAASpF,KAAK,CACVzB,GAAIa,EAAWa,SAASmF,SAAS1H,GAAOwC,IACxC+B,KAAM7C,EAAWa,SAASmF,SAAS1H,GAAOuE,KAC1C6D,IAAK1G,EAAWa,SAASmF,SAAS1H,GAAO2I,QACzCjG,QAAShB,EAAWa,SAASmF,SAAS1H,GAAO2C,WAC7C7B,QAASY,EAAWa,SAASmF,SAAS1H,GAAO4C,WAC7CgG,UAAWlH,EAAWa,SAASmF,SAAS1H,GAAO6I,aAEnDrH,EAASqG,EAAYH,IAErBhG,EAAWa,SAASmF,SAAS1H,GAAOuC,SAASF,QAAQ,SAAArC,GACjDuC,EAASD,KAAK,CACVzB,GAAIa,EAAWa,SAASA,SAASvC,GAAOwC,IACxCgD,UAAW9D,EAAWa,SAASA,SAASvC,GAAO8I,WAC/CvE,KAAM7C,EAAWa,SAASA,SAASvC,GAAOuE,KAC1C7B,QAAShB,EAAWa,SAASA,SAASvC,GAAO2C,WAC7C7B,QAASY,EAAWa,SAASA,SAASvC,GAAO4C,WAC7CzC,OAAQuB,EAAWa,SAASA,SAASvC,GAAOG,QAAU,SAIlEqB,EAASuH,YAAYxG,IAErBA,EAASF,QAAQ,SAAArC,GAAK,OAAIwB,EAAST,YAAef,EAAMa,OACxD6G,EAASrF,QAAQ,SAAArC,GAAK,OAAIwB,EAASoE,YAAa5F,EAAMa,OAvC5B4H,EAAA3G,KAAA,iBAAA2G,EAAA5G,KAAA,GAAA4G,EAAA5F,GAAA4F,EAAA,SAyC1B3F,QAAQC,IAAR0F,EAAA5F,IAzC0B,yBAAA4F,EAAAzF,SAAAuF,EAAA,kBAAN,gBAAAS,GAAA,OAAAV,EAAApF,MAAAC,KAAA9C,YAAA,sCCpD5B,IAAAqG,EAAAtD,EAAA,GAAAuD,EAAAvD,EAAAwD,EAAAF,GAAAG,EAAAzD,EAAA,KAAA0D,EAAA1D,EAAA,KAAA6F,EAAA7F,EAAA,KAAA8F,EAAA9F,EAAA,KAIA,SAAS+F,EAATlI,GAA8B,IAAfmI,EAAenI,EAAfmI,cACX,OAAIA,EAEAzC,EAAAtF,EAAA4F,cAACJ,EAAA,EAAD,KACIF,EAAAtF,EAAA4F,cAACmC,EAAD,OAHkB,KA2CfC,IAjCf,SAAqBrC,GAAM,IAChBsC,EAAStC,EAATsC,MAEP,OACI3C,EAAAtF,EAAA4F,cAACH,EAAA,EAASE,EAENsC,EAAMrE,IAAI,SAACjF,EAAOuJ,GACd,IAAMC,EAAQxJ,EAAMwJ,MAAQxJ,EAAMwJ,MAAQ,GACpCC,EAAUzJ,EAAMyJ,QAAUzJ,EAAMyJ,QAAU,aAEhD,OACI9C,EAAAtF,EAAA4F,cAACgC,EAAA,EAAD,CAAU/D,IAAKqE,EAAOE,QAASA,GAC3B9C,EAAAtF,EAAA4F,cAACkC,EAAD,CAAMC,cAAepJ,EAAM0J,OAC3B/C,EAAAtF,EAAA4F,cAACiC,EAAA,EAAD,KAAaM,yNCxBxBT,EAAc,SAAAxG,GACvB,MAAO,CACHzC,KAAM,eACNyC,SAAUA,IAKLyF,EAAiB,SAAArH,GAAG,sBAAAM,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAI,SAAAC,EAAOC,EAAUuG,GAAjB,IAAAtD,EAAAhE,EAAA,OAAAW,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAE3B2C,EAASjB,cACX/C,EAAY,GAChBE,EAAI0B,QAAQ,SAAArC,GACKyE,EAAOsD,IAAY/H,GAC3BqC,QAAQ,SAAArC,GAAK,OAAIS,EAAU6B,KAAKtC,EAAMa,QAG/CW,EAASd,YAAgBD,IACzBe,EAAS,CAAC1B,KAAM,kBAAmByC,SAAU5B,IAVZ,wBAAAiB,EAAAoB,SAAAzB,MAAJ,gBAAA0B,EAAAgF,GAAA,OAAAhH,EAAAiC,MAAAC,KAAA9C,YAAA,IAapBsJ,EAAe,SAAC9I,EAAI0D,EAAMzD,GACnC,MAAO,CACHhB,KAAM,gBACNe,GAAIA,EACJ0D,KAAMA,EACNzD,QAASA,IAIJ8I,EAAkB,SAAC/I,EAAIV,EAAQW,GACxC,MAAO,CACHhB,KAAM,oBACNe,GAAIA,EACJV,OAAQA,EACRW,QAASA,sCCvCjBsC,EAAAC,EAAAC,EAAA,sBAAAoF,IAAAtF,EAAAC,EAAAC,EAAA,sBAAAnB,IAAA,IAAA0H,EAAAzG,EAAA,KAEM0G,EAAW,IAAI3J,IAAO4J,OAAO,YAAa,GAAI,CAACC,YAAa,QAC5DC,EAAe,IAAI9J,IAAO4E,MAAM+E,GAEhCpF,EAAS,IAAIvE,IAAO4J,OAAO,WAAY,CACzCtJ,UAAWwJ,GACZ,CAACD,YAAa,QACXE,EAAa,IAAI/J,IAAO4E,MAAML,GAE9BgB,EAAU,IAAIvF,IAAO4J,OAAO,WAAY,CAC1CxH,SAAU2H,GACX,CAACF,YAAa,QACXG,EAAc,IAAIhK,IAAO4E,MAAMW,GAE9B,SAASgD,EAAkB0B,GAC9B,OAAOC,YAAUD,EAAOD,GAOrB,SAAShI,EAAmBiI,GAC/B,OAAOC,YAAUD,EAAOH,sOCWbK,MA5Bf,SAAwBtD,GAAM,IACnBY,EAAiBZ,EAAjBY,OAAQ2C,EAASvD,EAATuD,MACT/I,EAAWgJ,cAEjB,OACIC,EAAApJ,EAAA4F,cAACoC,EAAA,EAAD,CACIxI,GAAI+G,EAAS,OAAS,KACtB8C,OAAM9C,EACN+C,QAAS,kBAAMJ,KACfK,SAAUhD,EACV0B,MAAO,CACH,CACIE,MAAO,YACPE,KAAMmB,IACNpB,QAAS,cAIb,CACID,MAAO,WACPE,KAAMoB,IACNrB,QAAS,kBAAMjI,EAASuJ,6BC2B7BC,MApDf,SAAoBhE,GAAM,IACfiE,EAAYjE,EAAZiE,SADeC,EAEMC,mBAAS,IAFfC,EAAAlK,OAAAmK,EAAA,EAAAnK,CAAAgK,EAAA,GAEfI,EAFeF,EAAA,GAEPG,EAFOH,EAAA,GAItBI,oBAAU,WAGN,IAAMC,GAASR,EAASS,SAASC,MAAM,SAAS,IAAIrL,OACvC,IAAVmL,EACCF,EAAU,IACK,IAAVE,EACLF,EAAUK,YAAUX,EAASS,SAAU,CACnC5F,KAAM,YAAa+F,OAAO,IAC3BP,QACY,IAAVG,EACLF,EAAUK,YAAUX,EAASS,SAAU,CACnC5F,KAAM,oBAAqB+F,OAAO,IACnCP,QACY,IAAVG,GACLF,EAAUK,YAAUX,EAASS,SAAU,CACnC5F,KAAM,8BAA+B+F,OAAO,IAC7CP,SAER,CAACL,EAASS,WAvBS,IAyBfhG,EAA6B4F,EAA7B5F,QAAShB,EAAoB4G,EAApB5G,OAAQoF,EAAYwB,EAAZxB,SAExB,OACIW,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACIrB,EAAApJ,EAAA4F,cAAC8E,EAAA,EAAD,CAAMC,GAAG,KAAT,iBACCtG,EACG+E,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,SAEIrB,EAAApJ,EAAA4F,cAAC8E,EAAA,EAAD,CAAMC,GAAE,IAAA/J,OAAMyD,IAAd,IAA2BA,EAA3B,MACgB,KAEvBhB,EACG+F,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,SAEIrB,EAAApJ,EAAA4F,cAAC8E,EAAA,EAAD,CAAMC,GAAE,IAAA/J,OAAMyD,EAAN,KAAAzD,OAAiByC,IAAzB,IAAqCA,EAArC,MACgB,KAEvBoF,EACGW,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,SAEIrB,EAAApJ,EAAA4F,cAAC8E,EAAA,EAAD,CAAMC,GAAE,IAAA/J,OAAMyD,EAAN,KAAAzD,OAAiByC,EAAjB,KAAAzC,OAA2B6H,IAAnC,IAAiDA,EAAjD,MACgB,OCxC9BmC,EAAWC,YAAW,SAAAC,GAAK,MAAG,CAChCC,KAAKlL,OAAAmL,EAAA,EAAAnL,CAAA,CACDoL,gBAAiBH,EAAMI,QAAQC,QAAQC,OACpCN,EAAMO,YAEbC,KAAM,CACFC,MAAO,CACHC,MAAO,QACPC,YAAaX,EAAMY,QAAQ,KAC3BC,aAAcb,EAAMY,QAAQ,KAC5BE,SAAU,QAEdC,WAAY,SACZC,SAAU,SACVC,aAAc,YAElBC,KAAMlB,EAAMkB,QA8CDC,MA3Cf,SAAgBtG,GACZ,IAAMuG,EAAQtB,IACRzK,EAAWgJ,cACXgD,EAAUC,YAAY,SAAAxJ,GAAK,OAAIA,EAAMuJ,UAHzBtC,EAIUC,mBAAS,MAJnBC,EAAAlK,OAAAmK,EAAA,EAAAnK,CAAAgK,EAAA,GAIXtD,EAJWwD,EAAA,GAIHsC,EAJGtC,EAAA,GAMlB,OACIX,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACIrB,EAAApJ,EAAA4F,cAAC0G,EAAA,EAAD,CAAQC,SAAS,QAAQC,UAAWN,EAAMnB,MACtC3B,EAAApJ,EAAA4F,cAAC6G,EAAA,EAAD,KACIrD,EAAApJ,EAAA4F,cAAC8G,EAAA,EAAD,CAAQC,MAAI,GACRvD,EAAApJ,EAAA4F,cAACgH,EAAA,EAAD,CACIpB,MAAM,UACNqB,aAAW,cACXzE,QAAS,kBAAMjI,EAAS2M,aAAeX,KACvCY,KAAK,QACLP,UAAWQ,YAAKb,GAAWD,EAAMF,OAEjC5C,EAAApJ,EAAA4F,cAACqH,EAAA,EAAD,QAGR7D,EAAApJ,EAAA4F,cAACsH,EAAA,EAAD,CAAKC,QAAQ,OAAOC,SAAU,EAC1BC,UAAWC,IAAYC,QAAQ,KAAKC,MAAM,SAC1ChB,UAAWN,EAAMZ,MAEjBlC,EAAApJ,EAAA4F,cAAC6H,EAAe9H,IAEpByD,EAAApJ,EAAA4F,cAACgH,EAAA,EAAD,CACIG,KAAK,MACLF,aAAW,0BACXa,gBAAc,OACdlC,MAAM,UACNpD,QAAS,SAAAuF,GAAC,OAAItB,EAAUsB,EAAEC,iBAE1BxE,EAAApJ,EAAA4F,cAACiI,EAAA,EAAD,SAIZzE,EAAApJ,EAAA4F,cAACkI,EAAD,CAAgBvH,OAAQA,EAAQ2C,MAAO,kBAAImD,EAAU,WC/D3DzB,EAAWC,YAAW,SAAAC,GAAK,MAAK,CAClCC,KAAKlL,OAAAmL,EAAA,EAAAnL,CAAA,CACDoL,gBAAiB,WACdH,EAAMO,YAEb0C,KAAM,CACFvC,MAAO,QACPI,SAAU,OACVoC,UAAW,SACXC,WAAY,WAeLC,MAXf,WACI,IAAMhC,EAAQtB,IACd,OACIxB,EAAApJ,EAAA4F,cAAA,UAAQ4G,UAAWN,EAAMnB,MACrB3B,EAAApJ,EAAA4F,cAAC0H,EAAA,EAAD,CAAYC,QAAQ,KAAKf,UAAWN,EAAM6B,MAA1C,sIChBNnD,EAAWC,YAAW,CACxBE,KAAM,CACFqC,SAAU,KAsBHe,MAlBf,SAAuBxI,GACnB,IAAMuG,EAAQtB,IACP1H,EAAqByC,EAArBzC,KAAMkL,EAAezI,EAAfyI,YAEb,OACIhF,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACIrB,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUC,SAAO,GACblF,EAAApJ,EAAA4F,cAAC2I,EAAA,EAAD,CAAYxI,UAAWyI,IACnB7D,GAAE,IAAA/J,OAAMwN,EAAN,KAAAxN,OAAqBsC,GACvBsJ,UAAWN,EAAMnB,MAEjB3B,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAASjI,iBCZrC0H,EAAWC,YAAW,SAAAC,GAAK,MAAK,CAClCC,KAAM,CACFU,YAAaX,EAAMY,QAAQ,IAE/BM,KAAM,CACFmB,QAAS,QAEbuB,IAAK,CACDtB,SAAU,MAiEHuB,MA7Df,SAAwBhJ,GACpB,IAAMuG,EAAQtB,IACPpL,EAAYmG,EAAZnG,GAAI0D,EAAQyC,EAARzC,KACLE,EAASwL,kBAAQ9K,IAAwB,IACzC5C,EAAWkL,YAAY,SAAAxJ,GAAK,OAAIQ,EAAOR,EAAOpD,KAJ1BqK,EAKFC,oBAAS,GALPC,EAAAlK,OAAAmK,EAAA,EAAAnK,CAAAgK,EAAA,GAKnBR,EALmBU,EAAA,GAKb8E,EALa9E,EAAA,GAAA+E,EAMchF,oBAAS,GANvBiF,EAAAlP,OAAAmK,EAAA,EAAAnK,CAAAiP,EAAA,GAMnBE,EANmBD,EAAA,GAMLE,EANKF,EAAA,GAQ1B,OACI3F,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACIrB,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUa,QAAM,EAACZ,SAAO,EAAClG,QAAS,kBAAMyG,GAASxF,KAC7CD,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAASjI,IACtBmG,EAAOD,EAAApJ,EAAA4F,cAACuJ,EAAA,EAAD,MAAiB/F,EAAApJ,EAAA4F,cAACwJ,EAAA,EAAD,OAE7BhG,EAAApJ,EAAA4F,cAACyJ,EAAA,EAAD,CAAUC,GAAIjG,EAAMkG,QAAQ,OAAOC,eAAa,GAC5CpG,EAAApJ,EAAA4F,cAAC6J,EAAA,EAAD,CAAMjD,UAAWN,EAAMnB,KAAM2E,gBAAc,GACvCtG,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUa,QAAM,EAACnJ,UAAWyI,IAAM7D,GAAE,IAAA/J,OAAMsC,EAAN,mBAA6BoL,SAAO,GACpElF,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAAQ,oBAE1B/B,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUa,QAAM,EAACnJ,UAAWyI,IAAM7D,GAAE,IAAA/J,OAAMsC,EAAN,YAAsBoL,SAAO,GAC7DlF,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAAQ,aAE1B/B,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUC,SAAO,GACblF,EAAApJ,EAAA4F,cAAC2I,EAAA,EAAD,CAAYxI,UAAWyI,IACnB7D,GAAE,IAAA/J,OAAMsC,GACRsJ,UAAWN,EAAMwC,KAEjBtF,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAAQ,cAE1B/B,EAAApJ,EAAA4F,cAACgH,EAAA,EAAD,CACIpB,MAAM,UACNqB,aAAA,UAAAjM,OAAsBsC,EAAtB,aACAkF,QAAS,kBAAM6G,GAAiBD,IAChCjC,KAAK,MACLP,UAAWQ,YAAyB,IAApB9L,EAASjC,QAAgBiN,EAAMF,OAE9CgD,EAAe5F,EAAApJ,EAAA4F,cAACuJ,EAAA,EAAD,MAAiB/F,EAAApJ,EAAA4F,cAACwJ,EAAA,EAAD,QAIrClO,EAASjC,OAAS,EACdmK,EAAApJ,EAAA4F,cAACyJ,EAAA,EAAD,CAAUC,GAAIN,EAAcO,QAAQ,OAAOC,eAAa,GACpDpG,EAAApJ,EAAA4F,cAAC6J,EAAA,EAAD,CAAMjD,UAAWN,EAAMnB,KAAM2E,gBAAc,GAEnCxO,EAAS0C,IAAI,SAACjF,GACV,OAAOyK,EAAApJ,EAAA4F,cAAC+J,EAAD,CACH9L,IAAKlF,EAAMa,GACX0D,KAAMvE,EAAMuE,KACZkL,YAAalL,QAKnB,kBChD3B0M,MAnBf,SAAwBjK,GACpB,IAAMU,EAAW+F,YAAYjG,KAE7B,OACIiD,EAAApJ,EAAA4F,cAAC6J,EAAA,EAAD,KACIrG,EAAApJ,EAAA4F,cAACyI,EAAA,EAAD,CAAUa,QAAM,EAACnJ,UAAWyI,IAAM7D,GAAG,IAAI2D,SAAO,GAC5ClF,EAAApJ,EAAA4F,cAAC6I,EAAA,EAAD,CAActD,QAAQ,cAGtB9E,EAASzC,IAAI,SAACjF,GACV,OACIyK,EAAApJ,EAAA4F,cAACiK,EAAD,CAAgBrQ,GAAIb,EAAMa,GAAI0D,KAAMvE,EAAMuE,KAAMW,IAAKlF,EAAMa,SCX7EoL,EAAWC,YAAW,SAAAC,GAAK,MAAK,CAClCC,KAAMD,EAAMqB,QACZ2D,MAAMjQ,OAAAmL,EAAA,EAAAnL,CAAA,CACFoL,gBAAiBH,EAAMI,QAAQC,QAAQ4E,MACpCjF,EAAMkF,cAEbC,UAAWnF,EAAMmF,UACjBvB,IAAI7O,OAAAmL,EAAA,EAAAnL,CAAA,CACAsN,QAAS,OACT+C,WAAY,SACZC,QAAS,SACNrF,EAAMsF,OAAOC,QAJjB,CAKCC,eAAgB,gBA2CTC,MAvCf,SAAiB5K,GACb,IAAMuG,EAAQtB,IACRzK,EAAWgJ,cACXgD,EAAUC,YAAY,SAAAxJ,GAAK,OAAIA,EAAMuJ,UAE3C,OACI/C,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACIrB,EAAApJ,EAAA4F,cAAC8G,EAAA,EAAD,CAAQC,MAAI,GACRvD,EAAApJ,EAAA4F,cAAC4K,EAAA,EAAD,CACIhE,UAAWN,EAAMnB,KACjBwC,QAAQ,YACRhH,OAA4B,QAApB2F,EAAM+D,UAAsB,QAAU,OAC9C5G,KAAM8C,EACNsE,QAAS,CAACX,MAAO5D,EAAM4D,OACvBY,WAAY,CAACC,aAAa,IAE1BvH,EAAApJ,EAAA4F,cAAA,OAAK4G,UAAWN,EAAMwC,KAClBtF,EAAApJ,EAAA4F,cAACgH,EAAA,EAAD,CAAYxE,QAAS,kBAAMjI,EAAS2M,aAAeX,MAC1B,QAApBD,EAAM+D,UAAsB7G,EAAApJ,EAAA4F,cAACgL,EAAA,EAAD,MAAkBxH,EAAApJ,EAAA4F,cAACiL,EAAA,EAAD,QAGvDzH,EAAApJ,EAAA4F,cAACkL,EAAA,EAAD,MACA1H,EAAApJ,EAAA4F,cAACmL,EAAD,QAGR3H,EAAApJ,EAAA4F,cAAC8G,EAAA,EAAD,CAAQsE,QAAM,GACV5H,EAAApJ,EAAA4F,cAAC4K,EAAA,EAAD,CACIhE,UAAWN,EAAMnB,KACjB0F,QAAS,CAACX,MAAO5D,EAAM4D,OACvBvC,QAAQ,YACRlE,MAAI,GAEJD,EAAApJ,EAAA4F,cAACmL,EAAD,6ECsHLE,OArKf,SAAyBtL,GACrB,IAAMxF,EAAWgJ,cAiKpB,OA/JGgB,oBAAU,WACN,IAAM+G,EAA2EC,OAyJjF,OAvJAD,EAAGE,GAAG,OAAQ,WACV,IAAM/M,EAAU6M,EAAGG,UAAU,WACvBhO,EAAS6N,EAAGG,UAAU,UACtB5I,EAAWyI,EAAGG,UAAU,YACxBC,EAAUJ,EAAGG,UAAU,WAG7BhN,EAAQ+M,GAAG,MAAO,SAACG,GACf9P,QAAQC,IAAI,eACZD,QAAQC,IAAI6P,GACZpR,EAASqG,YAAY,CAAC,CAClBhH,GAAI+R,EAAIpQ,IACR+B,KAAMqO,EAAIrO,KACV6D,IAAKwK,EAAIjK,QACTjG,QAASkQ,EAAIjQ,WACb7B,QAAS8R,EAAIhQ,WACbgG,UAAWgK,EAAI/J,iBAGvBnD,EAAQ+M,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,kBACZD,QAAQC,IAAI6P,GACZpR,EAASsG,YAAc8K,EAAIpQ,QAE/BkD,EAAQ+M,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,kBACZD,QAAQC,IAAI6P,GACZpR,EAAS0G,YACL0K,EAAIpQ,IACJoQ,EAAIrO,KACJqO,EAAIhQ,eAGZ8C,EAAQ+M,GAAG,MAAO,SAACG,GACf9P,QAAQC,IAAI,2BACZD,QAAQC,IAAI6P,GACZpR,EAAS2G,YACLyK,EAAIpQ,IACJoQ,EAAIjK,QACJiK,EAAIhQ,eAGZ8C,EAAQ+M,GAAG,QAAS,SAACI,GACjB/P,QAAQC,IAAI8P,KAIhBnO,EAAO+N,GAAG,MAAO,SAACG,GACd9P,QAAQC,IAAI,cACZD,QAAQC,IAAI6P,GACZpR,EAASuH,aAAY,CAAC,CAClBlI,GAAI+R,EAAIpQ,IACRgD,UAAUoN,EAAI9J,WACdvE,KAAMqO,EAAIrO,KACV7B,QAASkQ,EAAIjQ,WACb7B,QAAS8R,EAAIhQ,WACbzC,OAAQyS,EAAIzS,aAGpBuE,EAAO+N,GAAG,SAAU,SAACG,GACjB9P,QAAQC,IAAI,iBACZD,QAAQC,IAAI6P,GACZpR,EAASwG,aAAe,CAAC4K,EAAIpQ,SAEjCkC,EAAO+N,GAAG,SAAU,SAACG,GACjB9P,QAAQC,IAAI,iBACZD,QAAQC,IAAI6P,GACZpR,EAASmI,aACLiJ,EAAIpQ,IACJoQ,EAAIrO,KACJqO,EAAIhQ,eAGZ8B,EAAO+N,GAAG,SAAU,SAACG,GACjB9P,QAAQC,IAAI,qBACZD,QAAQC,IAAI6P,GACZpR,EAASoI,aACLgJ,EAAIpQ,IACJoQ,EAAIzS,OACJyS,EAAIhQ,eAGZ8B,EAAO+N,GAAG,QAAS,SAACI,GAChB/P,QAAQC,IAAI8P,KAIhB/I,EAAS2I,GAAG,MAAO,SAACG,GAChB9P,QAAQC,IAAI,gBACZD,QAAQC,IAAI6P,GACZpR,EAAShB,aAAa,CAAC,CACnBK,GAAI+R,EAAIpQ,IACRxB,SAAU4R,EAAInQ,UACdC,QAASkQ,EAAIjQ,WACb7B,QAAS8R,EAAIhQ,WACbxC,KAAMwS,EAAIxS,WAGlB0J,EAAS2I,GAAG,SAAU,SAACG,GACnB9P,QAAQC,IAAI,mBACZD,QAAQC,IAAI6P,GACZpR,EAASZ,aACLgS,EAAIpQ,IACJoQ,EAAIhQ,WACJgQ,EAAIxS,SAGZ0J,EAAS2I,GAAG,SAAU,SAACG,GACnB9P,QAAQC,IAAI,oBACZD,QAAQC,IAAI6P,GACZpR,EAASd,aAAgBkS,EAAIjS,QAIjCgS,EAAQF,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,uBACZD,QAAQC,IAAI6P,GACZpR,EAASqE,aAAc+M,EAAIpQ,IAAKoQ,EAAI9M,KAAM8M,EAAI7M,UAElD4M,EAAQF,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,2BACZD,QAAQC,IAAI6P,GACZpR,EAASwE,aAAc4M,EAAIpQ,IAAKoQ,EAAI9M,SAExC6M,EAAQF,GAAG,OAAQ,SAACG,GAChB9P,QAAQC,IAAI,gBACZD,QAAQC,IAAI6P,GACZpR,EAASyE,aAAY2M,EAAIpQ,IAAKoQ,EAAI9M,KAAM8M,EAAI1M,YAEhDyM,EAAQF,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,kBACZD,QAAQC,IAAI6P,GACZpR,EAAS2E,aAAcyM,EAAIpQ,IAAKoQ,EAAI9M,KAAM8M,EAAIrO,KAAMqO,EAAIxM,aAE5DuM,EAAQF,GAAG,SAAU,SAACG,GAClB9P,QAAQC,IAAI,kBACZD,QAAQC,IAAI6P,GACZpR,EAAS6E,aAAcuM,EAAIpQ,IAAKoQ,EAAItM,YAI5CiM,EAAGE,GAAG,QAAS,cAIfF,EAAGE,GAAG,QAAS,SAACI,GACZ/P,QAAQC,IAAI8P,KAGhBN,EAAGO,UAEI,WACHP,EAAGhI,UAER,IAEC,MC9JFwI,GAAWC,eAAK,kBAAI5P,EAAA4L,EAAA,IAAAiE,KAAA7P,EAAA8P,KAAA,aACpBC,GAAUH,eAAK,kBAAII,QAAAC,IAAA,CAAAjQ,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,MAAAiE,KAAA7P,EAAA8P,KAAA,aACnBnJ,GAASiJ,eAAK,kBAAII,QAAAC,IAAA,CAAAjQ,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,MAAAiE,KAAA7P,EAAA8P,KAAA,aAClBI,GAAWN,eAAK,kBAAII,QAAAC,IAAA,CAAAjQ,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,IAAA5L,EAAA4L,EAAA,MAAAiE,KAAA7P,EAAA8P,KAAA,aACpBK,GAAUP,eAAK,kBAAII,QAAAC,IAAA,CAAAjQ,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,GAAA5L,EAAA4L,EAAA,MAAAiE,KAAA7P,EAAA8P,KAAA,aAEnBjH,GAAWC,YAAW,SAAAC,GAAK,MAAK,CAClCC,KAAKlL,OAAAmL,EAAA,EAAAnL,CAAA,CACPsS,UAAW,GACXC,WAAY,GACZC,cAAe,GACfpH,gBAAiBH,EAAMI,QAAQoH,WAAWlH,MAAMA,MAChDU,SAAU,QACPhB,EAAMO,eAyCIkH,UArCf,SAAe5M,GACd,IAAMuG,EAAQtB,KACRzK,EAAWgJ,cACXqJ,EAAUpG,YAAY,SAAAxJ,GAAK,OAAIA,EAAM6P,aAM3C,OAJAtI,oBAAU,WACThK,EAAS6G,gBACP,IAEAwL,IAAYE,IACPtJ,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAUhI,GAAG,YACb6H,IAAYI,IACZxJ,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAUhI,GAAG,YAEpBvB,EAAApJ,EAAA4F,cAACwD,EAAApJ,EAAMyK,SAAP,KACCrB,EAAApJ,EAAA4F,cAACiN,EAAWlN,GACZyD,EAAApJ,EAAA4F,cAACkN,EAAD,MAEA1J,EAAApJ,EAAA4F,cAACmN,GAAD,MACA3J,EAAApJ,EAAA4F,cAACF,EAAA,EAAD,CAAkB8G,UAAWN,EAAMnB,MAClC3B,EAAApJ,EAAA4F,cAACoN,EAAA,SAAD,CAAUC,SAAU7J,EAAApJ,EAAA4F,cAAA,aACnBwD,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,KACCvJ,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,8BAA8BsB,UAAWkM,KACrD7I,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,2BAA2BsB,UAAW,OAClDqD,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,oBAAoBsB,UAAWmM,KAC3C9I,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,oBAAoBsB,UAAW2C,KAC3CU,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,YAAYsB,UAAW+L,KACnC1I,EAAApJ,EAAA4F,cAAC+M,EAAA,EAAD,CAAOlO,KAAK,IAAIsB,UAAW2L,QAK9BtI,EAAApJ,EAAA4F,cAACsN,EAAD","file":"static/js/7.658b9b74.chunk.js","sourcesContent":["import {normalizeDocuments} from '../schemas/database';\r\nimport Axios from '../../Axios';\r\n\r\nexport function AddField(keys, fieldType){\r\n    return {type: \"ADD_FIELD\", keys: keys, fieldType: fieldType};\r\n}\r\n\r\nexport function SetField(keys, value){\r\n    return {type: \"SET_FIELD\", keys: keys, value: value};\r\n}\r\n\r\nexport function DeleteField(keys){\r\n    return {type: \"DELETE_FIELD\", keys: keys};\r\n}\r\n\r\nexport function GenerateField(schema, document = {}){\r\n    return {type: \"GENERATE_FIELD\", fieldType: schema, data: document};\r\n}\r\n\r\n// receive array of id, entityId, updated, created, data\r\nexport const AddDocuments = documents => {\r\n    return {\r\n        type: \"ADD_DOCUMENTS\", \r\n        documents: documents\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteDocuments = ids => {\r\n    return {type: \"DELETE_DOCUMENTS\", documents: ids};\r\n}\r\n\r\n// receive object id, updated, data\r\nexport const ModifyDocument = (id, updated, data) => {\r\n    return {type: \"MODIFY_DOCUMENT\", id: id, updated: updated, data: data};\r\n}\r\n\r\nexport const FetchDocuments = (entityId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`document/${entityId}`);\r\n        const normalized = normalizeDocuments(res.data);\r\n        let documents = [];\r\n        normalized.result.forEach(value =>{\r\n            documents.push({\r\n                id: normalized.entities.documents[value]._id,\r\n                entityId: normalized.entities.documents[value].entity_id,\r\n                created: normalized.entities.documents[value].created_at,\r\n                updated: normalized.entities.documents[value].updated_at,\r\n                data: normalized.entities.documents[value].data\r\n            });\r\n        });\r\n        \r\n        dispatch({type: 'SET_DOCUMENT_INIT', entityId: entityId});\r\n        dispatch(AddDocuments(documents));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import {createSelector} from 'reselect';\r\nimport {selectEntityByName} from './entitySelectors';\r\n\r\nconst _selectDocuments = state => state.documents;\r\nexport const selectDocumentIds = state => Object.keys(_selectDocuments(state));\r\nexport const selectDocument = (state, id) => _selectDocuments(state)[id];\r\nexport const selectAllDocuments = state => Object.values(_selectDocuments(state));\r\nexport const selectDocumentsInEntity = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (_, id) => id,\r\n        (documents, id)=>{\r\n            return documents.filter(value => value.entityId === id);\r\n        }\r\n    );\r\n};\r\n\r\n// if empty then return entity\r\nexport const selectDocumentsInEntityByName = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (state, name)=>{\r\n            const select = selectEntityByName();\r\n            return select(state, name);\r\n        },\r\n        (documents, entity)=>{\r\n            return {\r\n                entity: entity,\r\n                documents: documents.filter(value => value.entityId === entity.id)\r\n            };\r\n        }\r\n    );\r\n};\r\n\r\nconst _selectCurrentDocument = state => state.currentDocument;\r\nexport const selectCurrentDocumentType = state => _selectCurrentDocument(state).type;\r\nexport const selectCurrentDocumentData = state => _selectCurrentDocument(state).data;\r\n// return key with their type\r\nexport const selectCurrentDocumentKeys = ()=>{\r\n    return createSelector(\r\n        selectCurrentDocumentType,\r\n        (_, keys = []) => keys,\r\n        (current, keys)=>{\r\n            keys.forEach((value)=>{\r\n                if(current.constructor === Object)\r\n                    current = current[value];\r\n                else if(current.constructor === Array)\r\n                    current = current[0];\r\n            });\r\n            // check if current is object or array\r\n            // if array return index 0\r\n            // index 0 of array always contain type\r\n            if(current.constructor === Object){\r\n                return Object.entries(current).map(value =>({\r\n                    key: value[0],\r\n                    type: value[1].constructor === Object \r\n                        ? 'object' : value[1].constructor === Array\r\n                        ? 'array': value[1]\r\n                }));\r\n            }else if(current.constructor === Array){\r\n                return {\r\n                    key: 0,\r\n                    type: current[0].constructor === Object \r\n                        ? 'object' : current[0].constructor === Array\r\n                        ? 'array': current[0]\r\n                };\r\n            }\r\n        }\r\n    )\r\n};\r\nexport const selectCurrentDocumentValue = ()=>{\r\n    return createSelector(\r\n        selectCurrentDocumentData,\r\n        (_, keys = []) => keys,\r\n        (current, keys)=>{\r\n            keys.forEach((value)=>{\r\n                if(current[value])\r\n                    current = current[value];\r\n            });\r\n            return current;\r\n        }\r\n    )\r\n};","import {createSelector} from 'reselect';\r\nimport {selectProjectByName} from './projectSelectors';\r\n\r\n// entity selectors\r\nconst _selectEntities = state => state.entities;\r\nexport const selectEntityIds = state => Object.keys(_selectEntities(state));\r\nexport const selectEntity = (state, id) => _selectEntities(state)[id];\r\nexport const selectAllEntities = state => Object.values(_selectEntities(state));\r\nexport const selectEntitiesInProject = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (_, id) => id,\r\n        (entities, id)=>{\r\n            return entities.filter(value => value.projectId === id);\r\n        }\r\n    );\r\n};\r\nexport const selectEntitiesInProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (state, name) => {\r\n            const select = selectProjectByName();\r\n            return select(state, name);\r\n        },\r\n        (entities, project)=>{\r\n            return {\r\n                project: project,\r\n                entities: entities.filter(value => value.projectId === project.id)\r\n            };\r\n        }\r\n    );\r\n};\r\nexport const selectEntityByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (_, name) => name,\r\n        (entities, name)=>{\r\n            return entities.find(value => value.name === name);\r\n        }\r\n    );\r\n};","import Axios from '../../Axios';\r\n\r\n// actions for storage\r\n\r\n// get data from server containing storage list per project id\r\nexport const FetchStorage = (projectId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`storage/${projectId}`);\r\n        dispatch({type: \"INIT_STORAGE\", id: projectId, data: res.data});\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n\r\n// receive project id, path, files\r\nexport const UploadStorage = (id, path, files) => {\r\n    return {\r\n        type: \"UPLOAD_STORAGE\", \r\n        id: id,\r\n        path: path,\r\n        files: files\r\n    };\r\n}\r\n\r\nexport const FolderStorage = (id, path) => {\r\n    return {\r\n        type: \"FOLDER_STORAGE\", \r\n        id: id,\r\n        path: path\r\n    };\r\n}\r\n\r\nexport const MoveStorage = (id, path, targets) => {\r\n    return {\r\n        type: \"MOVE_STORAGE\", \r\n        id: id,\r\n        path: path,\r\n        targets: targets\r\n    };\r\n}\r\n\r\nexport const RenameStorage = (id, path, name, new_name) => {\r\n    return {\r\n        type: \"RENAME_STORAGE\", \r\n        id: id,\r\n        path: path,\r\n        name: name,\r\n        new_name: new_name\r\n    };\r\n}\r\n\r\nexport const DeleteStorage = (id, paths) => {\r\n    return {\r\n        type: \"DELETE_STORAGE\", \r\n        id: id,\r\n        paths: paths\r\n    };\r\n}\r\n\r\n// actions for storage path\r\n// receive project id\r\nexport function InitStoragePath(id){\r\n    return {type: \"INIT_STORAGE_PATH\", id: id};\r\n}\r\n\r\nexport function ForwardStoragePath(next){\r\n    return {type: \"FORWARD_STORAGE_PATH\", next: next};\r\n}\r\n\r\nexport function BackwardStoragePath(){\r\n    return {type: \"BACKWARD_STORAGE_PATH\"};\r\n}","import React from 'react';\r\nimport {Container, Box} from '@material-ui/core';\r\n\r\nfunction ContentContainer(props){\r\n    return(\r\n        <Box minHeight='100vh' component={Container} maxWidth=\"xl\" {...props}>\r\n            {\r\n                props.children\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ContentContainer;","import {createSelector} from 'reselect';\r\n\r\n// project selectors\r\nconst _selectProjects = state => state.projects;\r\nexport const selectProjectIds = state => Object.keys(_selectProjects(state));\r\nexport const selectProject = (state, id) => _selectProjects(state)[id];\r\nexport const selectAllProjects = state => Object.values(_selectProjects(state));\r\nexport const selectProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllProjects,\r\n        (_, name) => name,\r\n        (projects, name)=>{\r\n            return projects.find(value => value.name === name);\r\n        }\r\n    );\r\n};","import {DeleteEntities, AddEntities} from './entityActions';\r\nimport {FetchDocuments} from './documentActions';\r\nimport {FetchStorage} from './storageActions';\r\nimport {selectEntitiesInProject} from '../selectors/entitySelectors';\r\nimport Axios from '../../Axios';\r\nimport {normalizeProjects} from '../schemas/database';\r\n\r\n// UI Overview PopoverMenu\r\nexport function SetProjectPopover(anchor){\r\n    return {type: \"SET_PROJECT_POPOVER\", anchor: anchor};\r\n}\r\n\r\n// receive array of id, name, updated, created, publicKey\r\nexport const AddProjects = projects => {\r\n    return {\r\n        type: \"ADD_PROJECTS\", \r\n        projects: projects\r\n    };\r\n}\r\n\r\nexport const DeleteProject = id => async (dispatch, getState) => {\r\n    // must delete entities first before deleting project\r\n    // entities will search project indexes\r\n    // then project can delete it's indexes\r\n    const select = selectEntitiesInProject();\r\n    const entities = select(getState(), id);\r\n    dispatch(DeleteEntities(entities.map(value => value.id)));\r\n    \r\n    // delete project\r\n    dispatch({type: \"DELETE_PROJECT\", id: id});\r\n}\r\n\r\nexport const RenameProject = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_PROJECT\", \r\n        id: id, \r\n        name: name,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const ImgProject = (id, img, updated) => {\r\n    return {\r\n        type: \"IMG_PROJECT\", \r\n        id: id, \r\n        img: img,\r\n        updated: updated\r\n    };\r\n}\r\n\r\n// get data from server containing project with related entity\r\n// and dispatch multiple action from this function\r\nexport const InitDatabase = () => async dispatch => {\r\n    // normalized containing\\\r\n    /*\r\n        entities:\r\n            entities: object\r\n            projects: object\r\n        result: Array()\r\n            0: _id\r\n    */\r\n    try{\r\n        const _projects = await Axios.get('project');\r\n        const normalized = normalizeProjects(_projects.data);\r\n        let projects = [];\r\n        let entities = [];\r\n        normalized.result.forEach(value =>{\r\n            projects.push({\r\n                id: normalized.entities.projects[value]._id,\r\n                name: normalized.entities.projects[value].name,\r\n                img: normalized.entities.projects[value].img_url,\r\n                created: normalized.entities.projects[value].created_at,\r\n                updated: normalized.entities.projects[value].updated_at,\r\n                publicKey: normalized.entities.projects[value].public_key\r\n            });\r\n            dispatch(AddProjects(projects));\r\n\r\n            normalized.entities.projects[value].entities.forEach(value =>{\r\n                entities.push({\r\n                    id: normalized.entities.entities[value]._id,\r\n                    projectId: normalized.entities.entities[value].project_id,\r\n                    name: normalized.entities.entities[value].name,\r\n                    created: normalized.entities.entities[value].created_at,\r\n                    updated: normalized.entities.entities[value].updated_at,\r\n                    schema: normalized.entities.entities[value].schema || {}\r\n                });\r\n            });\r\n        });\r\n        dispatch(AddEntities(entities));\r\n\r\n        entities.forEach(value => dispatch(FetchDocuments(value.id)));\r\n        projects.forEach(value => dispatch(FetchStorage(value.id)));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import React from 'react';\r\nimport {Menu, MenuItem, ListItemIcon, Typography} from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Icon({IconComponent}){\r\n    if(!IconComponent) return null;\r\n    return(\r\n        <ListItemIcon>\r\n            <IconComponent/>\r\n        </ListItemIcon>\r\n    )\r\n}\r\n\r\n// menus is list consist of\r\n// {title: string, onClick: fn, icon: component}\r\nfunction PopoverMenu(props){\r\n    const {menus} = props;\r\n\r\n    return(\r\n        <Menu {...props}>\r\n        {\r\n            menus.map((value, index)=>{\r\n                const title = value.title ? value.title : '';\r\n                const onClick = value.onClick ? value.onClick : ()=>{};\r\n\r\n                return(\r\n                    <MenuItem key={index} onClick={onClick}>\r\n                        <Icon IconComponent={value.icon}/>\r\n                        <Typography>{title}</Typography>\r\n                    </MenuItem>\r\n                )\r\n            })\r\n        }\r\n        </Menu>\r\n    )\r\n}\r\n\r\nPopoverMenu.propTypes = {\r\n    menus: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            title: PropTypes.string.isRequired,\r\n            icon: PropTypes.elementType,\r\n            onClick: PropTypes.func.isRequired\r\n        }).isRequired\r\n    ).isRequired,\r\n    ...Menu.propTypes\r\n}\r\n\r\nexport default PopoverMenu;","import {DeleteDocuments} from './documentActions';\r\nimport {selectDocumentsInEntity} from '../selectors/documentSelectors';\r\n\r\n// receive array of id, projectId, name, updated, created\r\nexport const AddEntities = entities => {\r\n    return {\r\n        type: \"ADD_ENTITIES\", \r\n        entities: entities\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteEntities = ids => async (dispatch, getState) => {\r\n    // delete documents first then can safely delete entities\r\n    const select = selectDocumentsInEntity();\r\n    let documents = [];\r\n    ids.forEach(value => {\r\n        const temp = select(getState(), value);\r\n        temp.forEach(value => documents.push(value.id));\r\n    });\r\n\r\n    dispatch(DeleteDocuments(documents));\r\n    dispatch({type: \"DELETE_ENTITIES\", entities: ids});\r\n}\r\n\r\nexport const RenameEntity = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_ENTITY\", \r\n        id: id,\r\n        name: name,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const SetEntitySchema = (id, schema, updated) => {\r\n    return {\r\n        type: \"SET_ENTITY_SCHEMA\", \r\n        id: id,\r\n        schema: schema,\r\n        updated: updated\r\n    };\r\n}","import {schema, normalize} from 'normalizr';\r\n\r\nconst document = new schema.Entity('documents', {}, {idAttribute: '_id'});\r\nconst documentList = new schema.Array(document);\r\n\r\nconst entity = new schema.Entity('entities', {\r\n    documents: documentList\r\n}, {idAttribute: '_id'});\r\nconst entityList = new schema.Array(entity);\r\n\r\nconst project = new schema.Entity('projects', {\r\n    entities: entityList\r\n}, {idAttribute: '_id'});\r\nconst projectList = new schema.Array(project);\r\n\r\nexport function normalizeProjects(input){\r\n    return normalize(input, projectList);\r\n}\r\n\r\nexport function normalizeEntities(input){\r\n    return normalize(input, entityList);\r\n}\r\n\r\nexport function normalizeDocuments(input){\r\n    return normalize(input, documentList);\r\n}","import React from 'react';\r\nimport {ExitToApp, Settings} from '@material-ui/icons';\r\nimport PopoverMenu from './PopoverMenu';\r\n\r\nimport {useDispatch} from 'react-redux';\r\nimport {AuthSignOut} from '../redux/actions/authorizationActions';\r\n\r\nfunction HeaderUserMenu(props){\r\n    const {anchor, close} = props;\r\n    const dispatch = useDispatch();\r\n\r\n    return(\r\n        <PopoverMenu\r\n            id={anchor ? 'User' : null}\r\n            open={anchor ? true : false}\r\n            onClose={() => close()}\r\n            anchorEl={anchor}\r\n            menus={[\r\n                {\r\n                    title: \"User List\",\r\n                    icon: Settings,\r\n                    onClick: () => {\r\n                        \r\n                    }\r\n                },\r\n                {\r\n                    title: \"Sign Out\",\r\n                    icon: ExitToApp,\r\n                    onClick: () => dispatch(AuthSignOut())\r\n                }\r\n            ]}\r\n        />\r\n    );\r\n}\r\n\r\nexport default HeaderUserMenu;","import React, {useEffect, useState} from 'react';\r\nimport {Link, matchPath} from 'react-router-dom';\r\n\r\nfunction HeaderLink(props){\r\n    const {location} = props;\r\n    const [params, setParams] = useState({});\r\n    \r\n    useEffect(()=>{\r\n        // calculate how many strip in pathname\r\n        // then apply matchPath function conditionally\r\n        const count = (location.pathname.match(/\\/./g)||[]).length;\r\n        if(count === 0){\r\n            setParams({});\r\n        }else if(count === 1){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project\", exact: true\r\n            }).params);\r\n        }else if(count === 2){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity\", exact: true\r\n            }).params);\r\n        }else if(count === 3){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity/:document\", exact: true\r\n            }).params);\r\n        }\r\n    }, [location.pathname]);\r\n\r\n    const {project, entity, document} = params;\r\n    // from root => project => entity\r\n    return(\r\n        <React.Fragment>\r\n            <Link to='/'> StarfallCMS </Link>\r\n            {project ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}`}> {project} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {entity ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}`}> {entity} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {document ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}/${document}`}> {document} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default HeaderLink;","import React, {useState} from 'react';\r\nimport { Typography, AppBar, Toolbar, IconButton, Hidden, makeStyles, Box} from '@material-ui/core';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {Menu, AccountCircle} from '@material-ui/icons';\r\nimport clsx from 'clsx';\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport HeaderUserMenu from './HeaderUserMenu';\r\nimport HeaderLink from './HeaderLink';\r\n\r\nconst useStyle = makeStyles(theme=>({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.light,\r\n        ...theme.responsive\r\n    },\r\n    link: {\r\n        '& a': {\r\n            color: 'black',\r\n            paddingLeft: theme.spacing(0.35),\r\n            paddingRight: theme.spacing(0.35),\r\n            fontSize: '115%'\r\n        },\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    hide: theme.hide\r\n}));\r\n\r\nfunction Header(props){\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n    const [anchor, setAnchor] = useState(null);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <AppBar position=\"fixed\" className={style.root}>\r\n                <Toolbar>\r\n                    <Hidden mdUp>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label=\"Open drawer\"\r\n                            onClick={() => dispatch(SwitchSideBar(!sidebar))}\r\n                            edge=\"start\"\r\n                            className={clsx(sidebar && style.hide)}\r\n                        >\r\n                            <Menu />\r\n                        </IconButton>\r\n                    </Hidden>\r\n                    <Box display=\"flex\" flexGrow={1}\r\n                        container={Typography} variant=\"h6\" align=\"center\"\r\n                        className={style.link}\r\n                    >\r\n                        <HeaderLink {...props}/>\r\n                    </Box>\r\n                    <IconButton\r\n                        edge=\"end\"\r\n                        aria-label=\"Account of current user\"\r\n                        aria-haspopup=\"true\"\r\n                        color=\"inherit\"\r\n                        onClick={e => setAnchor(e.currentTarget)}\r\n                    >\r\n                        <AccountCircle />\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <HeaderUserMenu anchor={anchor} close={()=>setAnchor(null)}/>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Typography, makeStyles} from '@material-ui/core';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        backgroundColor: '#292D2E',\r\n        ...theme.responsive\r\n    },\r\n    text: {\r\n        color: 'white',\r\n        fontSize: '125%',\r\n        textAlign: 'center',\r\n        lineHeight: '50px'\r\n    }\r\n}));\r\n\r\nfunction Footer(){\r\n    const style = useStyle();\r\n    return(\r\n        <footer className={style.root}>\r\n            <Typography variant=\"h3\" className={style.text}>\r\n                Copyright Starfall Production\r\n            </Typography>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {ListItem, ListItemText, ButtonBase, makeStyles} from '@material-ui/core';\r\n\r\nconst useStyle = makeStyles({\r\n    root: {\r\n        flexGrow: 1\r\n    }\r\n});\r\n\r\nfunction SideBarEntity(props){\r\n    const style = useStyle();\r\n    const {name, projectName} = props;\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem divider>\r\n                <ButtonBase component={Link} \r\n                    to={`/${projectName}/${name}`}\r\n                    className={style.root}\r\n                >\r\n                    <ListItemText primary={name}/>\r\n                </ButtonBase>\r\n            </ListItem>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarEntity;","import React, {useState, useMemo} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {ListItem, ListItemText, List, Collapse, IconButton, makeStyles, ButtonBase} from '@material-ui/core';\r\nimport {ExpandLess, ExpandMore} from '@material-ui/icons';\r\nimport {useSelector} from 'react-redux';\r\nimport SideBarEntity from './SideBarEntity';\r\nimport clsx from 'clsx';\r\nimport {selectEntitiesInProject} from '../redux/selectors/entitySelectors';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(1)\r\n    },\r\n    hide: {\r\n        display: 'none'\r\n    },\r\n    btn: {\r\n        flexGrow: 1\r\n    }\r\n}));\r\n\r\nfunction SideBarProject(props){\r\n    const style = useStyle();\r\n    const {id, name} = props;\r\n    const select = useMemo(selectEntitiesInProject,[]);\r\n    const entities = useSelector(state => select(state, id));\r\n    const [open, setOpen] = useState(false);\r\n    const [openEntities, setOpenEntities] = useState(false);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem button divider onClick={() => setOpen(!open)}>\r\n                <ListItemText primary={name}/>\r\n                {open ? <ExpandLess /> : <ExpandMore />}\r\n            </ListItem>\r\n            <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n                <List className={style.root} disablePadding>\r\n                    <ListItem button component={Link} to={`/${name}/authentication`} divider>\r\n                        <ListItemText primary=\"Authentication\" />\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to={`/${name}/storage`} divider>\r\n                        <ListItemText primary=\"Storage\" />\r\n                    </ListItem>\r\n                    <ListItem divider>\r\n                        <ButtonBase component={Link} \r\n                            to={`/${name}`}\r\n                            className={style.btn}\r\n                        >\r\n                            <ListItemText primary=\"Entities\"/>\r\n                        </ButtonBase>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label={`Expand ${name} entities`}\r\n                            onClick={() => setOpenEntities(!openEntities)}\r\n                            edge=\"end\"\r\n                            className={clsx(entities.length === 0 && style.hide)}\r\n                        >\r\n                            {openEntities ? <ExpandLess /> : <ExpandMore />}\r\n                        </IconButton>\r\n                    </ListItem>\r\n                    {\r\n                        entities.length > 0 ? \r\n                            <Collapse in={openEntities} timeout=\"auto\" unmountOnExit>\r\n                                <List className={style.root} disablePadding>\r\n                                    {\r\n                                        entities.map((value) => {\r\n                                            return <SideBarEntity\r\n                                                key={value.id}\r\n                                                name={value.name}\r\n                                                projectName={name}\r\n                                            />\r\n                                        })\r\n                                    }\r\n                                </List>\r\n                            </Collapse> : null\r\n                    }\r\n                </List>\r\n            </Collapse>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarProject;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {List, ListItem, ListItemText} from '@material-ui/core';\r\nimport {useSelector} from 'react-redux';\r\nimport SideBarProject from './SideBarProject';\r\nimport {selectAllProjects} from '../redux/selectors/projectSelectors';\r\n\r\nfunction SideBarContent(props){\r\n    const projects = useSelector(selectAllProjects);\r\n\r\n    return(\r\n        <List>\r\n            <ListItem button component={Link} to=\"/\" divider>\r\n                <ListItemText primary=\"Overview\" />\r\n            </ListItem>\r\n            {\r\n                projects.map((value)=>{\r\n                    return(\r\n                        <SideBarProject id={value.id} name={value.name} key={value.id}/>\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\nexport default SideBarContent;","import React from 'react';\r\nimport {Drawer, IconButton, Divider, Hidden, makeStyles} from '@material-ui/core';\r\nimport {ChevronLeft, ChevronRight} from '@material-ui/icons';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport SideBarContent from './SideBarContent';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: theme.sidebar,\r\n    paper: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        ...theme.sidebarPaper\r\n    },\r\n    direction: theme.direction,\r\n    btn: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: '0 8px',\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end'\r\n    }\r\n}));\r\n\r\nfunction SideBar(props){\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <Hidden mdUp>\r\n                <Drawer\r\n                    className={style.root}\r\n                    variant=\"temporary\"\r\n                    anchor={style.direction === 'rtl' ? 'right' : 'left'}\r\n                    open={sidebar}\r\n                    classes={{paper: style.paper}}\r\n                    ModalProps={{keepMounted: true}}\r\n                >\r\n                    <div className={style.btn}>\r\n                        <IconButton onClick={() => dispatch(SwitchSideBar(!sidebar))}>\r\n                            {style.direction === 'ltr' ? <ChevronLeft /> : <ChevronRight />}\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden smDown>\r\n                <Drawer\r\n                    className={style.root}\r\n                    classes={{paper: style.paper}}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBar;","import {useEffect} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport Ws from '@adonisjs/websocket-client';\r\nimport {AddProjects, DeleteProject, RenameProject, ImgProject} from './redux/actions/projectActions';\r\nimport {AddEntities, DeleteEntities, RenameEntity, SetEntitySchema} from './redux/actions/entityActions';\r\nimport {AddDocuments, ModifyDocument, DeleteDocuments} from './redux/actions/documentActions';\r\nimport {UploadStorage, FolderStorage, RenameStorage, MoveStorage, DeleteStorage} from './redux/actions/storageActions';\r\n\r\nfunction WebsocketClient(props) {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        const ws = process.env.NODE_ENV === 'development' ? Ws('ws://localhost:3333/') : Ws();\r\n        \r\n        ws.on(\"open\", ()=>{\r\n            const project = ws.subscribe('project');\r\n            const entity = ws.subscribe('entity');\r\n            const document = ws.subscribe('document');\r\n            const storage = ws.subscribe('storage');\r\n            \r\n            // project socket listener\r\n            project.on('add', (msg)=>{\r\n                console.log(\"add project\");\r\n                console.log(msg);\r\n                dispatch(AddProjects([{\r\n                    id: msg._id,\r\n                    name: msg.name,\r\n                    img: msg.img_url,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    publicKey: msg.public_key\r\n                }]));\r\n            });\r\n            project.on('delete', (msg)=>{\r\n                console.log(\"delete project\");\r\n                console.log(msg);\r\n                dispatch(DeleteProject(msg._id));\r\n            });\r\n            project.on('rename', (msg)=>{\r\n                console.log(\"rename project\");\r\n                console.log(msg);\r\n                dispatch(RenameProject(\r\n                    msg._id, \r\n                    msg.name, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            project.on('img', (msg)=>{\r\n                console.log(\"change image of project\");\r\n                console.log(msg);\r\n                dispatch(ImgProject(\r\n                    msg._id, \r\n                    msg.img_url, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            project.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // entity socket listener\r\n            entity.on('add', (msg)=>{\r\n                console.log(\"add entity\");\r\n                console.log(msg);\r\n                dispatch(AddEntities([{\r\n                    id: msg._id,\r\n                    projectId:msg.project_id,\r\n                    name: msg.name,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    schema: msg.schema\r\n                }]));\r\n            });\r\n            entity.on('delete', (msg)=>{\r\n                console.log(\"delete entity\");\r\n                console.log(msg);\r\n                dispatch(DeleteEntities([msg._id]));\r\n            });\r\n            entity.on('rename', (msg)=>{\r\n                console.log(\"rename entity\");\r\n                console.log(msg);\r\n                dispatch(RenameEntity(\r\n                    msg._id,\r\n                    msg.name, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            entity.on('schema', (msg)=>{\r\n                console.log(\"set entity schema\");\r\n                console.log(msg);\r\n                dispatch(SetEntitySchema(\r\n                    msg._id,\r\n                    msg.schema, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            entity.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // document socket listener\r\n            document.on('add', (msg)=>{\r\n                console.log(\"add document\");\r\n                console.log(msg);\r\n                dispatch(AddDocuments([{\r\n                    id: msg._id,\r\n                    entityId: msg.entity_id,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    data: msg.data\r\n                }]));\r\n            });\r\n            document.on('modify', (msg)=>{\r\n                console.log(\"modify document\");\r\n                console.log(msg);\r\n                dispatch(ModifyDocument(\r\n                    msg._id,\r\n                    msg.updated_at,\r\n                    msg.data\r\n                ));\r\n            });\r\n            document.on('delete', (msg)=>{\r\n                console.log(\"delete documents\");\r\n                console.log(msg);\r\n                dispatch(DeleteDocuments(msg.ids));\r\n            });\r\n\r\n            // storage socket listener\r\n            storage.on('upload', (msg)=>{\r\n                console.log(\"upload into storage\");\r\n                console.log(msg);\r\n                dispatch(UploadStorage(msg._id, msg.path, msg.files));\r\n            });\r\n            storage.on('folder', (msg)=>{\r\n                console.log(\"new folder into storage\");\r\n                console.log(msg);\r\n                dispatch(FolderStorage(msg._id, msg.path));\r\n            });\r\n            storage.on('move', (msg)=>{\r\n                console.log(\"move storage\");\r\n                console.log(msg);\r\n                dispatch(MoveStorage(msg._id, msg.path, msg.targets));\r\n            });\r\n            storage.on('rename', (msg)=>{\r\n                console.log(\"rename storage\");\r\n                console.log(msg);\r\n                dispatch(RenameStorage(msg._id, msg.path, msg.name, msg.new_name));\r\n            });\r\n            storage.on('delete', (msg)=>{\r\n                console.log(\"delete storage\");\r\n                console.log(msg);\r\n                dispatch(DeleteStorage(msg._id, msg.paths));\r\n            });\r\n        });\r\n\r\n        ws.on(\"close\", ()=>{\r\n                \r\n        });\r\n\r\n        ws.on(\"error\", (err)=>{\r\n            console.log(err);\r\n        });\r\n\r\n        ws.connect();\r\n\r\n        return ()=>{\r\n            ws.close();\r\n        }\r\n    }, []);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default WebsocketClient;","import React, {useEffect, lazy, Suspense} from 'react';\r\nimport {Route, Switch, Redirect} from 'react-router-dom';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport SideBar from './components/SideBar';\r\nimport {InitDatabase} from './redux/actions/projectActions';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport ContentContainer from './components/ContentContainer';\r\nimport {makeStyles} from '@material-ui/core';\r\nimport WebsocketClient from './WebsocketClient';\r\nimport {NOT_AUTHORIZED, FIRST_BOOT} from './redux/actions/authorizationActions';\r\n\r\nconst Overview = lazy(()=>import('./components/Overview'));\r\nconst Project = lazy(()=>import('./components/Project'));\r\nconst Entity = lazy(()=>import('./components/Entity'));\r\nconst Document = lazy(()=>import('./components/Document'));\r\nconst Storage = lazy(()=>import('./components/Storage'));\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n\t\tmarginTop: 65,\r\n\t\tpaddingTop: 15,\r\n\t\tpaddingBottom: 15,\r\n\t\tbackgroundColor: theme.palette.background.light.light,\r\n\t\toverflow: 'auto',\r\n\t\t...theme.responsive\r\n\t}\r\n}));\r\n\r\nfunction Admin(props) {\r\n\tconst style = useStyle();\r\n\tconst dispatch = useDispatch();\r\n\tconst _status = useSelector(state => state.authStatus);\r\n\r\n\tuseEffect(()=>{\r\n\t\tdispatch(InitDatabase());\r\n\t}, []);\r\n\r\n\tif(_status === FIRST_BOOT)\r\n\t\treturn <Redirect to='/signup'/>;\r\n\telse if(_status === NOT_AUTHORIZED)\r\n\t\treturn <Redirect to='/signin'/>;\r\n\telse return (\r\n\t\t<React.Fragment>\r\n\t\t\t<Header {...props}/>\r\n\t\t\t<SideBar/>\r\n\t\t\t\r\n\t\t\t<WebsocketClient/>\r\n\t\t\t<ContentContainer className={style.root}>\r\n\t\t\t\t<Suspense fallback={<div></div>}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path='/:project/:entity/:document' component={Document}/>\r\n\t\t\t\t\t\t<Route path='/:project/authentication' component={null}/>\r\n\t\t\t\t\t\t<Route path='/:project/storage' component={Storage}/>\r\n\t\t\t\t\t\t<Route path='/:project/:entity' component={Entity}/>\r\n\t\t\t\t\t\t<Route path='/:project' component={Project}/>\r\n\t\t\t\t\t\t<Route path='/' component={Overview}/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Suspense>\r\n\t\t\t</ContentContainer>\r\n\t\r\n\t\t\t<Footer/>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nexport default Admin;"],"sourceRoot":""}