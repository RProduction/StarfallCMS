(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{138:function(t,n,e){"use strict";e.r(n);var r=e(68),a=e(0),u=e.n(a),c=e(36),i=e.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=e(48),f=e(33),l=e(35),s=e(89),d=e(92);function p(t,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return n.hasOwnProperty(r.type)?n[r.type](e,r):e}}var O=e(2);var E=p(-1,{SET_AUTHORIZATION_STATUS:function(t,n){return n.status}}),v=p({},{INIT_USERS:function(t,n){return Object(O.a)(t,function(t){var e=n.users,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var o=c.value;t[o.id]={id:o.id,username:o.username,isCreator:o.is_creator}}}catch(f){a=!0,u=f}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},DELETE_USER:function(t,n){return Object(O.a)(t,function(t){delete t[n.id]})}});var b=p(null,{SET_PROJECT_POPOVER:function(t,n){return n.anchor}}),m=p({},{ADD_PROJECTS:function(t,n){return Object(O.a)(t,function(t){var e=n.projects,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var o=c.value;t[o.id]={id:o.id,name:o.name,img:o.img,created:o.created,updated:o.updated,publicKey:o.publicKey}}}catch(f){a=!0,u=f}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},DELETE_PROJECT:function(t,n){return Object(O.a)(t,function(t){delete t[n.id]})},RENAME_PROJECT:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.name,a=n.updated,u=n.publicKey;t[e].name=r,t[e].updated=a,t[e].publicKey=u})},IMG_PROJECT:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.img,a=n.updated;t[e].img=r,t[e].updated=a})}}),_=p({},{ADD_ENTITIES:function(t,n){return Object(O.a)(t,function(t){var e=n.entities,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var o=c.value;t[o.id]={id:o.id,projectId:o.projectId,name:o.name,created:o.created,updated:o.updated}}}catch(f){a=!0,u=f}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},DELETE_ENTITIES:function(t,n){return Object(O.a)(t,function(t){var e=n.entities,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0)delete t[c.value]}catch(o){a=!0,u=o}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},RENAME_ENTITY:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.name,a=n.updated;t[e].name=r,t[e].updated=a})}}),y=p({},{ADD_DOCUMENTS:function(t,n){return Object(O.a)(t,function(t){var e=n.documents,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var o=c.value;t[o.id]=o}}catch(f){a=!0,u=f}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},DELETE_DOCUMENTS:function(t,n){return Object(O.a)(t,function(t){var e=n.documents,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0)delete t[c.value]}catch(o){a=!0,u=o}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})},MODIFY_DOCUMENT:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.updated,a=n.data;t[e].updated=r,t[e].data=a})}}),h=p({},{UPLOAD_STORAGE:function(t,n){return Object(O.a)(t,function(t){n.files.forEach(function(n){t[n.id]={id:n.id,project_id:n.project_id,name:n.name,size:n.size,isPublic:n.isPublic,created:n.created_at,modified:n.updated_at}})})},RENAME_STORAGE:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.name,a=n.updated;t[e].name=r,t[e].updated=a})},PUBLIC_STORAGE:function(t,n){return Object(O.a)(t,function(t){var e=n.id,r=n.isPublic,a=n.updated;t[e].isPublic=r,t[e].updated=a})},DELETE_STORAGE:function(t,n){return Object(O.a)(t,function(t){var e=n.ids,r=!0,a=!1,u=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0)delete t[c.value]}catch(o){a=!0,u=o}finally{try{r||null==i.return||i.return()}finally{if(a)throw u}}})}}),I=p({},{PUSH_FILE_UPLOAD:function(t,n){return Object(O.a)(t,function(t){var e=n.project,r=n.name,a=n.file;t[e]||(t[e]={});var u=t[e];u[r]||(u[r]={project:e,name:r,file:URL.createObjectURL(a),progress:0,status:"Waiting",cancel:null})})},INIT_FILE_UPLOAD:function(t,n){return Object(O.a)(t,function(t){var e=n.project,r=n.name,a=t[e];a[r]&&(a[r].status="Uploading")})},SET_FILE_UPLOAD:function(t,n){return Object(O.a)(t,function(t){var e=n.project,r=n.name,a=n.progress,u=t[e];u[r]&&a>u[r].progress&&(u[r].progress=a)})},FINISH_FILE_UPLOAD:function(t,n){return Object(O.a)(t,function(t){var e=n.project,r=n.name,a=t[e];a[r]&&(a[r].status="Finish")})},POP_FILE_UPLOAD:function(t,n){return Object(O.a)(t,function(t){var e=n.project,r=n.name,a=t[e];a[r]&&(URL.revokeObjectURL(a[r].file),delete a[r])})}}),j=e(64),T=e(19);var D=p(!1,{SWITCH_SIDEBAR:function(t,n){return n.status}}),A=p({},{SET_TARGET:function(t,n){return Object(O.a)(t,function(t){var e=n.data;Object.entries(e).forEach(function(n){var e=Object(j.a)(n,2),r=e[0],a=e[1];return t[r]=a})})}}),S=p(null,{SHOW_ADD_DIALOG:function(t,n){return T.a},SHOW_DELETE_DIALOG:function(t,n){return T.b},SHOW_RENAME_DIALOG:function(t,n){return T.f},SHOW_IMG_DIALOG:function(t,n){return T.e},HIDE_DIALOG:function(t,n){return null}}),L=p({title:"",content:""},{SHOW_NOTIFICATION_DIALOG:function(t,n){return Object(O.a)(t,function(t){var e=n.title,r=n.content;t.title=e,t.content=r})},HIDE_NOTIFICATION_DIALOG:function(t,n){return Object(O.a)(t,function(t){t.title="",t.content=""})}}),g=Object(d.a)({authStatus:E,users:v,projects:m,entities:_,documents:y,storage:h,dialog:S,notification:L,target:A,sidebar:D,projectPopover:b,fileUpload:I}),w=e(146),R=e(23),P=e(71),U=e(65),x=Object(a.lazy)(function(){return Promise.all([e.e(3),e.e(8),e.e(9)]).then(e.bind(null,711))}),G=Object(a.lazy)(function(){return Promise.all([e.e(0),e.e(1),e.e(3),e.e(14)]).then(e.bind(null,698))}),N=Object(a.lazy)(function(){return Promise.all([e.e(0),e.e(1),e.e(3),e.e(15)]).then(e.bind(null,706))});var k=function(){var t=Object(l.c)();return Object(a.useEffect)(function(){t(Object(U.e)())},[]),u.a.createElement(a.Suspense,{fallback:u.a.createElement(P.a,null)},u.a.createElement(w.a,null),u.a.createElement(R.d,null,u.a.createElement(R.b,{path:"/signin",component:G}),u.a.createElement(R.b,{path:"/signup",component:N}),u.a.createElement(R.b,{path:"/",component:x})))},C=e(85),H=e.n(C),F=e(91),W=e.n(F),M=Object(f.d)(g,Object(f.a)(s.a)),J=H()({sidebar:{width:300,flexShrink:0},sidebarPaper:{width:300},responsive:{},hide:{display:"none"},palette:{primary:{main:"#a6e0ed"},secondary:{main:"#56db96"},error:{main:"#c91448"},background:{dark:{light:"#555954",main:"#444743",dark:"#2c2e2c"},light:{light:"#f5f5f5",main:"#ededed",dark:"#e6e6e6"}},tonalOffset:.2,contrastThreshold:3}});J.responsive=Object(r.a)({},J.breakpoints.up("md"),{marginLeft:300,width:"calc(100% - ".concat(300,"px)")}),i.a.render(u.a.createElement(W.a,{theme:J},u.a.createElement(l.a,{store:M},u.a.createElement(o.a,null,u.a.createElement(k,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},19:function(t,n,e){"use strict";function r(t){return{type:"SWITCH_SIDEBAR",status:t}}function a(t,n){return{type:"SHOW_NOTIFICATION_DIALOG",title:t,content:n}}function u(){return{type:"HIDE_NOTIFICATION_DIALOG"}}e.d(n,"l",function(){return r}),e.d(n,"j",function(){return a}),e.d(n,"d",function(){return u}),e.d(n,"a",function(){return c}),e.d(n,"b",function(){return i}),e.d(n,"f",function(){return o}),e.d(n,"e",function(){return f}),e.d(n,"h",function(){return l}),e.d(n,"i",function(){return s}),e.d(n,"k",function(){return d}),e.d(n,"c",function(){return p}),e.d(n,"g",function(){return O});var c="ADD_DIALOG",i="DELETE_DIALOG",o="RENAME_DIALOG",f="IMG_DIALOG";function l(){return{type:"SHOW_ADD_DIALOG"}}function s(){return{type:"SHOW_DELETE_DIALOG"}}function d(){return{type:"SHOW_RENAME_DIALOG"}}function p(){return{type:"HIDE_DIALOG"}}function O(t){return{type:"SET_TARGET",data:t}}},27:function(t,n,e){"use strict";e.d(n,"a",function(){return u});var r=e(59),a=e.n(r),u=a.a.CancelToken;n.b=a.a.create({baseURL:"/",responseType:"json",headers:{"Content-Type":"application/json"},withCredentials:!0})},65:function(t,n,e){"use strict";e.d(n,"g",function(){return o}),e.d(n,"i",function(){return f}),e.d(n,"d",function(){return l}),e.d(n,"j",function(){return s}),e.d(n,"e",function(){return d}),e.d(n,"a",function(){return p}),e.d(n,"c",function(){return O}),e.d(n,"b",function(){return E}),e.d(n,"h",function(){return v}),e.d(n,"f",function(){return b});var r=e(15),a=e.n(r),u=e(26),c=e(27),i=e(19),o=0,f=-1,l=1,s=2,d=function(){return function(){var t=Object(u.a)(a.a.mark(function t(n){var e,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.b.get("user/status");case 3:e=t.sent,r=e.data,n({type:"SET_AUTHORIZATION_STATUS",status:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(n){return t.apply(this,arguments)}}()},p=function(t,n){return function(){var e=Object(u.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.b.post("user/signin",{username:t,password:n});case 3:r(d()),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),r(Object(i.j)("Sign In","Fail to sign in")),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},O=function(t,n){return function(){var e=Object(u.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.b.post("user",{username:t,password:n});case 3:r(d()),e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),r(Object(i.j)("Sign Up","Fail to sign up")),console.log(e.t0),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},E=function(){return function(){var t=Object(u.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.b.post("user/signout");case 3:n(d()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(n){return t.apply(this,arguments)}}()},v=function(){return function(){var t=Object(u.a)(a.a.mark(function t(n){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.b.get("user");case 3:e=t.sent,n({type:"INIT_USERS",users:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(n){return t.apply(this,arguments)}}()};function b(t){return{type:"DELETE_USER",id:t}}},71:function(t,n,e){"use strict";var r=e(0),a=e.n(r),u=e(139),c=e(95);n.a=function(t){return a.a.createElement(u.a,{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},a.a.createElement(c.a,{size:60,thickness:5}))}},97:function(t,n,e){t.exports=e(138)}},[[97,6,7]]]);
//# sourceMappingURL=main.eb943d20.chunk.js.map