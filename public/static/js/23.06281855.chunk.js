(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{145:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(350),o=t(225),i=t(351),m=t(226),l=t(159),u=t(151),s=t(181),d=t(362),p=t(157);var f=function(e){var n=e.request,t=e.btn,a=e.category,c=e.values,o=c.name,i=c.newName,m=c.confirmName,l=e.errors,u=e.touched,f=e.handleChange,g=e.isValid,b=e.setFieldTouched,j=function(e,n){n.persist(),f(n),b(e,!0,!1)};return r.a.createElement(s.a,{container:!0,component:"form",spacing:1,onSubmit:function(e){e.preventDefault(),n({name:o,newName:i,confirmName:m})}},"add"===a?r.a.createElement(s.a,{component:d.a,item:!0,xs:12,id:"name",name:"name",label:"Name",onChange:j.bind(null,"name"),value:o,helperText:u.name?l.name:"",error:u.name&&Boolean(l.name)}):"delete"===a?r.a.createElement(s.a,{component:d.a,item:!0,xs:12,id:"confirmName",name:"confirmName",label:"Confirm Name",onChange:j.bind(null,"confirmName"),value:m,helperText:u.confirmName?l.confirmName:"",error:u.confirmName&&Boolean(l.confirmName)}):"rename"===a?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{component:d.a,item:!0,xs:12,id:"newName",name:"newName",label:"New Name",onChange:j.bind(null,"newName"),value:i,helperText:u.newName?l.newName:"",error:u.newName&&Boolean(l.newName)}),r.a.createElement(s.a,{component:d.a,item:!0,xs:12,id:"confirmName",name:"confirmName",label:"Confirm Name",onChange:j.bind(null,"confirmName"),value:m,helperText:u.confirmName?l.confirmName:"",error:u.confirmName&&Boolean(l.confirmName)})):null,r.a.createElement(s.a,{item:!0,xs:12,component:p.a,type:"submit",disabled:!g,size:"large"},t))},g=u.object({name:u.string().required("enter name").matches(/^[a-zA-Z0-9_]+$/,{message:"input letters, numbers, and underscore only",excludeEmptyString:!0}).min(1,"name too short").max(50,"name too long")}),b=u.object({name:u.string(),confirmName:u.string().required("re-enter name").matches(/^[a-z0-9_]*$/i,{message:"input letters, numbers, and underscore only",excludeEmptyString:!0}).oneOf([u.ref("name")],"Confirm Name does not match")}),j=u.object({name:u.string(),confirmName:u.string().required("re-enter name").oneOf([u.ref("name")],"Confirm Name does not match"),newName:u.string().required("enter new name").matches(/^[a-zA-Z0-9_]+$/,{message:"input letters, numbers, and underscore only",excludeEmptyString:!0}).min(1,"new name too short").max(50,"new name too long")}),E={name:""},N=function(e){return{name:e,confirmName:""}},h=function(e){return{name:e,confirmName:"",newName:""}};n.default=function(e){var n=e.title,t=e.content,a=e.targetName,u=e.category,s=e.dialogProps;return r.a.createElement(c.a,s,r.a.createElement(o.a,{id:"dialog-title"},n),r.a.createElement(i.a,null,"add"===u||"delete"===u||"rename"===u?r.a.createElement(r.a.Fragment,null,"delete"===u?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,t),r.a.createElement(m.a,null,"Please type in the name of the target to confirm")):null,r.a.createElement(l.a,{validationSchema:"add"===u?g:"rename"===u?j:"delete"===u?b:{},initialValues:"add"===u?E:"rename"===u?h(a):"delete"===u?N(a):{},render:function(n){return r.a.createElement(f,Object.assign({},e,n))}})):"notification"===u?r.a.createElement(m.a,null,t):null))}},688:function(e,n,t){"use strict";t.r(n);var a=t(35),r=t.n(a),c=t(40),o=t(0),i=t.n(o),m=t(21),l=t(680),u=t(681),s=t(191),d=t(22),p=t(200),f=t(610),g=t(679),b=t(611),j=t(267);var E=function(e){var n=Object(m.c)(),t=Object(m.d)(function(e){return e.projectPopover});return i.a.createElement(j.a,{id:t?"Project Menu":null,open:!!t,onClose:function(){return n(Object(p.f)(null))},anchorEl:t,menus:[{title:"Rename",icon:f.a,onClick:function(){n(Object(p.f)(null)),n(Object(d.l)())}},{title:"Change Image",icon:g.a,onClick:function(){n(Object(p.f)(null)),n(Object(d.j)())}},{title:"Delete",icon:b.a,onClick:function(){n(Object(p.f)(null)),n(Object(d.i)())}}]})},N=t(145),h=t(124),O=t(25),w=t(181),v=t(362),x=t(157),C=t(350),y=t(225),P=t(351),k=t(41),F=10485760,S=["image/jpg","image/jpeg","image/png"];function T(e){var n=e.imgRequest,t=e.imgCategory,a=e.onSucceed,m=e.onFail,l=Object(o.useState)(),u=Object(O.a)(l,2),s=u[0],d=u[1],p=Object(o.useState)(),f=Object(O.a)(p,2),g=f[0],b=f[1];function j(){return(j=Object(c.a)(r.a.mark(function e(){var t,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("img",s,s.name.split(/(\\|\/)/g).pop()),e.next=5,k.a.post(n,t,{"Content-Type":"multipart/form-data"});case 5:c=e.sent,a(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}return Object(o.useEffect)(function(){s&&s.size>=F?b("File too large"):s&&!S.includes(s.type)?b("Unsupported Format"):s&&!S.includes(s.type)&&s.size>=F?b("Unsupported Format and File too large"):s?b():b("Upload Image")},[s]),i.a.createElement(w.a,{container:!0,component:"form",spacing:1,onSubmit:function(e){e.preventDefault(),function(){j.apply(this,arguments)}()}},i.a.createElement(w.a,{item:!0,component:v.a,xs:12,id:"img",name:"img",label:"Image",onChange:function(e){return d(e.target.files[0])},files:[s],type:"file",helperText:g,error:Boolean(g)}),i.a.createElement(w.a,{item:!0,xs:12,component:x.a,type:"submit",disabled:Boolean(g),size:"large"},"Change ".concat(t," Image")))}var R=function(e){var n=e.imgCategory,t=e.dialogProps,a=Object(h.a)(e,["imgCategory","dialogProps"]);return i.a.createElement(C.a,t,i.a.createElement(y.a,{id:"dialog-img-title"},"Change ".concat(n," Image")),i.a.createElement(P.a,null,i.a.createElement(T,Object.assign({imgCategory:n},a,e))))},q=i.a.forwardRef(function(e,n){return i.a.createElement(l.a,Object.assign({},e,{innerRef:n,color:"secondary"}))});n.default=function(e){var n=Object(m.c)(),t=Object(m.d)(function(e){return e.target}),a=Object(m.d)(function(e){return e.dialog}),o=Object(m.d)(function(e){return e.notification});return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.default,{dialogProps:{open:a===d.a,onClose:function(){return n(Object(d.c)())}},category:"add",title:"Add New Project",btn:"Add New Project",request:function(){var e=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,e.prev=1,e.next=4,k.a.post("project",{name:a});case 4:n(Object(d.c)()),n(Object(d.k)("Add New Project ".concat(a),"Succeed adding new project ".concat(a))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(Object(d.c)()),n(Object(d.k)("Add New Project ".concat(a),"Fail adding new project ".concat(a,", error: ").concat(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(n){return e.apply(this,arguments)}}()}),i.a.createElement(N.default,{dialogProps:{open:a===d.b,onClose:function(){return n(Object(d.c)())}},category:"delete",title:'PERMANENTLY DELETE "'.concat(t.name,'"'),btn:'PERMANENTLY DELETE "'.concat(t.name,'"'),content:'This action will PERMANENTLY DELETE "'.concat(t.name,'". Proceed with caution!'),targetName:t.name,request:function(){var e=Object(c.a)(r.a.mark(function e(a){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.name,e.prev=1,e.next=4,k.a.delete("project/".concat(t.id));case 4:n(Object(d.c)()),n(Object(d.k)("Delete Project ".concat(c),"Succeed deleting project ".concat(c))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(Object(d.c)()),n(Object(d.k)("Delete Project ".concat(c),"Fail deleting project ".concat(c,", error: ").concat(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(n){return e.apply(this,arguments)}}()}),i.a.createElement(N.default,{dialogProps:{open:a===d.f,onClose:function(){return n(Object(d.c)())}},category:"rename",title:'Rename "'.concat(t.name,'"'),btn:'Rename "'.concat(t.name,'"'),targetName:t.name,request:function(){var e=Object(c.a)(r.a.mark(function e(a){var c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.name,o=a.newName,e.prev=1,e.next=4,k.a.post("project/".concat(t.id,"/rename"),{name:o});case 4:n(Object(d.c)()),n(Object(d.k)("Rename Project ".concat(c),"Succeed renaming project ".concat(c," into ").concat(o))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(Object(d.c)()),n(Object(d.k)("Rename Project ".concat(c),"Fail renaming project ".concat(c," into ").concat(o,", error: ").concat(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(n){return e.apply(this,arguments)}}()}),i.a.createElement(R,{dialogProps:{open:a===d.e,onClose:function(){return n(Object(d.c)())}},imgCategory:"Project",imgRequest:"project/".concat(t.id,"/img"),onSucceed:function(e){n(Object(d.c)()),n(Object(d.k)("Change Project Image","Succeed changing project image"))},onFail:function(e){n(Object(d.c)()),n(Object(d.k)("Change Project Image","Fail changing project image, error: ".concat(e)))}}),i.a.createElement(N.default,{category:"notification",title:o.title,content:o.content,dialogProps:{open:""!==o.title&&""!==o.content,onClose:function(){return n(Object(d.d)())}}}),i.a.createElement(E,null),i.a.createElement(u.a,{component:q,position:"fixed",bottom:30,right:30,zIndex:50,onClick:function(){return n(Object(d.h)())}},i.a.createElement(s.a,null)))}}}]);
//# sourceMappingURL=23.06281855.chunk.js.map