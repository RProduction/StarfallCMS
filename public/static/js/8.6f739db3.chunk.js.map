{"version":3,"sources":["redux/selectors/entitySelectors.js","components/ContentContainer.js","redux/selectors/projectSelectors.js","redux/actions/projectActions.js","redux/actions/documentActions.js","redux/selectors/documentSelectors.js","redux/actions/entityActions.js","redux/schemas/database.js","redux/actions/storageActions.js","components/HeaderLink.js","components/Header.js","components/Footer.js","components/SideBarEntity.js","components/SideBarProject.js","components/SideBarContent.js","components/SideBar.js","WebsocketClient.js","Admin.js"],"names":["__webpack_require__","d","__webpack_exports__","selectEntitiesInProject","selectEntitiesInProjectByName","selectEntityInProjectByName","reselect__WEBPACK_IMPORTED_MODULE_0__","_projectSelectors__WEBPACK_IMPORTED_MODULE_1__","_selectEntities","state","entities","selectAllEntities","Object","values","createSelector","_","id","filter","value","projectId","name","selectProjectByName","select","project","__","find","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Container__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_2__","ContentContainer","props","a","createElement","assign","minHeight","component","Container","maxWidth","children","selectAllProjects","_selectProjects","projects","SetProjectPopover","anchor","type","AddProjects","DeleteProject","_ref","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_Client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","dispatch","getState","wrap","_context","prev","next","DeleteEntities","map","stop","_x","_x2","apply","this","arguments","RenameProject","updated","publicKey","ImgProject","img","InitDatabase","_ref2","_callee2","_projects","normalized","_context2","Axios","get","sent","normalizeProjects","data","result","forEach","push","img_url","created","created_at","updated_at","public_key","project_id","AddEntities","FetchDocuments","FetchStorage","t0","console","log","_x3","AddDocuments","documents","DeleteDocuments","ids","ModifyDocument","entityId","res","concat","normalizeDocuments","entity_id","selectDocument","selectDocumentsInEntity","selectDocumentsInEntityByName","_entitySelectors__WEBPACK_IMPORTED_MODULE_1__","_selectDocuments","selectAllDocuments","entity","RenameEntity","normalizr__WEBPACK_IMPORTED_MODULE_0__","document","schema","Entity","idAttribute","documentList","Array","entityList","projectList","input","normalize","UploadStorage","files","RenameStorage","PublicStorage","isPublic","DeleteStorage","HeaderLink","location","_useState","useState","_useState2","slicedToArray","params","setParams","useEffect","count","pathname","match","length","matchPath","path","exact","react_default","Fragment","react_router_dom","to","useStyle","makeStyles","theme","root","objectSpread","backgroundColor","palette","primary","light","responsive","link","& a","color","paddingLeft","spacing","paddingRight","fontSize","whiteSpace","overflow","textOverflow","hide","Header","history","style","useDispatch","sidebar","useSelector","_status","authStatus","AppBar","position","className","Toolbar","Hidden","mdUp","IconButton","aria-label","onClick","SwitchSideBar","edge","clsx","Menu_default","Box","display","flexGrow","container","Typography","variant","align","components_HeaderLink","CREATOR","aria-haspopup","e","Settings_default","AuthSignOut","ExitToApp_default","text","textAlign","lineHeight","Footer","SideBarEntity","projectName","ListItem","divider","ButtonBase","Link","ListItemText","btn","SideBarProject","useMemo","open","setOpen","_useState3","_useState4","openEntities","setOpenEntities","button","ExpandLess_default","ExpandMore_default","Collapse","in","timeout","unmountOnExit","List","disablePadding","components_SideBarEntity","key","SideBarContent","components_SideBarProject","paper","main","sidebarPaper","direction","alignItems","padding","mixins","toolbar","justifyContent","SideBar","Drawer","classes","ModalProps","keepMounted","ChevronLeft_default","ChevronRight_default","Divider","components_SideBarContent","smDown","WebsocketClient","ws","Ws","on","subscribe","storage","msg","err","connect","close","Overview","lazy","then","bind","Project","Promise","all","Document","Storage","UserList","marginTop","paddingTop","paddingBottom","background","Admin","FIRST_BOOT","react_router","NOT_AUTHORIZED","components_Header","components_SideBar","src_WebsocketClient","react","fallback","components_Footer"],"mappings":"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","file":"static/js/8.6f739db3.chunk.js","sourcesContent":["import {createSelector} from 'reselect';\r\nimport {selectProjectByName} from './projectSelectors';\r\n\r\n// entity selectors\r\nconst _selectEntities = state => state.entities;\r\nexport const selectEntityIds = state => Object.keys(_selectEntities(state));\r\nexport const selectEntity = (state, id) => _selectEntities(state)[id];\r\nexport const selectAllEntities = state => Object.values(_selectEntities(state));\r\nexport const selectEntitiesInProject = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (_, id) => id,\r\n        (entities, id)=>{\r\n            return entities.filter(value => value.projectId === id);\r\n        }\r\n    );\r\n};\r\nexport const selectEntitiesInProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (state, name) => {\r\n            const select = selectProjectByName();\r\n            return select(state, name);\r\n        },\r\n        (entities, project)=>{\r\n            return project ? {\r\n                project: project,\r\n                entities: entities.filter(value => value.projectId === project.id)\r\n            } : null;\r\n        }\r\n    );\r\n};\r\nexport const selectEntityInProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllEntities,\r\n        (state, project, _) => {\r\n            const select = selectProjectByName();\r\n            return select(state, project);\r\n        },\r\n        (_, __, name) => name,\r\n        (entities, project, name)=>{\r\n            return project ? entities.find(\r\n                value => value.name === name && value.projectId === project.id\r\n            ) : null;\r\n        }\r\n    );\r\n};","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction ContentContainer(props){\r\n    return(\r\n        <Box minHeight='100vh' component={Container} maxWidth=\"xl\" {...props}>\r\n            {\r\n                props.children\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ContentContainer;","import {createSelector} from 'reselect';\r\n\r\n// project selectors\r\nconst _selectProjects = state => state.projects;\r\nexport const selectProjectIds = state => Object.keys(_selectProjects(state));\r\nexport const selectProject = (state, id) => _selectProjects(state)[id];\r\nexport const selectAllProjects = state => Object.values(_selectProjects(state));\r\nexport const selectProjectByName = ()=>{\r\n    return createSelector(\r\n        selectAllProjects,\r\n        (_, name) => name,\r\n        (projects, name)=>{\r\n            return projects.find(value => value.name === name);\r\n        }\r\n    );\r\n};","import {DeleteEntities, AddEntities} from './entityActions';\r\nimport {FetchDocuments} from './documentActions';\r\nimport {FetchStorage} from './storageActions';\r\nimport {selectEntitiesInProject} from '../selectors/entitySelectors';\r\nimport Axios from '../../Axios';\r\nimport {normalizeProjects} from '../schemas/database';\r\n\r\n// UI Overview PopoverMenu\r\nexport function SetProjectPopover(anchor){\r\n    return {type: \"SET_PROJECT_POPOVER\", anchor: anchor};\r\n}\r\n\r\n// receive array of id, name, updated, created, publicKey\r\nexport const AddProjects = projects => {\r\n    return {\r\n        type: \"ADD_PROJECTS\", \r\n        projects: projects\r\n    };\r\n}\r\n\r\nexport const DeleteProject = id => async (dispatch, getState) => {\r\n    // must delete entities first before deleting project\r\n    // entities will search project indexes\r\n    // then project can delete it's indexes\r\n    const select = selectEntitiesInProject();\r\n    const entities = select(getState(), id);\r\n    dispatch(DeleteEntities(entities.map(value => value.id)));\r\n    \r\n    // delete project\r\n    dispatch({type: \"DELETE_PROJECT\", id: id});\r\n}\r\n\r\nexport const RenameProject = (id, name, updated, publicKey) => {\r\n    return {\r\n        type: \"RENAME_PROJECT\", \r\n        id: id, \r\n        name: name,\r\n        updated: updated,\r\n        publicKey: publicKey\r\n    };\r\n}\r\n\r\nexport const ImgProject = (id, img, updated) => {\r\n    return {\r\n        type: \"IMG_PROJECT\", \r\n        id: id, \r\n        img: img,\r\n        updated: updated\r\n    };\r\n}\r\n\r\n// get data from server containing project with related entity\r\n// and dispatch multiple action from this function\r\nexport const InitDatabase = () => async dispatch => {\r\n    // normalized containing\\\r\n    /*\r\n        entities:\r\n            entities: object\r\n            projects: object\r\n        result: Array()\r\n            0: _id\r\n    */\r\n    try{\r\n        const _projects = await Axios.get('project');\r\n        const normalized = normalizeProjects(_projects.data);\r\n        let projects = [];\r\n        let entities = [];\r\n        normalized.result.forEach(value =>{\r\n            projects.push({\r\n                id: normalized.entities.projects[value].id,\r\n                name: normalized.entities.projects[value].name,\r\n                img: normalized.entities.projects[value].img_url,\r\n                created: normalized.entities.projects[value].created_at,\r\n                updated: normalized.entities.projects[value].updated_at,\r\n                publicKey: normalized.entities.projects[value].public_key\r\n            });\r\n            dispatch(AddProjects(projects));\r\n\r\n            normalized.entities.projects[value].entities.forEach(value =>{\r\n                entities.push({\r\n                    id: normalized.entities.entities[value].id,\r\n                    projectId: normalized.entities.entities[value].project_id,\r\n                    name: normalized.entities.entities[value].name,\r\n                    created: normalized.entities.entities[value].created_at,\r\n                    updated: normalized.entities.entities[value].updated_at\r\n                });\r\n            });\r\n        });\r\n        dispatch(AddEntities(entities));\r\n\r\n        entities.forEach(value => dispatch(FetchDocuments(value.id)));\r\n        projects.forEach(value => dispatch(FetchStorage(value.id)));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import {normalizeDocuments} from '../schemas/database';\r\nimport Axios from '../../Axios';\r\n\r\n// receive array of id, entityId, updated, created, data\r\nexport const AddDocuments = documents => {\r\n    return {\r\n        type: \"ADD_DOCUMENTS\", \r\n        documents: documents\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteDocuments = ids => {\r\n    return {type: \"DELETE_DOCUMENTS\", documents: ids};\r\n}\r\n\r\n// receive object id, updated, data\r\nexport const ModifyDocument = (id, updated, data) => {\r\n    return {type: \"MODIFY_DOCUMENT\", id: id, updated: updated, data: data};\r\n}\r\n\r\nexport const FetchDocuments = (entityId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`document/${entityId}`);\r\n        const normalized = normalizeDocuments(res.data);\r\n        let documents = [];\r\n        normalized.result.forEach(value =>{\r\n            documents.push({\r\n                id: normalized.entities.documents[value].id,\r\n                entityId: normalized.entities.documents[value].entity_id,\r\n                created: normalized.entities.documents[value].created_at,\r\n                updated: normalized.entities.documents[value].updated_at,\r\n                data: normalized.entities.documents[value].data\r\n            });\r\n        });\r\n        \r\n        dispatch({type: 'SET_DOCUMENT_INIT', entityId: entityId});\r\n        dispatch(AddDocuments(documents));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import {createSelector} from 'reselect';\r\nimport {selectEntityInProjectByName} from './entitySelectors';\r\n\r\nconst _selectDocuments = state => state.documents;\r\nexport const selectDocumentIds = state => Object.keys(_selectDocuments(state));\r\nexport const selectDocument = (state, id) => _selectDocuments(state)[id];\r\nexport const selectAllDocuments = state => Object.values(_selectDocuments(state));\r\nexport const selectDocumentsInEntity = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (_, id) => id,\r\n        (documents, id)=>{\r\n            return documents.filter(value => value.entityId === id);\r\n        }\r\n    );\r\n};\r\n\r\n// if empty then return entity\r\nexport const selectDocumentsInEntityByName = ()=>{\r\n    return createSelector(\r\n        selectAllDocuments,\r\n        (state, project, name)=>{\r\n            const select = selectEntityInProjectByName();\r\n            return select(state, project, name);\r\n        },\r\n        (documents, entity)=>{\r\n            return entity ? {\r\n                entity: entity,\r\n                documents: documents.filter(value => value.entityId === entity.id)\r\n            } : null;\r\n        }\r\n    );\r\n};","import {DeleteDocuments} from './documentActions';\r\nimport {selectDocumentsInEntity} from '../selectors/documentSelectors';\r\n\r\n// receive array of id, projectId, name, updated, created\r\nexport const AddEntities = entities => {\r\n    return {\r\n        type: \"ADD_ENTITIES\", \r\n        entities: entities\r\n    };\r\n}\r\n\r\n// accept array of id\r\nexport const DeleteEntities = ids => async (dispatch, getState) => {\r\n    // delete documents first then can safely delete entities\r\n    const select = selectDocumentsInEntity();\r\n    let documents = [];\r\n    ids.forEach(value => {\r\n        const temp = select(getState(), value);\r\n        temp.forEach(value => documents.push(value.id));\r\n    });\r\n\r\n    dispatch(DeleteDocuments(documents));\r\n    dispatch({type: \"DELETE_ENTITIES\", entities: ids});\r\n}\r\n\r\nexport const RenameEntity = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_ENTITY\", \r\n        id: id,\r\n        name: name,\r\n        updated: updated\r\n    };\r\n}","import {schema, normalize} from 'normalizr';\r\n\r\nconst document = new schema.Entity('documents', {}, {idAttribute: 'id'});\r\nconst documentList = new schema.Array(document);\r\n\r\nconst entity = new schema.Entity('entities', {\r\n    documents: documentList\r\n}, {idAttribute: 'id'});\r\nconst entityList = new schema.Array(entity);\r\n\r\nconst project = new schema.Entity('projects', {\r\n    entities: entityList\r\n}, {idAttribute: 'id'});\r\nconst projectList = new schema.Array(project);\r\n\r\nexport function normalizeProjects(input){\r\n    return normalize(input, projectList);\r\n}\r\n\r\nexport function normalizeEntities(input){\r\n    return normalize(input, entityList);\r\n}\r\n\r\nexport function normalizeDocuments(input){\r\n    return normalize(input, documentList);\r\n}","import Axios from '../../Axios';\r\n\r\n// actions for storage\r\n\r\n// receive files\r\nexport const UploadStorage = (files) => {\r\n    return {\r\n        type: \"UPLOAD_STORAGE\", \r\n        files: files\r\n    };\r\n}\r\n\r\nexport const RenameStorage = (id, name, updated) => {\r\n    return {\r\n        type: \"RENAME_STORAGE\", \r\n        id: id,\r\n        name: name,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const PublicStorage = (id, isPublic, updated) => {\r\n    return {\r\n        type: \"PUBLIC_STORAGE\", \r\n        id: id,\r\n        isPublic: isPublic,\r\n        updated: updated\r\n    };\r\n}\r\n\r\nexport const DeleteStorage = (ids) => {\r\n    return {\r\n        type: \"DELETE_STORAGE\", \r\n        ids: ids\r\n    };\r\n}\r\n\r\n// get data from server containing storage list per project id\r\nexport const FetchStorage = (projectId) => async dispatch => {\r\n    try{\r\n        const res = await Axios.get(`storage/${projectId}`);\r\n        dispatch(UploadStorage(res.data));\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}","import React, {useEffect, useState} from 'react';\r\n\r\nimport {Link, matchPath} from 'react-router-dom';\r\n\r\nfunction HeaderLink(props){\r\n    const {location} = props;\r\n    const [params, setParams] = useState({});\r\n    \r\n    useEffect(()=>{\r\n        // calculate how many strip in pathname\r\n        // then apply matchPath function conditionally\r\n        const count = (location.pathname.match(/\\/./g)||[]).length;\r\n        if(count === 0){\r\n            setParams({});\r\n        }else if(count === 1){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project\", exact: true\r\n            }).params);\r\n        }else if(count === 2){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity\", exact: true\r\n            }).params);\r\n        }else if(count === 3){\r\n            setParams(matchPath(location.pathname, {\r\n                path: \"/:project/:entity/:document\", exact: true\r\n            }).params);\r\n        }\r\n    }, [location.pathname]);\r\n\r\n    const {project, entity, document} = params;\r\n    // from root => project => entity\r\n    return(\r\n        <React.Fragment>\r\n            <Link to='/'> StarfallCMS </Link>\r\n            {project ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}`}> {project} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {entity ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}`}> {entity} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n            {document ? \r\n                <React.Fragment>\r\n                    /\r\n                    <Link to={`/${project}/${entity}/${document}`}> {document} </Link>\r\n                </React.Fragment> : null\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default HeaderLink;","import React from 'react';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Box from '@material-ui/core/Box';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport ExitToApp from '@material-ui/icons/ExitToApp';\r\nimport Settings from '@material-ui/icons/Settings';\r\nimport Menu from '@material-ui/icons/Menu';\r\n\r\nimport clsx from 'clsx';\r\n\r\nimport {useSelector, useDispatch} from 'react-redux';\r\n\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport {AuthSignOut} from '../redux/actions/authorizationActions';\r\nimport HeaderLink from './HeaderLink';\r\nimport {CREATOR} from '../redux/actions/authorizationActions';\r\n\r\nconst useStyle = makeStyles(theme=>({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.light,\r\n        ...theme.responsive\r\n    },\r\n    link: {\r\n        '& a': {\r\n            color: 'black',\r\n            paddingLeft: theme.spacing(0.35),\r\n            paddingRight: theme.spacing(0.35),\r\n            fontSize: '115%'\r\n        },\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    hide: theme.hide\r\n}));\r\n\r\nfunction Header(props){\r\n    const {history} = props;\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n    const _status = useSelector(state => state.authStatus);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <AppBar position=\"fixed\" className={style.root}>\r\n                <Toolbar>\r\n                    <Hidden mdUp>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label=\"Open drawer\"\r\n                            onClick={() => dispatch(SwitchSideBar(!sidebar))}\r\n                            edge=\"start\"\r\n                            className={clsx(sidebar && style.hide)}\r\n                        >\r\n                            <Menu />\r\n                        </IconButton>\r\n                    </Hidden>\r\n                    <Box display=\"flex\" flexGrow={1}\r\n                        container={Typography} variant=\"h6\" align=\"center\"\r\n                        className={style.link}\r\n                    >\r\n                        <HeaderLink {...props}/>\r\n                    </Box>\r\n                    {_status === CREATOR ?\r\n                        <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"Account of current user\"\r\n                            aria-haspopup=\"true\"\r\n                            color=\"inherit\"\r\n                            onClick={e => history.push('/userlist')}\r\n                        >\r\n                            <Settings />\r\n                        </IconButton> : null\r\n                    }\r\n                    <IconButton\r\n                        edge=\"end\"\r\n                        aria-label=\"Log Off\"\r\n                        aria-haspopup=\"true\"\r\n                        color=\"inherit\"\r\n                        onClick={e => dispatch(AuthSignOut())}\r\n                    >\r\n                        <ExitToApp />\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        backgroundColor: '#292D2E',\r\n        ...theme.responsive\r\n    },\r\n    text: {\r\n        color: 'white',\r\n        fontSize: '125%',\r\n        textAlign: 'center',\r\n        lineHeight: '50px'\r\n    }\r\n}));\r\n\r\nfunction Footer(){\r\n    const style = useStyle();\r\n    return(\r\n        <footer className={style.root}>\r\n            <Typography variant=\"h3\" className={style.text}>\r\n                Copyright Starfall Production\r\n            </Typography>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nconst useStyle = makeStyles({\r\n    root: {\r\n        flexGrow: 1\r\n    }\r\n});\r\n\r\nfunction SideBarEntity(props){\r\n    const style = useStyle();\r\n    const {name, projectName} = props;\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem divider>\r\n                <ButtonBase component={Link} \r\n                    to={`/${projectName}/${name}`}\r\n                    className={style.root}\r\n                >\r\n                    <ListItemText primary={name}/>\r\n                </ButtonBase>\r\n            </ListItem>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarEntity;","import React, {useState, useMemo} from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\n\r\nimport clsx from 'clsx';\r\n\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport SideBarEntity from './SideBarEntity';\r\nimport {selectEntitiesInProject} from '../redux/selectors/entitySelectors';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(1)\r\n    },\r\n    hide: {\r\n        display: 'none'\r\n    },\r\n    btn: {\r\n        flexGrow: 1\r\n    }\r\n}));\r\n\r\nfunction SideBarProject(props){\r\n    const style = useStyle();\r\n    const {id, name} = props;\r\n    const select = useMemo(selectEntitiesInProject,[]);\r\n    const entities = useSelector(state => select(state, id));\r\n    const [open, setOpen] = useState(false);\r\n    const [openEntities, setOpenEntities] = useState(false);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <ListItem button divider onClick={() => setOpen(!open)}>\r\n                <ListItemText primary={name}/>\r\n                {open ? <ExpandLess /> : <ExpandMore />}\r\n            </ListItem>\r\n            <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n                <List className={style.root} disablePadding>\r\n                    <ListItem button component={Link} to={`/${name}/storage`} divider>\r\n                        <ListItemText primary=\"Storage\" />\r\n                    </ListItem>\r\n                    <ListItem divider>\r\n                        <ButtonBase component={Link} \r\n                            to={`/${name}`}\r\n                            className={style.btn}\r\n                        >\r\n                            <ListItemText primary=\"Entities\"/>\r\n                        </ButtonBase>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            aria-label={`Expand ${name} entities`}\r\n                            onClick={() => setOpenEntities(!openEntities)}\r\n                            edge=\"end\"\r\n                            className={clsx(entities.length === 0 && style.hide)}\r\n                        >\r\n                            {openEntities ? <ExpandLess /> : <ExpandMore />}\r\n                        </IconButton>\r\n                    </ListItem>\r\n                    {\r\n                        entities.length > 0 ? \r\n                            <Collapse in={openEntities} timeout=\"auto\" unmountOnExit>\r\n                                <List className={style.root} disablePadding>\r\n                                    {\r\n                                        entities.map((value) => {\r\n                                            return <SideBarEntity\r\n                                                key={value.id}\r\n                                                name={value.name}\r\n                                                projectName={name}\r\n                                            />\r\n                                        })\r\n                                    }\r\n                                </List>\r\n                            </Collapse> : null\r\n                    }\r\n                </List>\r\n            </Collapse>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBarProject;","import React from 'react';\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport SideBarProject from './SideBarProject';\r\nimport {selectAllProjects} from '../redux/selectors/projectSelectors';\r\n\r\nfunction SideBarContent(props){\r\n    const projects = useSelector(selectAllProjects);\r\n\r\n    return(\r\n        <List>\r\n            <ListItem button component={Link} to=\"/\" divider>\r\n                <ListItemText primary=\"Overview\" />\r\n            </ListItem>\r\n            {\r\n                projects.map((value)=>{\r\n                    return(\r\n                        <SideBarProject id={value.id} name={value.name} key={value.id}/>\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\nexport default SideBarContent;","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {SwitchSideBar} from '../redux/actions/globalActions';\r\nimport SideBarContent from './SideBarContent';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: theme.sidebar,\r\n    paper: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        ...theme.sidebarPaper\r\n    },\r\n    direction: theme.direction,\r\n    btn: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: '0 8px',\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end'\r\n    }\r\n}));\r\n\r\nfunction SideBar(props){\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const sidebar = useSelector(state => state.sidebar);\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <Hidden mdUp>\r\n                <Drawer\r\n                    className={style.root}\r\n                    variant=\"temporary\"\r\n                    anchor={style.direction === 'rtl' ? 'right' : 'left'}\r\n                    open={sidebar}\r\n                    classes={{paper: style.paper}}\r\n                    ModalProps={{keepMounted: true}}\r\n                >\r\n                    <div className={style.btn}>\r\n                        <IconButton onClick={() => dispatch(SwitchSideBar(!sidebar))}>\r\n                            {style.direction === 'ltr' ? <ChevronLeft /> : <ChevronRight />}\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden smDown>\r\n                <Drawer\r\n                    className={style.root}\r\n                    classes={{paper: style.paper}}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    <SideBarContent/>\r\n                </Drawer>\r\n            </Hidden>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SideBar;","import {useEffect} from 'react';\r\n\r\nimport Ws from '@adonisjs/websocket-client';\r\n\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {AddProjects, DeleteProject, RenameProject, ImgProject} from './redux/actions/projectActions';\r\nimport {AddEntities, DeleteEntities, RenameEntity} from './redux/actions/entityActions';\r\nimport {AddDocuments, ModifyDocument, DeleteDocuments} from './redux/actions/documentActions';\r\nimport {UploadStorage, RenameStorage, DeleteStorage, PublicStorage} from './redux/actions/storageActions';\r\n\r\nfunction WebsocketClient(props) {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        const ws = process.env.NODE_ENV === 'development' \r\n            ? Ws('ws://localhost:3333/', {path: 'starfall-cms-ws'}) \r\n            : Ws(null, {path: 'starfall-cms-ws'});\r\n        \r\n        ws.on(\"open\", ()=>{\r\n            const project = ws.subscribe('project');\r\n            const entity = ws.subscribe('entity');\r\n            const document = ws.subscribe('document');\r\n            const storage = ws.subscribe('storage');\r\n            \r\n            // project socket listener\r\n            project.on('add', (msg)=>{\r\n                console.log(\"add project\");\r\n                console.log(msg);\r\n                dispatch(AddProjects([{\r\n                    id: msg.id,\r\n                    name: msg.name,\r\n                    img: msg.img_url,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    publicKey: msg.public_key\r\n                }]));\r\n            });\r\n            project.on('delete', (msg)=>{\r\n                console.log(\"delete project\");\r\n                console.log(msg);\r\n                dispatch(DeleteProject(msg.id));\r\n            });\r\n            project.on('rename', (msg)=>{\r\n                console.log(\"rename project\");\r\n                console.log(msg);\r\n                dispatch(RenameProject(\r\n                    msg.id, \r\n                    msg.name, \r\n                    msg.updated_at,\r\n                    msg.public_key\r\n                ));\r\n            });\r\n            project.on('img', (msg)=>{\r\n                console.log(\"change image of project\");\r\n                console.log(msg);\r\n                dispatch(ImgProject(\r\n                    msg.id, \r\n                    msg.img_url, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            project.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // entity socket listener\r\n            entity.on('add', (msg)=>{\r\n                console.log(\"add entity\");\r\n                console.log(msg);\r\n                dispatch(AddEntities([{\r\n                    id: msg.id,\r\n                    projectId:msg.project_id,\r\n                    name: msg.name,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at\r\n                }]));\r\n            });\r\n            entity.on('delete', (msg)=>{\r\n                console.log(\"delete entity\");\r\n                console.log(msg);\r\n                dispatch(DeleteEntities([msg.id]));\r\n            });\r\n            entity.on('rename', (msg)=>{\r\n                console.log(\"rename entity\");\r\n                console.log(msg);\r\n                dispatch(RenameEntity(\r\n                    msg.id,\r\n                    msg.name, \r\n                    msg.updated_at\r\n                ));\r\n            });\r\n            entity.on(\"error\", (err)=>{\r\n                console.log(err);\r\n            });\r\n\r\n            // document socket listener\r\n            document.on('add', (msg)=>{\r\n                console.log(\"add document\");\r\n                console.log(msg);\r\n                dispatch(AddDocuments([{\r\n                    id: msg.id,\r\n                    entityId: msg.entity_id,\r\n                    created: msg.created_at,\r\n                    updated: msg.updated_at,\r\n                    data: msg.data\r\n                }]));\r\n            });\r\n            document.on('modify', (msg)=>{\r\n                console.log(\"modify document\");\r\n                console.log(msg);\r\n                dispatch(ModifyDocument(\r\n                    msg.id,\r\n                    msg.updated_at,\r\n                    msg.data\r\n                ));\r\n            });\r\n            document.on('delete', (msg)=>{\r\n                console.log(\"delete documents\");\r\n                console.log(msg);\r\n                dispatch(DeleteDocuments(msg.ids));\r\n            });\r\n\r\n            // storage socket listener\r\n            storage.on('upload', (msg)=>{\r\n                console.log(\"upload into storage\");\r\n                console.log(msg);\r\n                dispatch(UploadStorage(msg));\r\n            });\r\n            storage.on('rename', (msg)=>{\r\n                console.log(\"rename storage\");\r\n                console.log(msg);\r\n                dispatch(RenameStorage(msg.id, msg.name, msg.updated_at));\r\n            });\r\n            storage.on('public', (msg)=>{\r\n                console.log(\"toggle isPublic storage\");\r\n                console.log(msg);\r\n                dispatch(PublicStorage(msg.id, msg.isPublic, msg.updated_at));\r\n            });\r\n            storage.on('delete', (msg)=>{\r\n                console.log(\"delete storage\");\r\n                console.log(msg);\r\n                dispatch(DeleteStorage(msg.ids));\r\n            });\r\n        });\r\n\r\n        ws.on(\"close\", ()=>{\r\n                \r\n        });\r\n\r\n        ws.on(\"error\", (err)=>{\r\n            console.log(err);\r\n        });\r\n\r\n        ws.connect();\r\n\r\n        return ()=>{\r\n            ws.close();\r\n        }\r\n    }, []);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default WebsocketClient;","import React, {useEffect, lazy, Suspense} from 'react';\r\n\r\nimport {Route, Switch, Redirect} from 'react-router-dom';\r\n\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport SideBar from './components/SideBar';\r\nimport {InitDatabase} from './redux/actions/projectActions';\r\nimport ContentContainer from './components/ContentContainer';\r\nimport WebsocketClient from './WebsocketClient';\r\nimport {NOT_AUTHORIZED, FIRST_BOOT, CREATOR} from './redux/actions/authorizationActions';\r\n\r\nconst Overview = lazy(()=>import('./components/Overview'));\r\nconst Project = lazy(()=>import('./components/Project'));\r\nconst Entity = lazy(()=>import('./components/Entity'));\r\nconst Document = lazy(()=>import('./components/Document'));\r\nconst Storage = lazy(()=>import('./components/Storage'));\r\nconst UserList = lazy(()=>import('./components/UserList'));\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n    root: {\r\n\t\tmarginTop: 65,\r\n\t\tpaddingTop: 15,\r\n\t\tpaddingBottom: 15,\r\n\t\tbackgroundColor: theme.palette.background.light.light,\r\n\t\toverflow: 'auto',\r\n\t\t...theme.responsive\r\n\t}\r\n}));\r\n\r\nfunction Admin(props) {\r\n\tconst style = useStyle();\r\n\tconst dispatch = useDispatch();\r\n\tconst _status = useSelector(state => state.authStatus);\r\n\r\n\tuseEffect(()=>{\r\n\t\tdispatch(InitDatabase());\r\n\t}, []);\r\n\r\n\tif(_status === FIRST_BOOT)\r\n\t\treturn <Redirect to='/signup'/>;\r\n\telse if(_status === NOT_AUTHORIZED)\r\n\t\treturn <Redirect to='/signin'/>;\r\n\telse return (\r\n\t\t<React.Fragment>\r\n\t\t\t<Header {...props}/>\r\n\t\t\t<SideBar/>\r\n\t\t\t\r\n\t\t\t<WebsocketClient/>\r\n\t\t\t<ContentContainer className={style.root}>\r\n\t\t\t\t<Suspense fallback={<div></div>}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t{_status === CREATOR ? <Route path='/userlist' component={UserList}/> : null}\r\n\t\t\t\t\t\t<Route path='/:project/:entity/:document' component={Document}/>\r\n\t\t\t\t\t\t<Route path='/:project/storage' component={Storage}/>\r\n\t\t\t\t\t\t<Route path='/:project/:entity' component={Entity}/>\r\n\t\t\t\t\t\t<Route path='/:project' component={Project}/>\r\n\t\t\t\t\t\t<Route path='/' component={Overview}/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Suspense>\r\n\t\t\t</ContentContainer>\r\n\t\r\n\t\t\t<Footer/>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nexport default Admin;"],"sourceRoot":""}