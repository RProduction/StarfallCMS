(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{206:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l});var a=n(228),r=n(229),c=function(e){return e.entities},o=function(e){return Object.values(c(e))},i=function(){return Object(a.a)(o,function(e,t){return t},function(e,t){return e.filter(function(e){return e.projectId===t})})},u=function(){return Object(a.a)(o,function(e,t){return Object(r.b)()(e,t)},function(e,t){return{project:t,entities:e.filter(function(e){return e.projectId===t.id})}})},l=function(){return Object(a.a)(o,function(e,t,n){return Object(r.b)()(e,t)},function(e,t,n){return n},function(e,t,n){return e.find(function(e){return e.name===n&&e.projectId===t.id})})}},207:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"i",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return s}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return b});var a=n(16),r=n.n(a),c=n(26),o=n(27),i=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("storage/".concat(e));case 3:a=t.sent,n({type:"INIT_STORAGE",id:e,data:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},u=function(e,t,n){return{type:"UPLOAD_STORAGE",id:e,path:t,files:n}},l=function(e,t){return{type:"FOLDER_STORAGE",id:e,path:t}},d=function(e,t,n){return{type:"MOVE_STORAGE",id:e,path:t,targets:n}},s=function(e,t,n,a){return{type:"RENAME_STORAGE",id:e,path:t,name:n,new_name:a}},f=function(e,t){return{type:"DELETE_STORAGE",id:e,paths:t}};function m(e){return{type:"INIT_STORAGE_PATH",id:e}}function p(e){return{type:"FORWARD_STORAGE_PATH",next:e}}function b(){return{type:"BACKWARD_STORAGE_PATH"}}},208:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(702),o=n(712);t.a=function(e){return r.a.createElement(o.a,Object.assign({minHeight:"100vh",component:c.a,maxWidth:"xl"},e),e.children)}},229:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return o});var a=n(228),r=function(e){return e.projects},c=function(e){return Object.values(r(e))},o=function(){return Object(a.a)(c,function(e,t){return t},function(e,t){return e.find(function(e){return e.name===t})})}},230:function(e,t,n){"use strict";n.d(t,"f",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return E}),n.d(t,"d",function(){return j});var a=n(16),r=n.n(a),c=n(26),o=n(318),i=n(262),u=n(207),l=n(206),d=n(27),s=n(319);function f(e){return{type:"SET_PROJECT_POPOVER",anchor:e}}var m=function(e){return{type:"ADD_PROJECTS",projects:e}},p=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){var c,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(l.a)(),i=c(a(),e),n(Object(o.b)(i.map(function(e){return e.id}))),n({type:"DELETE_PROJECT",id:e});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},b=function(e,t,n,a){return{type:"RENAME_PROJECT",id:e,name:t,updated:n,publicKey:a}},E=function(e,t,n){return{type:"IMG_PROJECT",id:e,img:t,updated:n}},j=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("project");case 3:n=e.sent,a=Object(s.b)(n.data),c=[],l=[],a.result.forEach(function(e){c.push({id:a.entities.projects[e].id,name:a.entities.projects[e].name,img:a.entities.projects[e].img_url,created:a.entities.projects[e].created_at,updated:a.entities.projects[e].updated_at,publicKey:a.entities.projects[e].public_key}),t(m(c)),a.entities.projects[e].entities.forEach(function(e){l.push({id:a.entities.entities[e].id,projectId:a.entities.entities[e].project_id,name:a.entities.entities[e].name,created:a.entities.entities[e].created_at,updated:a.entities.entities[e].updated_at})})}),t(Object(o.a)(l)),l.forEach(function(e){return t(Object(i.c)(e.id))}),c.forEach(function(e){return t(Object(u.c)(e.id))}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()}},262:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return s});var a=n(16),r=n.n(a),c=n(26),o=n(319),i=n(27),u=function(e){return{type:"ADD_DOCUMENTS",documents:e}},l=function(e){return{type:"DELETE_DOCUMENTS",documents:e}},d=function(e,t,n){return{type:"MODIFY_DOCUMENT",id:e,updated:t,data:n}},s=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("document/".concat(e));case 3:a=t.sent,c=Object(o.a)(a.data),l=[],c.result.forEach(function(e){l.push({id:c.entities.documents[e].id,entityId:c.entities.documents[e].entity_id,created:c.entities.documents[e].created_at,updated:c.entities.documents[e].updated_at,data:c.entities.documents[e].data})}),n({type:"SET_DOCUMENT_INIT",entityId:e}),n(u(l)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()}},263:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l});var a=n(228),r=n(206),c=function(e){return e.documents},o=function(e,t){return c(e)[t]},i=function(e){return Object.values(c(e))},u=function(){return Object(a.a)(i,function(e,t){return t},function(e,t){return e.filter(function(e){return e.entityId===t})})},l=function(){return Object(a.a)(i,function(e,t,n){return Object(r.c)()(e,t,n)},function(e,t){return{entity:t,documents:e.filter(function(e){return e.entityId===t.id})}})}},303:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(312),o=n(300),i=n(309),u=n(691);function l(e){var t=e.IconComponent;return t?r.a.createElement(u.a,null,r.a.createElement(t,null)):null}t.a=function(e){var t=e.menus;return r.a.createElement(o.a,e,t.map(function(e,t){var n=e.title?e.title:"",a=e.onClick?e.onClick:function(){};return r.a.createElement(i.a,{key:t,onClick:a},r.a.createElement(l,{IconComponent:e.icon}),r.a.createElement(c.a,null,n))}))}},318:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d});var a=n(16),r=n.n(a),c=n(26),o=n(262),i=n(263),u=function(e){return{type:"ADD_ENTITIES",entities:e}},l=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){var c,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(i.b)(),u=[],e.forEach(function(e){c(a(),e).forEach(function(e){return u.push(e.id)})}),n(Object(o.b)(u)),n({type:"DELETE_ENTITIES",entities:e});case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},d=function(e,t,n){return{type:"RENAME_ENTITY",id:e,name:t,updated:n}}},319:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return s});var a=n(428),r=new a.b.Entity("documents",{},{idAttribute:"id"}),c=new a.b.Array(r),o=new a.b.Entity("entities",{documents:c},{idAttribute:"id"}),i=new a.b.Array(o),u=new a.b.Entity("projects",{entities:i},{idAttribute:"id"}),l=new a.b.Array(u);function d(e){return Object(a.a)(e,l)}function s(e){return Object(a.a)(e,c)}},714:function(e,t,n){"use strict";n.r(t);var a=n(224),r=n(0),c=n.n(r),o=n(42),i=n.n(o),u=n(68),l=n.n(u),d=n(231),s=n.n(d),f=n(163),m=n.n(f),p=n(33),b=n(58),E=n(312),j=n(697),O=n(315),g=n(316),h=n(404),v=n(712),y=n(422),_=n.n(y),T=n(423),w=n.n(T),k=n(46),x=n(20),A=n(420),C=n.n(A),S=n(419),N=n.n(S),I=n(61),R=n(303);var D=function(e){var t=e.anchor,n=e.close,a=Object(p.c)();return c.a.createElement(R.a,{id:t?"User":null,open:!!t,onClose:function(){return n()},anchorEl:t,menus:[{title:"User List",icon:N.a,onClick:function(){}},{title:"Sign Out",icon:C.a,onClick:function(){return a(Object(I.b)())}}]})},P=n(193),M=n.n(P),G=n(421),F=n.n(G);var L=function(e){var t=e.location,n=Object(r.useState)({}),a=Object(b.a)(n,2),o=a[0],i=a[1];Object(r.useEffect)(function(){var e=(t.pathname.match(/\/./g)||[]).length;0===e?i({}):1===e?i(F()(t.pathname,{path:"/:project",exact:!0}).params):2===e?i(F()(t.pathname,{path:"/:project/:entity",exact:!0}).params):3===e&&i(F()(t.pathname,{path:"/:project/:entity/:document",exact:!0}).params)},[t.pathname]);var u=o.project,l=o.entity,d=o.document;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{to:"/"}," StarfallCMS "),u?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(M.a,{to:"/".concat(u)}," ",u," ")):null,l?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(M.a,{to:"/".concat(u,"/").concat(l)}," ",l," ")):null,d?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(M.a,{to:"/".concat(u,"/").concat(l,"/").concat(d)}," ",d," ")):null)},U=m()(function(e){return{root:Object(a.a)({backgroundColor:e.palette.primary.light},e.responsive),link:{"& a":{color:"black",paddingLeft:e.spacing(.35),paddingRight:e.spacing(.35),fontSize:"115%"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},hide:e.hide}});var z=function(e){var t=U(),n=Object(p.c)(),a=Object(p.d)(function(e){return e.sidebar}),o=Object(r.useState)(null),i=Object(b.a)(o,2),u=i[0],l=i[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{position:"fixed",className:t.root},c.a.createElement(O.a,null,c.a.createElement(h.a,{mdUp:!0},c.a.createElement(g.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){return n(Object(x.l)(!a))},edge:"start",className:Object(k.a)(a&&t.hide)},c.a.createElement(_.a,null))),c.a.createElement(v.a,{display:"flex",flexGrow:1,container:E.a,variant:"h6",align:"center",className:t.link},c.a.createElement(L,e)),c.a.createElement(g.a,{edge:"end","aria-label":"Account of current user","aria-haspopup":"true",color:"inherit",onClick:function(e){return l(e.currentTarget)}},c.a.createElement(w.a,null)))),c.a.createElement(D,{anchor:u,close:function(){return l(null)}}))},J=m()(function(e){return{root:Object(a.a)({backgroundColor:"#292D2E"},e.responsive),text:{color:"white",fontSize:"125%",textAlign:"center",lineHeight:"50px"}}});var H=function(){var e=J();return c.a.createElement("footer",{className:e.root},c.a.createElement(E.a,{variant:"h3",className:e.text},"Copyright Starfall Production"))},K=n(721),W=n(701),B=n(426),V=n.n(B),Y=n(427),q=n.n(Y),Q=n(695),X=n(696),Z=n(317),$=n(717),ee=n(698),te=n(424),ne=n.n(te),ae=n(425),re=n.n(ae),ce=m()({root:{flexGrow:1}});var oe=function(e){var t=ce(),n=e.name,a=e.projectName;return c.a.createElement(c.a.Fragment,null,c.a.createElement(X.a,{divider:!0},c.a.createElement($.a,{component:M.a,to:"/".concat(a,"/").concat(n),className:t.root},c.a.createElement(Z.a,{primary:n}))))},ie=n(206),ue=m()(function(e){return{root:{paddingLeft:e.spacing(1)},hide:{display:"none"},btn:{flexGrow:1}}});var le=function(e){var t=ue(),n=e.id,a=e.name,o=Object(r.useMemo)(ie.a,[]),i=Object(p.d)(function(e){return o(e,n)}),u=Object(r.useState)(!1),l=Object(b.a)(u,2),d=l[0],s=l[1],f=Object(r.useState)(!1),m=Object(b.a)(f,2),E=m[0],j=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(X.a,{button:!0,divider:!0,onClick:function(){return s(!d)}},c.a.createElement(Z.a,{primary:a}),d?c.a.createElement(ne.a,null):c.a.createElement(re.a,null)),c.a.createElement(ee.a,{in:d,timeout:"auto",unmountOnExit:!0},c.a.createElement(Q.a,{className:t.root,disablePadding:!0},c.a.createElement(X.a,{button:!0,component:M.a,to:"/".concat(a,"/authentication"),divider:!0},c.a.createElement(Z.a,{primary:"Authentication"})),c.a.createElement(X.a,{button:!0,component:M.a,to:"/".concat(a,"/storage"),divider:!0},c.a.createElement(Z.a,{primary:"Storage"})),c.a.createElement(X.a,{divider:!0},c.a.createElement($.a,{component:M.a,to:"/".concat(a),className:t.btn},c.a.createElement(Z.a,{primary:"Entities"})),c.a.createElement(g.a,{color:"inherit","aria-label":"Expand ".concat(a," entities"),onClick:function(){return j(!E)},edge:"end",className:Object(k.a)(0===i.length&&t.hide)},E?c.a.createElement(ne.a,null):c.a.createElement(re.a,null))),i.length>0?c.a.createElement(ee.a,{in:E,timeout:"auto",unmountOnExit:!0},c.a.createElement(Q.a,{className:t.root,disablePadding:!0},i.map(function(e){return c.a.createElement(oe,{key:e.id,name:e.name,projectName:a})}))):null)))},de=n(229);var se=function(e){var t=Object(p.d)(de.a);return c.a.createElement(Q.a,null,c.a.createElement(X.a,{button:!0,component:M.a,to:"/",divider:!0},c.a.createElement(Z.a,{primary:"Overview"})),t.map(function(e){return c.a.createElement(le,{id:e.id,name:e.name,key:e.id})}))},fe=m()(function(e){return{root:e.sidebar,paper:Object(a.a)({backgroundColor:e.palette.primary.main},e.sidebarPaper),direction:e.direction,btn:Object(a.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"})}});var me=function(e){var t=fe(),n=Object(p.c)(),a=Object(p.d)(function(e){return e.sidebar});return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{mdUp:!0},c.a.createElement(K.a,{className:t.root,variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:a,classes:{paper:t.paper},ModalProps:{keepMounted:!0}},c.a.createElement("div",{className:t.btn},c.a.createElement(g.a,{onClick:function(){return n(Object(x.l)(!a))}},"ltr"===t.direction?c.a.createElement(V.a,null):c.a.createElement(q.a,null))),c.a.createElement(W.a,null),c.a.createElement(se,null))),c.a.createElement(h.a,{smDown:!0},c.a.createElement(K.a,{className:t.root,classes:{paper:t.paper},variant:"permanent",open:!0},c.a.createElement(se,null))))},pe=n(230),be=n(208),Ee=n(429),je=n.n(Ee),Oe=n(318),ge=n(262),he=n(207);var ve=function(e){var t=Object(p.c)();return Object(r.useEffect)(function(){var e=je()(null,{path:"starfall-cms-ws"});return e.on("open",function(){var n=e.subscribe("project"),a=e.subscribe("entity"),r=e.subscribe("document"),c=e.subscribe("storage");n.on("add",function(e){console.log("add project"),console.log(e),t(Object(pe.a)([{id:e.id,name:e.name,img:e.img_url,created:e.created_at,updated:e.updated_at,publicKey:e.public_key}]))}),n.on("delete",function(e){console.log("delete project"),console.log(e),t(Object(pe.b)(e.id))}),n.on("rename",function(e){console.log("rename project"),console.log(e),t(Object(pe.e)(e.id,e.name,e.updated_at,e.public_key))}),n.on("img",function(e){console.log("change image of project"),console.log(e),t(Object(pe.c)(e.id,e.img_url,e.updated_at))}),n.on("error",function(e){console.log(e)}),a.on("add",function(e){console.log("add entity"),console.log(e),t(Object(Oe.a)([{id:e.id,projectId:e.project_id,name:e.name,created:e.created_at,updated:e.updated_at}]))}),a.on("delete",function(e){console.log("delete entity"),console.log(e),t(Object(Oe.b)([e.id]))}),a.on("rename",function(e){console.log("rename entity"),console.log(e),t(Object(Oe.c)(e.id,e.name,e.updated_at))}),a.on("error",function(e){console.log(e)}),r.on("add",function(e){console.log("add document"),console.log(e),t(Object(ge.a)([{id:e.id,entityId:e.entity_id,created:e.created_at,updated:e.updated_at,data:e.data}]))}),r.on("modify",function(e){console.log("modify document"),console.log(e),t(Object(ge.d)(e.id,e.updated_at,e.data))}),r.on("delete",function(e){console.log("delete documents"),console.log(e),t(Object(ge.b)(e.ids))}),c.on("upload",function(e){console.log("upload into storage"),console.log(e),t(Object(he.i)(e.id,e.path,e.files))}),c.on("folder",function(e){console.log("new folder into storage"),console.log(e),t(Object(he.d)(e.id,e.path))}),c.on("move",function(e){console.log("move storage"),console.log(e),t(Object(he.g)(e.id,e.path,e.targets))}),c.on("rename",function(e){console.log("rename storage"),console.log(e),t(Object(he.h)(e.id,e.path,e.name,e.new_name))}),c.on("delete",function(e){console.log("delete storage"),console.log(e),t(Object(he.b)(e.id,e.paths))})}),e.on("close",function(){}),e.on("error",function(e){console.log(e)}),e.connect(),function(){e.close()}},[]),null},ye=Object(r.lazy)(function(){return n.e(16).then(n.bind(null,715))}),_e=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(13)]).then(n.bind(null,720))}),Te=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(15)]).then(n.bind(null,709))}),we=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,710))}),ke=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,713))}),xe=m()(function(e){return{root:Object(a.a)({marginTop:65,paddingTop:15,paddingBottom:15,backgroundColor:e.palette.background.light.light,overflow:"auto"},e.responsive)}});t.default=function(e){var t=xe(),n=Object(p.c)(),a=Object(p.d)(function(e){return e.authStatus});return Object(r.useEffect)(function(){n(Object(pe.d)())},[]),a===I.f?c.a.createElement(s.a,{to:"/signup"}):a===I.g?c.a.createElement(s.a,{to:"/signin"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(z,e),c.a.createElement(me,null),c.a.createElement(ve,null),c.a.createElement(be.a,{className:t.root},c.a.createElement(r.Suspense,{fallback:c.a.createElement("div",null)},c.a.createElement(l.a,null,c.a.createElement(i.a,{path:"/:project/:entity/:document",component:we}),c.a.createElement(i.a,{path:"/:project/authentication",component:null}),c.a.createElement(i.a,{path:"/:project/storage",component:ke}),c.a.createElement(i.a,{path:"/:project/:entity",component:Te}),c.a.createElement(i.a,{path:"/:project",component:_e}),c.a.createElement(i.a,{path:"/",component:ye})))),c.a.createElement(H,null))}}}]);
//# sourceMappingURL=8.3510d0c5.chunk.js.map