(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{123:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"h",function(){return l}),n.d(e,"d",function(){return f}),n.d(e,"f",function(){return s}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return p}),n.d(e,"g",function(){return m}),n.d(e,"e",function(){return E});var r=n(35),a=n.n(r),c=n(40),u=n(283),i=n(41);function o(t,e){return{type:"ADD_FIELD",keys:t,fieldType:e}}function l(t,e){return{type:"SET_FIELD",keys:t,value:e}}function f(t){return{type:"DELETE_FIELD",keys:t}}function s(t){return{type:"GENERATE_FIELD",fieldType:t,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}var d=function(t){return{type:"ADD_DOCUMENTS",documents:t}},p=function(t){return{type:"DELETE_DOCUMENTS",documents:t}},m=function(t,e,n){return{type:"MODIFY_DOCUMENT",id:t,updated:e,data:n}},E=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r,c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("document/".concat(t));case 3:r=e.sent,c=Object(u.a)(r.data),o=[],c.result.forEach(function(t){o.push({id:c.entities.documents[t]._id,entityId:c.entities.documents[t].entity_id,created:c.entities.documents[t].created_at,updated:c.entities.documents[t].updated_at,data:c.entities.documents[t].data})}),n({type:"SET_DOCUMENT_INIT",entityId:t}),n(d(o)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()}},131:function(t,e,n){"use strict";n.d(e,"e",function(){return u}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return l}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"d",function(){return m});var r=n(198),a=n(150),c=function(t){return t.documents},u=function(t,e){return c(t)[e]},i=function(t){return Object.values(c(t))},o=function(){return Object(r.a)(i,function(t,e){return e},function(t,e){return t.filter(function(t){return t.entityId===e})})},l=function(){return Object(r.a)(i,function(t,e){return Object(a.c)()(t,e)},function(t,e){return{entity:e,documents:t.filter(function(t){return t.entityId===e.id})}})},f=function(t){return t.currentDocument},s=function(t){return f(t).type},d=function(t){return f(t).data},p=function(){return Object(r.a)(s,function(t){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]},function(t,e){return e.forEach(function(e){t=t[e]}),t.constructor===Object?Object.entries(t).map(function(t){return{key:t[0],type:t[1].constructor===Object?"object":t[1].constructor===Array?"array":t[1]}}):t.constructor==Array?{key:0,type:t[0].constructor===Object?"object":t[0].constructor===Array?"array":t[0]}:void 0})},m=function(){return Object(r.a)(d,function(t){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]},function(t,e){return e.forEach(function(e){t=t[e]}),t})}},150:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return l});var r=n(198),a=n(199),c=function(t){return t.entities},u=function(t){return Object.values(c(t))},i=function(){return Object(r.a)(u,function(t,e){return e},function(t,e){return t.filter(function(t){return t.projectId===e})})},o=function(){return Object(r.a)(u,function(t,e){return Object(a.b)()(t,e)},function(t,e){return{project:e,entities:t.filter(function(t){return t.projectId===e.id})}})},l=function(){return Object(r.a)(u,function(t,e){return e},function(t,e){return t.find(function(t){return t.name===e})})}},179:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"i",function(){return o}),n.d(e,"d",function(){return l}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return s}),n.d(e,"b",function(){return d}),n.d(e,"f",function(){return p}),n.d(e,"e",function(){return m}),n.d(e,"a",function(){return E});var r=n(35),a=n.n(r),c=n(40),u=n(41),i=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("storage/".concat(t));case 3:r=e.sent,n({type:"INIT_STORAGE",id:t,data:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},o=function(t,e,n){return{type:"UPLOAD_STORAGE",id:t,path:e,files:n}},l=function(t,e){return{type:"FOLDER_STORAGE",id:t,path:e}},f=function(t,e,n){return{type:"MOVE_STORAGE",id:t,path:e,targets:n}},s=function(t,e,n,r){return{type:"RENAME_STORAGE",id:t,path:e,name:n,new_name:r}},d=function(t,e){return{type:"DELETE_STORAGE",id:t,paths:e}};function p(t){return{type:"INIT_STORAGE_PATH",id:t}}function m(t){return{type:"FORWARD_STORAGE_PATH",next:t}}function E(){return{type:"BACKWARD_STORAGE_PATH"}}},180:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(681),u=n(666);e.a=function(t){return a.a.createElement(c.a,Object.assign({minHeight:"100vh",component:u.a,maxWidth:"xl"},t),t.children)}},199:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u});var r=n(198),a=function(t){return t.projects},c=function(t){return Object.values(a(t))},u=function(){return Object(r.a)(c,function(t,e){return e},function(t,e){return t.find(function(t){return t.name===e})})}},200:function(t,e,n){"use strict";n.d(e,"f",function(){return d}),n.d(e,"a",function(){return p}),n.d(e,"b",function(){return m}),n.d(e,"e",function(){return E}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return O});var r=n(35),a=n.n(r),c=n(40),u=n(282),i=n(123),o=n(179),l=n(150),f=n(41),s=n(283);function d(t){return{type:"SET_PROJECT_POPOVER",anchor:t}}var p=function(t){return{type:"ADD_PROJECTS",projects:t}},m=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n,r){var c,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(l.a)(),i=c(r(),t),n(Object(u.b)(i.map(function(t){return t.id}))),n({type:"DELETE_PROJECT",id:t});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},E=function(t,e,n){return{type:"RENAME_PROJECT",id:t,name:e,updated:n}},b=function(t,e,n){return{type:"IMG_PROJECT",id:t,img:e,updated:n}},O=function(){return function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get("project");case 3:n=t.sent,r=Object(s.b)(n.data),c=[],l=[],r.result.forEach(function(t){c.push({id:r.entities.projects[t]._id,name:r.entities.projects[t].name,img:r.entities.projects[t].img_url,created:r.entities.projects[t].created_at,updated:r.entities.projects[t].updated_at,publicKey:r.entities.projects[t].public_key}),e(p(c)),r.entities.projects[t].entities.forEach(function(t){l.push({id:r.entities.entities[t]._id,projectId:r.entities.entities[t].project_id,name:r.entities.entities[t].name,created:r.entities.entities[t].created_at,updated:r.entities.entities[t].updated_at,schema:r.entities.entities[t].schema||{}})})}),e(Object(u.a)(l)),l.forEach(function(t){return e(Object(i.e)(t.id))}),c.forEach(function(t){return e(Object(o.c)(t.id))}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}},267:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(647),u=n(266),i=n(236),o=n(277);function l(t){var e=t.IconComponent;return e?a.a.createElement(c.a,null,a.a.createElement(e,null)):null}e.a=function(t){var e=t.menus;return a.a.createElement(u.a,t,e.map(function(t,e){var n=t.title?t.title:"",r=t.onClick?t.onClick:function(){};return a.a.createElement(i.a,{key:e,onClick:r},a.a.createElement(l,{IconComponent:t.icon}),a.a.createElement(o.a,null,n))}))}},282:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return s});var r=n(35),a=n.n(r),c=n(40),u=n(123),i=n(131),o=function(t){return{type:"ADD_ENTITIES",entities:t}},l=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n,r){var c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(i.f)(),o=[],t.forEach(function(t){c(r(),t).forEach(function(t){return o.push(t.id)})}),n(Object(u.c)(o)),n({type:"DELETE_ENTITIES",entities:t});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},f=function(t,e,n){return{type:"RENAME_ENTITY",id:t,name:e,updated:n}},s=function(t,e,n){return{type:"SET_ENTITY_SCHEMA",id:t,schema:e,updated:n}}},283:function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"a",function(){return s});var r=n(379),a=new r.b.Entity("documents",{},{idAttribute:"_id"}),c=new r.b.Array(a),u=new r.b.Entity("entities",{documents:c},{idAttribute:"_id"}),i=new r.b.Array(u),o=new r.b.Entity("projects",{entities:i},{idAttribute:"_id"}),l=new r.b.Array(o);function f(t){return Object(r.a)(t,l)}function s(t){return Object(r.a)(t,c)}},683:function(t,e,n){"use strict";n.r(e);var r=n(195),a=n(0),c=n.n(a),u=n(17),i=n(25),o=n(63),l=n(655),f=n(278),s=n(361),d=n(279),p=n(681),m=n(277),E=n(21),b=n(656),O=n(657),j=n(111),h=n(22),v=n(35),y=n.n(v),g=n(40),_=n(652),T=n(654),k=n(267),A=n(41),w=n(18);var x=function(t){var e=t.anchor,n=t.close,r=Object(E.c)(),u=Object(a.useState)(!1),o=Object(i.a)(u,2),l=(o[0],o[1],function(){var t=Object(g.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("user/signout");case 3:r(Object(w.f)(w.e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}());return c.a.createElement(k.a,{id:e?"User":null,open:!!e,onClose:function(){return n()},anchorEl:e,menus:[{title:"Account",icon:_.a,onClick:function(){}},{title:"Sign Out",icon:T.a,onClick:function(){l()}}]})},S=n(28);var C=function(t){var e=t.location,n=Object(a.useState)({}),r=Object(i.a)(n,2),o=r[0],l=r[1];Object(a.useEffect)(function(){var t=(e.pathname.match(/\/./g)||[]).length;0===t?l({}):1===t?l(Object(u.f)(e.pathname,{path:"/:project",exact:!0}).params):2===t?l(Object(u.f)(e.pathname,{path:"/:project/:entity",exact:!0}).params):3===t&&l(Object(u.f)(e.pathname,{path:"/:project/:entity/:document",exact:!0}).params)},[e.pathname]);var f=o.project,s=o.entity,d=o.document;return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.b,{to:"/"}," StarfallCMS "),f?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(S.b,{to:"/".concat(f)}," ",f," ")):null,s?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(S.b,{to:"/".concat(f,"/").concat(s)}," ",s," ")):null,d?c.a.createElement(c.a.Fragment,null,"/",c.a.createElement(S.b,{to:"/".concat(f,"/").concat(s,"/").concat(d)}," ",d," ")):null)},N=Object(o.a)(function(t){return{root:Object(r.a)({backgroundColor:t.palette.primary.light},t.responsive),link:{"& a":{color:"black",paddingLeft:t.spacing(.35),paddingRight:t.spacing(.35),fontSize:"115%"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},hide:t.hide}});var D=function(t){var e=N(),n=Object(E.c)(),r=Object(E.d)(function(t){return t.sidebar}),u=Object(a.useState)(null),o=Object(i.a)(u,2),v=o[0],y=o[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{position:"fixed",className:e.root},c.a.createElement(f.a,null,c.a.createElement(s.a,{mdUp:!0},c.a.createElement(d.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){return n(Object(h.m)(!r))},edge:"start",className:Object(j.a)(r&&e.hide)},c.a.createElement(b.a,null))),c.a.createElement(p.a,{display:"flex",flexGrow:1,container:m.a,variant:"h6",align:"center",className:e.link},c.a.createElement(C,t)),c.a.createElement(d.a,{edge:"end","aria-label":"Account of current user","aria-haspopup":"true",color:"inherit",onClick:function(t){return y(t.currentTarget)}},c.a.createElement(O.a,null)))),c.a.createElement(x,{anchor:v,close:function(){return y(null)}}))},I=Object(o.a)(function(t){return{root:Object(r.a)({backgroundColor:"#292D2E"},t.responsive),text:{color:"white",fontSize:"125%",textAlign:"center",lineHeight:"50px"}}});var R=function(){var t=I();return c.a.createElement("footer",{className:t.root},c.a.createElement(m.a,{variant:"h3",className:t.text},"Copyright Starfall Production"))},P=n(690),F=n(665),M=n(663),G=n(664),L=n(651),z=n(378),U=n(281),J=n(660),H=n(686),W=n(658),Y=n(659),B=Object(o.a)({root:{flexGrow:1}});var K=function(t){var e=B(),n=t.name,r=t.projectName;return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{divider:!0},c.a.createElement(H.a,{component:S.b,to:"/".concat(r,"/").concat(n),className:e.root},c.a.createElement(U.a,{primary:n}))))},V=n(150),q=Object(o.a)(function(t){return{root:{paddingLeft:t.spacing(1)},hide:{display:"none"},btn:{flexGrow:1}}});var Q=function(t){var e=q(),n=t.id,r=t.name,u=Object(a.useMemo)(V.a,[]),o=Object(E.d)(function(t){return u(t,n)}),l=Object(a.useState)(!1),f=Object(i.a)(l,2),s=f[0],p=f[1],m=Object(a.useState)(!1),b=Object(i.a)(m,2),O=b[0],h=b[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{button:!0,divider:!0,onClick:function(){return p(!s)}},c.a.createElement(U.a,{primary:r}),s?c.a.createElement(W.a,null):c.a.createElement(Y.a,null)),c.a.createElement(J.a,{in:s,timeout:"auto",unmountOnExit:!0},c.a.createElement(L.a,{className:e.root,disablePadding:!0},c.a.createElement(z.a,{button:!0,component:S.b,to:"/".concat(r,"/authentication"),divider:!0},c.a.createElement(U.a,{primary:"Authentication"})),c.a.createElement(z.a,{button:!0,component:S.b,to:"/".concat(r,"/storage"),divider:!0},c.a.createElement(U.a,{primary:"Storage"})),c.a.createElement(z.a,{divider:!0},c.a.createElement(H.a,{component:S.b,to:"/".concat(r),className:e.btn},c.a.createElement(U.a,{primary:"Entities"})),c.a.createElement(d.a,{color:"inherit","aria-label":"Expand ".concat(r," entities"),onClick:function(){return h(!O)},edge:"end",className:Object(j.a)(0===o.length&&e.hide)},O?c.a.createElement(W.a,null):c.a.createElement(Y.a,null))),o.length>0?c.a.createElement(J.a,{in:O,timeout:"auto",unmountOnExit:!0},c.a.createElement(L.a,{className:e.root,disablePadding:!0},o.map(function(t){return c.a.createElement(K,{key:t.id,name:t.name,projectName:r})}))):null)))},X=n(199);var Z=function(t){var e=Object(E.d)(X.a);return c.a.createElement(L.a,null,c.a.createElement(z.a,{button:!0,component:S.b,to:"/",divider:!0},c.a.createElement(U.a,{primary:"Overview"})),e.map(function(t){return c.a.createElement(Q,{id:t.id,name:t.name,key:t.id})}))},$=Object(o.a)(function(t){return{root:t.sidebar,paper:Object(r.a)({backgroundColor:t.palette.primary.main},t.sidebarPaper),direction:t.direction,btn:Object(r.a)({display:"flex",alignItems:"center",padding:"0 8px"},t.mixins.toolbar,{justifyContent:"flex-end"})}});var tt=function(t){var e=$(),n=Object(E.c)(),r=Object(E.d)(function(t){return t.sidebar});return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{mdUp:!0},c.a.createElement(P.a,{className:e.root,variant:"temporary",anchor:"rtl"===e.direction?"right":"left",open:r,classes:{paper:e.paper},ModalProps:{keepMounted:!0}},c.a.createElement("div",{className:e.btn},c.a.createElement(d.a,{onClick:function(){return n(Object(h.m)(!r))}},"ltr"===e.direction?c.a.createElement(M.a,null):c.a.createElement(G.a,null))),c.a.createElement(F.a,null),c.a.createElement(Z,null))),c.a.createElement(s.a,{smDown:!0},c.a.createElement(P.a,{className:e.root,classes:{paper:e.paper},variant:"permanent",open:!0},c.a.createElement(Z,null))))},et=n(200),nt=n(180),rt=Object(a.lazy)(function(){return Promise.all([n.e(29),n.e(26)]).then(n.bind(null,669))}),at=Object(a.lazy)(function(){return n.e(22).then(n.bind(null,684))}),ct=Object(a.lazy)(function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(25)]).then(n.bind(null,670))}),ut=Object(a.lazy)(function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(24)]).then(n.bind(null,677))}),it=Object(a.lazy)(function(){return n.e(27).then(n.bind(null,678))}),ot=Object(a.lazy)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(19)]).then(n.bind(null,682))}),lt=Object(o.a)(function(t){return{root:Object(r.a)({marginTop:65,paddingTop:15,paddingBottom:15,backgroundColor:t.palette.background.light.light,overflow:"auto"},t.responsive)}});e.default=function(t){var e=lt(),n=Object(E.c)(),r=Object(E.d)(function(t){return t.authStatus});return Object(a.useEffect)(function(){n(Object(et.d)())},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(D,t),c.a.createElement(tt,null),c.a.createElement(nt.a,{className:e.root},c.a.createElement(a.Suspense,{fallback:c.a.createElement("div",null)},r===w.b||r===w.d||r===w.g?c.a.createElement(rt,null):null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/:project/:entity/:document",component:it}),c.a.createElement(u.b,{path:"/:project/authentication",component:null}),c.a.createElement(u.b,{path:"/:project/storage",component:ot}),c.a.createElement(u.b,{path:"/:project/:entity",component:ut}),c.a.createElement(u.b,{path:"/:project",component:ct}),c.a.createElement(u.b,{path:"/",component:at})))),c.a.createElement(R,null))}}}]);
//# sourceMappingURL=10.4b7b0d75.chunk.js.map