{"version":3,"sources":["components/DocumentJSONEditor.js","components/DocumentAdd.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_1__","react_ace__WEBPACK_IMPORTED_MODULE_2__","react_ace__WEBPACK_IMPORTED_MODULE_2___default","DocumentJSONEditor","props","data","onChange","onValidation","a","createElement","item","xs","placeholder","mode","theme","name","value","event","onValidate","annotations","width","fontSize","showPrintMargin","showGutter","highlightActiveLine","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","useStyle","makeStyles","root","& > *","marginTop","spacing","marginBottom","DocumentAdd","style","dispatch","useDispatch","_props$match$params","match","params","project","entity","selectEntity","useMemo","selectEntityInProjectByName","_entity","useSelector","state","_useState","useState","_useState2","Object","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setData","_useState3","_useState4","valid","setValid","react__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_4__","container","className","direction","_DocumentJSONEditor__WEBPACK_IMPORTED_MODULE_11__","length","component","Button","color","variant","disabled","onClick","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","Axios","post","concat","id","JSON","parse","ShowNotificationDialog","t0","stop"],"mappings":"2FAAA,IAAAA,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAAAI,EAAAH,EAAA,KAAAI,EAAAJ,EAAA,KAAAK,EAAAL,EAAAE,EAAAE,GAAAJ,EAAA,KAAAA,EAAA,KAsCeM,IA9Bf,SAA4BC,GAAM,IACvBC,EAAgCD,EAAhCC,KAAMC,EAA0BF,EAA1BE,SAAUC,EAAgBH,EAAhBG,aAEvB,OACIT,EAAAU,EAAAC,cAACT,EAAA,EAAD,CAAMU,MAAI,EAACC,GAAI,IACXb,EAAAU,EAAAC,cAACP,EAAAM,EAAD,CACII,YAAY,GACZC,KAAK,OACLC,MAAM,SACNC,KAAK,cACLT,SAAU,SAACU,EAAOC,GAAR,OAAkBX,EAASU,EAAOC,IAC5CC,WAAY,SAACC,GAAD,OAAiBZ,EAAaY,IAC1CC,MAAM,OACNC,SAAU,GACVC,iBAAiB,EACjBC,YAAY,EACZC,qBAAqB,EACrBR,MAAOX,EACPoB,WAAY,CACRC,2BAA2B,EAC3BC,0BAA0B,EAC1BC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAS,mLChBvBC,EAAWC,IAAW,SAAAlB,GAAK,MAAK,CACrCmB,KAAK,CACJC,QAAQ,CACPC,UAAWrB,EAAMsB,QAAQ,IAChBC,aAAcvB,EAAMsB,QAAQ,SAiDzBE,UA5Cf,SAAqBlC,GACjB,IAAMmC,EAAQR,IACRS,EAAWC,cAFMC,EAGGtC,EAAMuC,MAAMC,OAA/BC,EAHgBH,EAGhBG,QAASC,EAHOJ,EAGPI,OAEVC,EAAeC,kBAAQC,IAA6B,IACpDC,EAAUC,YAAY,SAAAC,GAAK,OAAIL,EAAaK,EAAOP,EAASC,KAN3CO,EAQCC,mBAAQ,MARTC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAQhBhD,EARgBkD,EAAA,GAQVG,EARUH,EAAA,GAAAI,EASGL,oBAAS,GATZM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAShBE,EATgBD,EAAA,GASTE,EATSF,EAAA,GAWvB,OACIG,EAAAvD,EAAAC,cAACuD,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAW3B,EAAMN,KAAMkC,UAAU,UAC7CJ,EAAAvD,EAAAC,cAAC2D,EAAA,EAAD,CACI/D,KAAMA,EACNC,SAAU,SAACU,GAAD,OAAW0C,EAAQ1C,IAC7BT,aAAc,SAACY,GAAD,OAAiB2C,EAAgC,IAAvB3C,EAAYkD,WAExDN,EAAAvD,EAAAC,cAACuD,EAAA,EAAD,CAAMtD,MAAI,EAAC4D,UAAWC,IAAQC,MAAM,YAChCC,QAAQ,YAAY9D,GAAI,GAAI+D,UAAWb,EACvCc,QAAOnB,OAAAoB,EAAA,EAAApB,CAAAqB,EAAArE,EAAAsE,KAAE,SAAAC,IAAA,OAAAF,EAAArE,EAAAwE,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEKC,IAAMC,KAAN,YAAAC,OAAuBpC,EAAQqC,IAAM,CACvClF,KAAMmF,KAAKC,MAAMpF,KAHpB,OAMDmC,EAASkD,YACL,eACA,gCARHT,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAU,GAAAV,EAAA,SAWDzC,EAASkD,YACL,eAD2B,+BAAAJ,OAAAL,EAAAU,MAX9B,wBAAAV,EAAAW,SAAAb,EAAA,kBAFb","file":"static/js/17.5fa86f5b.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport AceEditor from \"react-ace\";\r\nimport 'brace/mode/json';\r\nimport 'brace/theme/github';\r\n\r\nfunction DocumentJSONEditor(props){\r\n    const {data, onChange, onValidation} = props;\r\n\r\n    return(\r\n        <Grid item xs={12}>\r\n            <AceEditor\r\n                placeholder=\"\" \r\n                mode=\"json\" \r\n                theme=\"github\"\r\n                name=\"json-editor\"\r\n                onChange={(value, event) => onChange(value, event)}\r\n                onValidate={(annotations) => onValidation(annotations)}\r\n                width='100%'\r\n                fontSize={20}\r\n                showPrintMargin={true}\r\n                showGutter={true}\r\n                highlightActiveLine={true}\r\n                value={data}\r\n                setOptions={{\r\n                    enableBasicAutocompletion: true,\r\n                    enableLiveAutocompletion: true,\r\n                    enableSnippets: false,\r\n                    showLineNumbers: true,\r\n                    tabSize: 4\r\n                }}\r\n            />\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentJSONEditor;","import React, {useMemo, useState} from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport Axios from '../Axios';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {ShowNotificationDialog} from '../redux/actions/globalActions';\r\nimport {selectEntityInProjectByName} from '../redux/selectors/entitySelectors';\r\n\r\nimport DocumentJSONEditor from './DocumentJSONEditor';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n\troot:{\r\n\t\t'& > *':{\r\n\t\t\tmarginTop: theme.spacing(0.5),\r\n            marginBottom: theme.spacing(0.5)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nfunction DocumentAdd(props){\r\n    const style = useStyle();\r\n    const dispatch = useDispatch();\r\n    const {project, entity} = props.match.params;\r\n\r\n    const selectEntity = useMemo(selectEntityInProjectByName, []);\r\n    const _entity = useSelector(state => selectEntity(state, project, entity));\r\n    \r\n    const [data, setData] = useState(`{}`);\r\n    const [valid, setValid] = useState(false);\r\n\r\n    return(\r\n        <Grid container className={style.root} direction=\"column\">\r\n            <DocumentJSONEditor \r\n                data={data} \r\n                onChange={(value) => setData(value)}\r\n                onValidation={(annotations) => setValid(annotations.length === 0)}\r\n            />\r\n            <Grid item component={Button} color=\"secondary\" \r\n                variant=\"contained\" xs={12} disabled={!valid}\r\n                onClick={async () => {\r\n                    try{\r\n                        await Axios.post(`document/${_entity.id}`, {\r\n                            data: JSON.parse(data)\r\n                        });\r\n                        \r\n                        dispatch(ShowNotificationDialog(\r\n                            'Add Document', \r\n                            'Succeed adding new document'\r\n                        ));\r\n                    }catch(err){\r\n                        dispatch(ShowNotificationDialog(\r\n                            'Add Document', \r\n                            `Failed adding new document, ${err}`\r\n                        ));\r\n                    }\r\n                }}\r\n            >\r\n                Add\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentAdd;"],"sourceRoot":""}