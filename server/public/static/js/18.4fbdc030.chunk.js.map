{"version":3,"sources":["components/DocumentJSONEditor.js","components/DocumentEdit.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_1__","react_ace__WEBPACK_IMPORTED_MODULE_2__","react_ace__WEBPACK_IMPORTED_MODULE_2___default","DocumentJSONEditor","props","data","onChange","onValidation","a","createElement","item","xs","placeholder","mode","theme","name","value","event","onValidate","annotations","width","fontSize","showPrintMargin","showGutter","highlightActiveLine","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","useStyle","makeStyles","root","& > *","marginTop","spacing","marginBottom","DocumentEdit","style","dispatch","useDispatch","document","match","params","_document","useSelector","state","selectDocument","_useState","useState","JSON","stringify","_useState2","Object","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setData","_useState3","_useState4","valid","setValid","react__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_4__","container","className","direction","_DocumentJSONEditor__WEBPACK_IMPORTED_MODULE_11__","length","component","Button","color","variant","disabled","onClick","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Project_VScode_Web_StarfallCMS_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","Axios","post","concat","parse","ShowNotificationDialog","t0","stop"],"mappings":"2FAAA,IAAAA,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAAAI,EAAAH,EAAA,KAAAI,EAAAJ,EAAA,KAAAK,EAAAL,EAAAE,EAAAE,GAAAJ,EAAA,KAAAA,EAAA,KAsCeM,IA9Bf,SAA4BC,GAAM,IACvBC,EAAgCD,EAAhCC,KAAMC,EAA0BF,EAA1BE,SAAUC,EAAgBH,EAAhBG,aAEvB,OACIT,EAAAU,EAAAC,cAACT,EAAA,EAAD,CAAMU,MAAI,EAACC,GAAI,IACXb,EAAAU,EAAAC,cAACP,EAAAM,EAAD,CACII,YAAY,GACZC,KAAK,OACLC,MAAM,SACNC,KAAK,cACLT,SAAU,SAACU,EAAOC,GAAR,OAAkBX,EAASU,EAAOC,IAC5CC,WAAY,SAACC,GAAD,OAAiBZ,EAAaY,IAC1CC,MAAM,OACNC,SAAU,GACVC,iBAAiB,EACjBC,YAAY,EACZC,qBAAqB,EACrBR,MAAOX,EACPoB,WAAY,CACRC,2BAA2B,EAC3BC,0BAA0B,EAC1BC,gBAAgB,EAChBC,iBAAiB,EACjBC,QAAS,mLCjBvBC,EAAWC,IAAW,SAAAlB,GAAK,MAAK,CACrCmB,KAAK,CACJC,QAAQ,CACPC,UAAWrB,EAAMsB,QAAQ,IAChBC,aAAcvB,EAAMsB,QAAQ,SAkDzBE,UA7Cf,SAAsBlC,GAClB,IAAMmC,EAAQR,IACRS,EAAWC,cACVC,EAAYtC,EAAMuC,MAAMC,OAAxBF,SAEDG,EAAYC,YAAY,SAAAC,GAAK,OAAIC,YAAeD,EAAOL,KALrCO,EAOAC,mBACpBL,EAAYM,KAAKC,UAAUP,EAAUxC,KAAM,KAAM,GAAxC,MARWgD,EAAAC,OAAAC,EAAA,EAAAD,CAAAL,EAAA,GAOjB5C,EAPiBgD,EAAA,GAOXG,EAPWH,EAAA,GAAAI,EAUEP,oBAAS,GAVXQ,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAUjBE,EAViBD,EAAA,GAUVE,EAVUF,EAAA,GAYxB,OACIG,EAAArD,EAAAC,cAACqD,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAWzB,EAAMN,KAAMgC,UAAU,UAC7CJ,EAAArD,EAAAC,cAACyD,EAAA,EAAD,CACI7D,KAAMA,EACNC,SAAU,SAACU,GAAD,OAAWwC,EAAQxC,IAC7BT,aAAc,SAACY,GAAD,OAAiByC,EAAgC,IAAvBzC,EAAYgD,WAExDN,EAAArD,EAAAC,cAACqD,EAAA,EAAD,CAAMpD,MAAI,EAAC0D,UAAWC,IAAQ1D,GAAI,GAC9B2D,MAAM,YAAYC,QAAQ,YAAYC,UAAWb,EACjDc,QAAOnB,OAAAoB,EAAA,EAAApB,CAAAqB,EAAAnE,EAAAoE,KAAE,SAAAC,IAAA,OAAAF,EAAAnE,EAAAsE,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEKC,IAAMC,KAAN,YAAAC,OAAuB1C,EAAvB,WAA0C,CAC5CrC,KAAM8C,KAAKkC,MAAMhF,KAHpB,OAMDmC,EAAS8C,YACL,gBACA,6BARHP,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,SAWDvC,EAAS8C,YACL,gBAD2B,4BAAAF,OAAAL,EAAAQ,MAX9B,wBAAAR,EAAAS,SAAAX,EAAA,kBAFb","file":"static/js/18.4fbdc030.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport AceEditor from \"react-ace\";\r\nimport 'brace/mode/json';\r\nimport 'brace/theme/github';\r\n\r\nfunction DocumentJSONEditor(props){\r\n    const {data, onChange, onValidation} = props;\r\n\r\n    return(\r\n        <Grid item xs={12}>\r\n            <AceEditor\r\n                placeholder=\"\" \r\n                mode=\"json\" \r\n                theme=\"github\"\r\n                name=\"json-editor\"\r\n                onChange={(value, event) => onChange(value, event)}\r\n                onValidate={(annotations) => onValidation(annotations)}\r\n                width='100%'\r\n                fontSize={20}\r\n                showPrintMargin={true}\r\n                showGutter={true}\r\n                highlightActiveLine={true}\r\n                value={data}\r\n                setOptions={{\r\n                    enableBasicAutocompletion: true,\r\n                    enableLiveAutocompletion: true,\r\n                    enableSnippets: false,\r\n                    showLineNumbers: true,\r\n                    tabSize: 4\r\n                }}\r\n            />\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentJSONEditor;","import React, {useState} from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport Axios from '../Axios';\r\n\r\nimport {ShowNotificationDialog} from '../redux/actions/globalActions';\r\nimport {selectDocument} from '../redux/selectors/documentSelectors';\r\nimport DocumentJSONEditor from './DocumentJSONEditor';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n\troot:{\r\n\t\t'& > *':{\r\n\t\t\tmarginTop: theme.spacing(0.5),\r\n            marginBottom: theme.spacing(0.5)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nfunction DocumentEdit(props){\r\n    const style = useStyle()\r\n    const dispatch = useDispatch();\r\n    const {document} = props.match.params;\r\n\r\n    const _document = useSelector(state => selectDocument(state, document));\r\n\r\n    const [data, setData] = useState(\r\n        _document ? JSON.stringify(_document.data, null, 4) : `{}`\r\n    );\r\n    const [valid, setValid] = useState(false);\r\n    \r\n    return(\r\n        <Grid container className={style.root} direction=\"column\">\r\n            <DocumentJSONEditor \r\n                data={data} \r\n                onChange={(value) => setData(value)}\r\n                onValidation={(annotations) => setValid(annotations.length === 0)}\r\n            />\r\n            <Grid item component={Button} xs={12} \r\n                color=\"secondary\" variant=\"contained\" disabled={!valid}\r\n                onClick={async() => {\r\n                    try{\r\n                        await Axios.post(`document/${document}/modify`, {\r\n                            data: JSON.parse(data)\r\n                        });\r\n\r\n                        dispatch(ShowNotificationDialog(\r\n                            'Edit Document', \r\n                            'Succeed editing document'\r\n                        ));\r\n                    }catch(err){\r\n                        dispatch(ShowNotificationDialog(\r\n                            'Edit Document', \r\n                            `Failed editing document, ${err}`\r\n                        ));\r\n                    }\r\n                }}\r\n            >\r\n                Modify\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default DocumentEdit;"],"sourceRoot":""}